(function(t){function e(e){for(var i,a,s=e[0],l=e[1],h=e[2],d=0,u=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&u.push(o[a][0]),o[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(u.length)u.shift()();return r.push.apply(r,h||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},2:function(t,e){},"42c8":function(t,e,n){},"7faf":function(t,e,n){"use strict";var i=n("8fba"),o=n.n(i);o.a},8543:function(t,e,n){"use strict";var i=n("c4bd"),o=n.n(i);o.a},"8fba":function(t,e,n){},c4bd:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=n("0874"),r=n("7591"),a=n.n(r),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",{staticClass:"app-header"},[n("h1",{staticClass:"title"},[t._v("Graph Visualizer")]),n("div",{staticClass:"settings"},[t.desktopLayout?n("div",{staticClass:"settings-item"},[n("span",{staticClass:"settings-item-title",class:{"setting-item-active":t.settingsOpen},on:{click:function(e){t.settingsOpen=!t.settingsOpen}}},[t._v("\n          侧栏\n        ")])]):t._e()])]),n("main",t._g({staticClass:"main-panes",class:{"main-panes-show-sidebarmain-panes-show-sidebar":t.settingsOpen&&t.desktopLayout}},Object.assign({},t.sizerMouseActive?{mouseup:t.onMainSizerMouseUp,mousemove:t.onMainSizerMouseMove}:{},t.sizerTouchActive?{touchend:t.onMainSizerTouchEnd,touchmove:t.onMainSizerTouchMove}:{})),[n("div",{staticClass:"main-container main-container-graph",class:{"main-container-graph-size-active":!t.sizerMouseActive&&!t.sizerTouchActive},style:{width:t.desktopLayout?t.settingsOpen?"calc(100% - "+t.settingsWidth+"px)":"100%":"auto"}},[n("div",{ref:"canvas",staticClass:"main-pane main-pane-graph"},[t.parseError?n("div",{staticClass:"error-pane"},[n("pre",[n("code",[t._v(t._s(t.parseError))])])]):t._e(),n("Graph",{ref:"graph",attrs:{width:t.canvasWidth,height:t.canvasHeight,data:t.rendered}})],1)]),n("transition",{attrs:{name:"sizer-slide-x",duration:300}},[t.settingsOpen&&t.desktopLayout?n("div",{staticClass:"main-sizer main-client-settings-sizer",style:{left:"calc(100% - "+t.settingsWidth+"px)"},on:{mousedown:t.onMainSizerMouseDown,touchstart:t.onMainSizerTouchStart}},[n("div",{staticClass:"main-sizer-handlebar"})]):t._e()]),n("transition",{attrs:{name:"settings-slide-x",duration:300}},[t.settingsOpen||!t.desktopLayout?n("div",{staticClass:"main-container main-container-settings",style:{width:t.desktopLayout?t.settingsWidth+"px":"auto"}},[n("div",{staticClass:"main-pane main-pane-settings"},[n("CollapsiblePane",{staticClass:"main-pane-subpane",attrs:{title:"输入"}},[n("div",{staticClass:"settings-input-file"},[n("label",{attrs:{for:"input-file"}},[n("v-icon",{attrs:{name:"upload",scale:"0.8"}}),t._v("打开文件\n              ")],1),n("input",{attrs:{type:"file",id:"input-file"},on:{change:t.inputFileChange}})]),n("div",{staticClass:"settings-input-format"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.parser,expression:"parser"}],attrs:{id:"input-format"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.parser=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"json",selected:""}},[t._v("JSON")]),n("option",{attrs:{value:"graphviz"}},[t._v("Graphviz")])])]),n("button",{staticClass:"setting-input-redraw",on:{click:t.redraw}},[n("v-icon",{attrs:{name:"sync",scale:"0.8"}}),t._v("重绘\n            ")],1),n("div",{staticClass:"settings-input-examples"},[n("span",{staticClass:"settings-input-example-label"},[t._v("示例：")]),t._l(t.examples,(function(e,i){return n("span",{key:e.name,staticClass:"settings-input-example",on:{click:function(e){return t.selectExample(i)}}},[t._v("\n                "+t._s(e.name)+"\n              ")])}))],2),n("div",{staticClass:"settings-input-display",class:{"settings-input-display-two-column":t.realSettingsWidth>=400}},[n("div",{staticClass:"settings-input-raw"},[n("label",{attrs:{for:"input-raw"}},[t._v("输入数据：")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.rawInput,expression:"rawInput"}],attrs:{id:"input-raw",rows:"10"},domProps:{value:t.rawInput},on:{input:function(e){e.target.composing||(t.rawInput=e.target.value)}}})]),n("div",{staticClass:"settings-input-parsed"},[n("label",{attrs:{for:"input-parsed"}},[t._v("解析结果（只读）：")]),n("textarea",{attrs:{id:"input-parsed",rows:"10",readonly:""},domProps:{value:t.parsedInput}})])])])],1)]):t._e()])],1)])},l=[],h=n("d225"),c=n("b0b4"),d=n("308d"),u=n("6bb5"),f=n("4e2b"),p=n("9ab4"),g=n("60a3"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"pane-title",on:{click:t.click}},[t._v("\n    "+t._s(t.title)+"\n    "),n("v-icon",{staticClass:"pane-arrow",class:{"pane-arrow-expand":t.expand},attrs:{name:"angle-up"}})],1),n("div",{ref:"paneContent",staticClass:"pane-content",style:null!==t.animationHeight?{height:t.animationHeight+"px"}:{}},[t._t("default")],2)])},b=[],v=(n("ea4b"),function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(d["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.expand=!0,t.realHeight=0,t.animationHeight=null,t}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){var t=this.$refs.paneContent;this.realHeight=t.offsetHeight,t.addEventListener("transitionend",this.transitionEnd.bind(this))}},{key:"click",value:function(){var t=this;if(this.expand=!this.expand,this.expand)this.animationHeight=0,setTimeout((function(){t.animationHeight=t.realHeight}));else{var e=this.$refs.paneContent;this.realHeight=e.offsetHeight,this.animationHeight=this.realHeight,setTimeout((function(){t.animationHeight=0}))}}},{key:"transitionEnd",value:function(){0!==this.animationHeight&&(this.animationHeight=null)}}]),e}(g["c"]));Object(p["a"])([Object(g["b"])(String)],v.prototype,"title",void 0),v=Object(p["a"])([g["a"]],v);var m=v,w=m,x=(n("fe74"),n("2877")),S=Object(x["a"])(w,y,b,!1,null,"08120549",null),k=S.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"graph-container"},[n("v-stage",t._g({ref:"stage",attrs:{config:{width:t.width,height:t.height,x:t.width/2+t.x,y:t.height/2+t.y}},on:{mousedown:t.mousedown,wheel:t.wheel}},t.mouseDragActive||t.draggedId?{mouseup:t.mouseup,mousemove:t.mousemove}:{}),t._l(t.data,(function(e){return n("v-layer",{key:e.key},t._l(e.children,(function(e){return n(e.is,t._b({key:e.key,tag:"component"},"component",e,!1))})),1)})),1),n("div",{staticClass:"thumbnail",style:{width:t.thumbnailWidth+"px",height:t.thumbnailHeight+"px"}},[n("v-stage",t._g({ref:"thumbnailStage",attrs:{config:{width:t.thumbnailWidth,height:t.thumbnailHeight,x:t.thumbnailWidth/2,y:t.thumbnailHeight/2}}},t.thumbnailMouseDragActive?{mouseup:t.thumbnailMouseup,mousemove:t.thumbnailMousemove}:{}),t._l(t.data,(function(e){return n("v-layer",{key:e.key},[t._l(e.children,(function(e){return n(e.is,t._b({key:e.key,tag:"component"},"component",e,!1))})),n("v-shape",{attrs:{config:t.thumbnailViewportBackgroundConfig}}),n("v-rect",{attrs:{config:t.thumbnailViewportConfig},on:{mousedown:t.thumbnailMousedown}})],2)})),1)],1)],1)},C=[],z=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-group",t._g({attrs:{config:t.config}},t.draggable?{mousedown:t.mousedown}:{}),t._l(t.children,(function(e){return n(e.is,t._b({key:e.key,tag:"component"},"component",e,!1))})),1)}),j=[],_=function(t){function e(){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"mousedown",value:function(t){t.cancelBubble=!0,this.fullId&&this.$root.$children[0].$refs.graph.setDraggedIdAndPos(this.fullId,{x:t.evt.pageX,y:t.evt.pageY})}}]),e}(g["c"]);Object(p["a"])([Object(g["b"])(Object)],_.prototype,"config",void 0),Object(p["a"])([Object(g["b"])(Array)],_.prototype,"children",void 0),Object(p["a"])([Object(g["b"])(Boolean)],_.prototype,"draggable",void 0),Object(p["a"])([Object(g["b"])(String)],_.prototype,"fullId",void 0),_=Object(p["a"])([g["a"]],_);var N=_,T=N,M=Object(x["a"])(T,z,j,!1,null,null,null),P=M.exports,E=(n("28a5"),n("ac4d"),n("8a81"),n("ac6a"),function(){function t(){Object(h["a"])(this,t),this.events={}}return Object(c["a"])(t,[{key:"addEventListener",value:function(t,e){void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this.events[t]){var n=this.events[t].indexOf(e);n>-1&&this.events[t].splice(n,-1)}}},{key:"emit",value:function(t){if(void 0!==this.events[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var o=!0,r=!1,a=void 0;try{for(var s,l=this.events[t][Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var h=s.value;h.apply(this,n)}}catch(c){r=!0,a=c}finally{try{o||null==l.return||l.return()}finally{if(r)throw a}}}}}]),t}()),L=function t(e){Object(h["a"])(this,t),this.parent=e},B=function(t){function e(){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){this.config=Object.assign({},e.defaultConfig,t)}},{key:"render",value:function(){if(!this.parent.graph)throw new Error("Top level edge cannot be rendered");var t=this.parent.graph.findPort(this.parent.from.split(":")),e=this.parent.graph.findPort(this.parent.to.split(":"));if(!t||!e)throw new Error("Unknown start or end node for edge");var n=t.getAbsolutePosition(this.parent.parent),i=e.getAbsolutePosition(this.parent.parent),o=Math.atan2(i.y-n.y,i.x-n.x),r=Math.PI+o,a=t.distanceToBorder(o),s=e.distanceToBorder(r),l=n.x+a*Math.cos(o),h=n.y+a*Math.sin(o),c=i.x+s*Math.cos(r),d=i.y+s*Math.sin(r),u=[];return this.config.fromPointer&&(u.push({is:"Pointer",key:"toPointer",x:l,y:h,angle:o,width:this.config.pointerWidth,height:this.config.pointerHeight,fill:this.config.pointerColor}),l+=this.config.pointerWidth*Math.cos(o),h+=this.config.pointerWidth*Math.sin(o)),this.config.toPointer&&(u.push({is:"Pointer",key:"toPointer",x:c,y:d,angle:r,width:this.config.pointerWidth,height:this.config.pointerHeight,fill:this.config.pointerColor}),c+=this.config.pointerWidth*Math.cos(r),d+=this.config.pointerWidth*Math.sin(r)),u.unshift({is:"v-line",key:"line",config:{points:[l,h,c,d],stroke:this.config.lineColor,strokeWidth:this.config.lineWidth}}),{is:"Group",key:this.parent.id,children:u}}}]),e}(L);function I(t){switch(t.shape){default:return B}}B.defaultConfig={fromPointer:!1,toPointer:!0,lineColor:"black",lineWidth:1,pointerColor:"black",pointerWidth:10,pointerHeight:15};var D=function(){function t(e,n,i){Object(h["a"])(this,t),this.root=e,this.graph=n,this.parent=i}return Object(c["a"])(t,[{key:"setData",value:function(e){this.id=t.getId(e),this.from=e.from,this.to=e.to,this.fullId=e.parentId?"".concat(e.parentId,":").concat(this.id):this.id;var n=I(e);this.edgeType&&this.edgeType.constructor===n||(this.edgeType=new n(this)),this.edgeType.setData(e)}},{key:"render",value:function(){return this.edgeType.render()}}],[{key:"getId",value:function(t){return t.id||"".concat(t.from,"-").concat(t.to)}}]),t}(),W=n("768b"),A=(n("4f7f"),n("5df3"),n("f400"),n("6c7b"),function(){function t(e){Object(h["a"])(this,t),this.parent=e,this.position={x:0,y:0}}return Object(c["a"])(t,[{key:"setPosition",value:function(t){this.position=t}},{key:"getPosition",value:function(){return this.position}},{key:"getAbsolutePosition",value:function(t){var e=0,n=0,i=this;while(i!==t){if(null===i)throw new Error("Incorrect parent parameter");e+=i.position.x,n+=i.position.y,i=i.parent}return{x:e,y:n}}}]),t}()),R=function(t){function e(t,n){var i;return Object(h["a"])(this,e),i=Object(d["a"])(this,Object(u["a"])(e).call(this,n)),i.graph=t,i}return Object(f["a"])(e,t),e}(A),H=function(t){function e(t,n){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).call(this,t,n))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"solve",value:function(t,n,i){var o=Object.assign({},e.defaultConfig,t);this.data=n,this.index=i;for(var r=new Map,a=0;a<n.ports.length;++a)r.set(n.ports[a],a);var s=!0,l=!1,h=void 0;try{for(var c,d=n.ports[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value;u.initialPlaced||(u.setPosition({x:o.springLength*(Math.random()-.5),y:o.springLength*(Math.random()-.5)}),u.initialPlaced=!0)}}catch(Qt){l=!0,h=Qt}finally{try{s||null==d.return||d.return()}finally{if(l)throw h}}for(var f=[],p=0;p<n.ports.length;++p)f.push(Array(n.ports.length).fill(1/0)),f[f.length-1][p]=0;var g=!0,y=!1,b=void 0;try{for(var v,m=n.edges[Symbol.iterator]();!(g=(v=m.next()).done);g=!0){var w=v.value,x=w.fromBelonging,S=w.toBelonging,k=r.get(x),O=r.get(S);f[k][O]=1,f[O][k]=1}}catch(Qt){y=!0,b=Qt}finally{try{g||null==m.return||m.return()}finally{if(y)throw b}}for(var C=0;C<n.ports.length;++C)for(var z=0;z<n.ports.length;++z)for(var j=0;j<n.ports.length;++j){var _=f[z][C]+f[C][j];f[z][j]>_&&(f[z][j]=_)}for(var N=[],T=0;T<n.ports.length;++T){for(var M=[],P=0;P<n.ports.length;++P)M.push(o.springLength*f[T][P]);N.push(M)}for(var E=[],L=0;L<n.ports.length;++L){for(var B=[],I=0;I<n.ports.length;++I)B.push(o.springConstant*Math.pow(f[L][I],-2));E.push(B)}var D=[],A=!0,R=!1,H=void 0;try{for(var F,G=n.ports[Symbol.iterator]();!(A=(F=G.next()).done);A=!0){F.value;D.push(Array(n.ports.length))}}catch(Qt){R=!0,H=Qt}finally{try{A||null==G.return||G.return()}finally{if(R)throw H}}for(var J=0;J<n.ports.length;++J){var U=n.ports[J].getPosition();D[J][J]=[0,0];for(var $=J+1;$<n.ports.length;++$){var Y=n.ports[$].getPosition(),V=1/Math.sqrt(Math.pow(U.x-Y.x,2)+Math.pow(U.y-Y.y,2));D[J][$]=[E[J][$]*(U.x-Y.x)*(1-N[J][$]*V),E[J][$]*(U.y-Y.y)*(1-N[J][$]*V)],D[$][J]=[-D[J][$][0],-D[J][$][1]]}}for(var X=[],q=0;q<n.ports.length;++q){for(var K=[0,0],Q=0;Q<n.ports.length;++Q)K[0]+=D[q][Q][0],K[1]+=D[q][Q][1];X.push(K)}var Z,tt=.01,et=Math.max(1e3,Math.min(10*n.ports.length,6e3)),nt=5,it=0;while(it<et){it+=1;var ot=0,rt=0,at=0;Z=-1;for(var st=0;st<n.ports.length;++st){var lt=Math.sqrt(Math.pow(X[st][0],2)+Math.pow(X[st][1],2));lt>Z&&(ot=st,rt=X[st][0],at=X[st][1],Z=lt)}if(Z<=tt)break;var ht=n.ports[ot].getPosition(),ct=Z,dt=0;while(ct>tt&&dt<nt){dt+=1;for(var ut=0,ft=0,pt=0,gt=0;gt<n.ports.length;++gt)if(gt!==ot){var yt=n.ports[gt].getPosition(),bt=1/Math.pow(Math.pow(ht.x-yt.x,2)+Math.pow(ht.y-yt.y,2),1.5),vt=E[ot][gt],mt=N[ot][gt];ut+=vt*(1-mt*Math.pow(ht.y-yt.y,2)*bt),ft+=vt*mt*(ht.x-yt.x)*(ht.y-yt.y)*bt,pt+=vt*(1-mt*Math.pow(ht.x-yt.x,2)*bt)}var wt=ut*pt-Math.pow(ft,2),xt=(ft*at-pt*rt)/wt,St=(ft*rt-ut*at)/wt;ht.x+=xt,ht.y+=St;for(var kt=0,Ot=0,Ct=0;Ct<n.ports.length;++Ct)if(Ct!==ot){var zt=Object(W["a"])(D[ot][Ct],2),jt=zt[0],_t=zt[1],Nt=n.ports[Ct].getPosition(),Tt=1/Math.sqrt(Math.pow(ht.x-Nt.x,2)+Math.pow(ht.y-Nt.y,2)),Mt=E[ot][Ct]*(ht.x-Nt.x)*(1-N[ot][Ct]*Tt),Pt=E[ot][Ct]*(ht.y-Nt.y)*(1-N[ot][Ct]*Tt);D[ot][Ct]=[Mt,Pt],D[Ct][ot]=[-Mt,-Pt],X[Ct][0]+=jt-Mt,X[Ct][1]+=_t-Pt,kt+=Mt,Ot+=Pt}X[ot]=[kt,Ot],ct=Math.sqrt(Math.pow(X[ot][0],2)+Math.pow(X[ot][1],2)),rt=X[ot][0],at=X[ot][1]}}var Et=[1/0,1/0],Lt=[-1/0,-1/0],Bt=!0,It=!1,Dt=void 0;try{for(var Wt,At=n.ports[Symbol.iterator]();!(Bt=(Wt=At.next()).done);Bt=!0){var Rt=Wt.value,Ht=Rt.getPosition(),Ft=Rt.getBoundingBoxSize(),Gt=Ft.width/2,Jt=Ft.height/2;Ht.x-Gt<Et[0]&&(Et[0]=Ht.x-Gt),Ht.x+Gt>Lt[0]&&(Lt[0]=Ht.x+Gt),Ht.y-Jt<Et[1]&&(Et[1]=Ht.y-Jt),Ht.y+Jt>Lt[1]&&(Lt[1]=Ht.y+Jt)}}catch(Qt){It=!0,Dt=Qt}finally{try{Bt||null==At.return||At.return()}finally{if(It)throw Dt}}var Ut={x:(Et[0]+Lt[0])/2,y:(Et[1]+Lt[1])/2};this.contentSize={width:Lt[0]-Et[0],height:Lt[1]-Et[1]};var $t=!0,Yt=!1,Vt=void 0;try{for(var Xt,qt=n.ports[Symbol.iterator]();!($t=(Xt=qt.next()).done);$t=!0){var Kt=Xt.value;Kt.getPosition().x-=Ut.x,Kt.getPosition().y-=Ut.y}}catch(Qt){Yt=!0,Vt=Qt}finally{try{$t||null==qt.return||qt.return()}finally{if(Yt)throw Vt}}}},{key:"render",value:function(){return{is:"Group",key:"component-".concat(this.index),config:{x:this.position.x,y:this.position.y},children:this.data.children.map((function(t){return t.render()}))}}},{key:"getContentSize",value:function(){return this.contentSize}}]),e}(R);function F(t){switch(t&&t.type){default:return H}}H.defaultConfig={springLength:150,springConstant:.05};var G=n("75fc"),J=function(t){function e(t,n){var i;return Object(h["a"])(this,e),i=Object(d["a"])(this,Object(u["a"])(e).call(this,n)),i.graph=t,i}return Object(f["a"])(e,t),e}(A),U=function(t){function e(t,n){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).call(this,t,n))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"solve",value:function(t){var n=Object.assign({},e.defaultConfig,t),i=this.graph.layouts,o=i.map((function(t){return t.getContentSize()}));if("LR"===n.direction||"RL"===n.direction){this.contentSize={width:o.map((function(t){return t.width})).reduce((function(t,e){return t+e}),0)+Math.max(i.length-1,0)*n.spaceBetween,height:Math.max.apply(Math,Object(G["a"])(o.map((function(t){return t.height}))).concat([0]))};for(var r="LR"===n.direction?-this.contentSize.width/2:this.contentSize.width/2,a=0;a<i.length;++a){var s=("LR"===n.direction?o[a].width/2:-o[a].width/2)+r;i[a].setPosition({x:s,y:0}),"LR"===n.direction?r+=o[a].width+n.spaceBetween:r-=o[a].width+n.spaceBetween}}else{this.contentSize={width:Math.max.apply(Math,Object(G["a"])(o.map((function(t){return t.width}))).concat([0])),height:o.map((function(t){return t.height})).reduce((function(t,e){return t+e}),0)+Math.max(i.length-1,0)*n.spaceBetween};for(var l="DT"===n.direction?this.contentSize.height/2:-this.contentSize.height/2,h=0;h<i.length;++h){var c=("DT"===n.direction?-o[h].height/2:o[h].height/2)+l;i[h].setPosition({x:0,y:c}),"DT"===n.direction?l-=o[h].height+n.spaceBetween:l+=o[h].height+n.spaceBetween}}}},{key:"render",value:function(){return{is:"Group",key:"components",config:{x:this.position.x,y:this.position.y},children:this.graph.layouts.map((function(t){return t.render()}))}}},{key:"getContentSize",value:function(){return this.contentSize}}]),e}(J);function $(t){switch(t&&t.type){default:return U}}U.defaultConfig={direction:"TD",spaceBetween:12};var Y=function t(e){Object(h["a"])(this,t),this.parent=e},V=function(t){function e(t){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).call(this,t))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){var n=Object.assign({},e.defaultConfig,t);delete n.layout,delete n.children;var i=!this.config||this.config.label!==n.label||this.config.fontSize!==n.fontSize||this.config.fontFamily!==n.fontFamily||this.config.lineHeight!==n.lineHeight;if(i){var o=this.parent.root.ctx;o.font="".concat(n.fontSize,"px ").concat(n.fontFamily);var r=n.label?n.label.split("\n"):[];this.textSize={width:Math.max.apply(Math,Object(G["a"])(r.map((function(t){return o.measureText(t).width}))).concat([0])),height:r.length*n.fontSize*n.lineHeight}}var a=this.parent.componentLayout.getContentSize();this.contentSize={width:a.width+2*n.padding,height:a.height+2*n.padding},this.parent.componentLayout.setPosition({x:0,y:0}),this.textPosition={x:0,y:0},n.label&&("left"===n.labelPosition||"right"===n.labelPosition?(this.contentSize.width+=this.textSize.width+n.spaceBetween,this.textSize.height>a.height&&(this.contentSize.height=this.textSize.height+2*n.padding),"left"===n.labelPosition?(this.parent.componentLayout.getPosition().x=(this.textSize.width+n.spaceBetween)/2,this.textPosition.x=-(a.width+n.spaceBetween)/2):(this.parent.componentLayout.getPosition().x=-(this.textSize.width+n.spaceBetween)/2,this.textPosition.x=(a.width+n.spaceBetween)/2)):(this.contentSize.height+=this.textSize.height+n.spaceBetween,this.textSize.width>a.width&&(this.contentSize.width=this.textSize.width+2*n.padding),"bottom"===n.labelPosition?(this.parent.componentLayout.getPosition().y=-(this.textSize.height+n.spaceBetween)/2,this.textPosition.y=(a.height+n.spaceBetween)/2):(this.parent.componentLayout.getPosition().y=(this.textSize.height+n.spaceBetween)/2,this.textPosition.y=-(a.height+n.spaceBetween)/2))),this.borderSize={width:this.contentSize.width+n.strokeWidth,height:this.contentSize.height+n.strokeWidth},this.config=n}},{key:"render",value:function(){var t={is:"v-rect",key:"rect",config:{x:-this.contentSize.width/2,y:-this.contentSize.height/2,width:this.contentSize.width,height:this.contentSize.height,fill:"filled"===this.config.style?this.config.fillColor:void 0,stroke:this.config.strokeWidth>0?this.config.strokeColor:void 0,strokeWidth:this.config.strokeWidth}},e=[t];if(this.config.label){var n={is:"v-text",key:"text",config:{x:this.textPosition.x-this.textSize.width/2,y:this.textPosition.y-this.textSize.height/2,text:this.config.label,fontSize:this.config.fontSize,fontFamily:this.config.fontFamily,lineHeight:this.config.lineHeight,align:this.config.align}};e.push(n)}return e.push(this.parent.componentLayout.render()),e}},{key:"getBoundingBoxSize",value:function(){return this.borderSize}},{key:"distanceToBorder",value:function(t){return Math.min(Math.abs(this.borderSize.width/2/Math.cos(t)),Math.abs(this.borderSize.height/2/Math.sin(t)))}}]),e}(Y);function X(t){return V}V.defaultConfig={label:null,labelPosition:"top",style:"solid",fillColor:"white",strokeColor:"black",strokeWidth:0,fontSize:12,fontFamily:"sans-serif",lineHeight:1.2,padding:6,align:"center",spaceBetween:12};var q=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(h["a"])(this,e),n=Object(d["a"])(this,Object(u["a"])(e).call(this,i)),n.root=t,n.initialPlaced=!1,n.id="",n}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"findPort",value:function(t){return 0===t.length?this:null}}]),e}(A),K=function t(e,n){Object(h["a"])(this,t),this.graph=e,this.layout=n},Q=function(t){function e(){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"solve",value:function(t,n){this.config=Object.assign({},e.defaultConfig,t),this.layoutData=n}},{key:"step",value:function(){return!1}}]),e}(K);function Z(t){switch(t&&t.type){default:return Q}}Q.defaultConfig={theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04};var tt,et=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(h["a"])(this,e),n=Object(d["a"])(this,Object(u["a"])(e).call(this,t,o)),n.graph=i,n}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){var n=this;this.id=e.getId(t);var i=new Map;if(this.depth=t.depth||0,this.fullId=t.parentId?"".concat(t.parentId,":").concat(this.id):this.id,t.children){var o=!0,r=!1,a=void 0;try{for(var s,l=t.children[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var h=s.value,c=ft(h),d=c.getId(h);if(i.has(d))throw new Error("Duplicated id");var u=this.children&&this.children.has(d)&&this.children.get(d).constructor===c?this.children.get(d):new c(this.root,this,null);h.depth=this.depth+1,h.parentId=this.fullId,u.setData(h),i.set(d,u)}}catch(_t){r=!0,a=_t}finally{try{o||null==l.return||l.return()}finally{if(r)throw a}}}this.children=i,this.edges=new Map,this.ports=new Map,this.subgraphs=new Map;var f=!0,p=!1,g=void 0;try{for(var y,b=this.children.entries()[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var v=Object(W["a"])(y.value,2),m=v[0],w=v[1];w instanceof D?this.edges.set(m,w):(this.ports.set(m,w),w instanceof e&&this.subgraphs.set(m,w))}}catch(_t){p=!0,g=_t}finally{try{f||null==b.return||b.return()}finally{if(p)throw g}}var x=new Map,S=[],k=!0,O=!1,C=void 0;try{for(var z,j=this.edges.values()[Symbol.iterator]();!(k=(z=j.next()).done);k=!0){var _=z.value,N=this.findPort(_.from.split(":")),T=this.findPort(_.to.split(":")),M=this.findBelongingPort(_.from),P=this.findBelongingPort(_.to);if(!(N&&T&&M&&P))throw new Error("Cannot find starting or ending port of edge");x.has(M)||x.set(M,[]),x.has(P)||x.set(P,[]),x.get(M).push(P),x.get(P).push(M),S.push({from:N,to:T,fromBelonging:M,toBelonging:P,edge:_})}}catch(_t){O=!0,C=_t}finally{try{k||null==j.return||j.return()}finally{if(O)throw C}}var E=new Set(this.ports.values());this.layoutsData=[];var L=function t(e){E.delete(e);var i=n.layoutsData[n.layoutsData.length-1];i.ports.push(e);var o=x.get(e);if(o){var r=!0,a=!1,s=void 0;try{for(var l,h=o[Symbol.iterator]();!(r=(l=h.next()).done);r=!0){var c=l.value;E.has(c)&&t(c)}}catch(_t){a=!0,s=_t}finally{try{r||null==h.return||h.return()}finally{if(a)throw s}}}};while(E.size){var B=E.values().next().value,I={ports:[],edges:[],children:[]};this.layoutsData.push(I),L(B)}var A=new Map,R=!0,H=!1,G=void 0;try{for(var J,U=this.layoutsData[Symbol.iterator]();!(R=(J=U.next()).done);R=!0){var Y=J.value,V=!0,q=!1,K=void 0;try{for(var Q,tt=Y.ports[Symbol.iterator]();!(V=(Q=tt.next()).done);V=!0){var et=Q.value;A.set(et,Y)}}catch(_t){q=!0,K=_t}finally{try{V||null==tt.return||tt.return()}finally{if(q)throw K}}}}catch(_t){H=!0,G=_t}finally{try{R||null==U.return||U.return()}finally{if(H)throw G}}for(var nt=0,it=S;nt<it.length;nt++){var ot=it[nt],rt=ot.fromBelonging;A.get(rt).edges.push(ot)}var at=!0,st=!1,lt=void 0;try{for(var ht,ct=this.layoutsData[Symbol.iterator]();!(at=(ht=ct.next()).done);at=!0){var dt=ht.value;dt.children=dt.ports.concat(dt.edges.map((function(t){return t.edge})))}}catch(_t){st=!0,lt=_t}finally{try{at||null==ct.return||ct.return()}finally{if(st)throw lt}}var ut=$(t.component);this.componentLayout&&this.componentLayout.constructor===ut||(this.componentLayout=new ut(this,this));for(var pt=F(t.layout),gt=Z(t.physics),yt=[],bt=[],vt=0;vt<this.layoutsData.length;++vt){var mt=this.layouts&&vt<this.layouts.length&&this.layouts[vt].constructor===pt?this.layouts[vt]:new pt(this,this.componentLayout),wt=this.physics&&vt<this.physics.length&&this.physics[vt].constructor===gt?this.physics[vt]:new gt(this,mt),xt=!0,St=!1,kt=void 0;try{for(var Ot,Ct=this.layoutsData[vt].children[Symbol.iterator]();!(xt=(Ot=Ct.next()).done);xt=!0){var zt=Ot.value;zt.parent=mt}}catch(_t){St=!0,kt=_t}finally{try{xt||null==Ct.return||Ct.return()}finally{if(St)throw kt}}mt.solve(t.layout,this.layoutsData[vt],vt),wt.solve(t.physics,this.layoutsData[vt]),yt.push(mt),bt.push(wt)}this.layouts=yt,this.physics=bt,this.componentLayout.solve(t.component);var jt=X(t);this.graphType&&this.graphType.constructor===jt||(this.graphType=new jt(this)),this.graphType.setData(t)}},{key:"step",value:function(){var t=!1;if(this.subgraphs){var e=!0,n=!1,i=void 0;try{for(var o,r=this.subgraphs.values()[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;a.step()&&(t=!0)}}catch(f){n=!0,i=f}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}}if(this.physics){var s=!0,l=!1,h=void 0;try{for(var c,d=this.physics[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value;u.step()&&(t=!0)}}catch(f){l=!0,h=f}finally{try{s||null==d.return||d.return()}finally{if(l)throw h}}}return t}},{key:"render",value:function(){return{is:"Group",key:this.id,draggable:!0,fullId:this.fullId,config:{x:this.position.x,y:this.position.y},children:this.graphType.render()}}},{key:"findBelongingPort",value:function(t){if(t=t.split(":")[0],this.ports.has(t))return this.ports.get(t);var e=!0,n=!1,i=void 0;try{for(var o,r=this.subgraphs.values()[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;if(a.findBelongingPort(t))return a}}catch(s){n=!0,i=s}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}return null}},{key:"findPort",value:function(t){if(0===t.length)return this;if(this.ports.has(t[0])){var e=this.ports.get(t[0]);return e.findPort(t.slice(1))}var n=!0,i=!1,o=void 0;try{for(var r,a=this.subgraphs.values()[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value,l=s.findPort(t);if(l)return l}}catch(h){i=!0,o=h}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return null}},{key:"getBoundingBoxSize",value:function(){return this.graphType.getBoundingBoxSize()}},{key:"distanceToBorder",value:function(t){return this.graphType.distanceToBorder(t)}}],[{key:"getId",value:function(t){if(!t.id)throw new Error("Missing id field for graph");return t.id}}]),e}(q),nt=function(){function t(e){Object(h["a"])(this,t),this.parent=e}return Object(c["a"])(t,[{key:"findPort",value:function(t){return null}}]),t}(),it=function(t){function e(t){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).call(this,t))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){var n=Object.assign({},e.defaultConfig,t),i=!this.config||this.config.label!==n.label||this.config.fontSize!==n.fontSize||this.config.fontFamily!==n.fontFamily||this.config.lineHeight!==n.lineHeight,o=i||this.config.padding!==n.padding,r=o||this.config.strokeWidth!==n.strokeWidth;if(i){var a=this.parent.root.ctx;a.font="".concat(n.fontSize,"px ").concat(n.fontFamily);var s=n.label?n.label.split("\n"):[];this.textSize={width:Math.max.apply(Math,Object(G["a"])(s.map((function(t){return a.measureText(t).width}))).concat([0])),height:s.length*n.fontSize*n.lineHeight}}o&&(this.contentSize={width:this.textSize.width+2*n.padding,height:this.textSize.height+2*n.padding}),r&&(this.borderSize={width:this.contentSize.width+n.strokeWidth,height:this.contentSize.height+n.strokeWidth}),this.config=n}},{key:"render",value:function(){var t={is:"v-rect",key:"rect",config:{x:-this.contentSize.width/2,y:-this.contentSize.height/2,width:this.contentSize.width,height:this.contentSize.height,fill:"filled"===this.config.style?this.config.fillColor:void 0,stroke:this.config.strokeWidth>0?this.config.strokeColor:void 0,strokeWidth:this.config.strokeWidth}},e=[t];if(this.config.label){var n={is:"v-text",key:"text",config:{x:-this.contentSize.width/2,y:-this.contentSize.height/2,text:this.config.label,fontSize:this.config.fontSize,fontFamily:this.config.fontFamily,lineHeight:this.config.lineHeight,padding:this.config.padding,align:this.config.align}};e.push(n)}return e}},{key:"getBoundingBoxSize",value:function(){return this.borderSize}},{key:"distanceToBorder",value:function(t){return Math.min(Math.abs(this.borderSize.width/2/Math.cos(t)),Math.abs(this.borderSize.height/2/Math.sin(t)))}}]),e}(nt);function ot(t){var e=0,n=[];function i(){if(n.length)return n.pop();while(e<t.length&&" \t\n\r\v".indexOf(t[e])>-1)++e;if(e>=t.length)return{type:tt.EOF};switch(t[e]){case"|":return++e,{type:tt.VERTICAL_BAR};case"{":return++e,{type:tt.LEFT_CURLY_BRACE};case"}":return++e,{type:tt.RIGHT_CURLY_BRACE};case"<":return++e,{type:tt.LEFT_ANGLE_BRACE};case">":return++e,{type:tt.RIGHT_ANGLE_BRACE};default:var i="";while(e<t.length&&-1===" \t\n\r\v|{}<>".indexOf(t[e])){if("\\"===t[e]){if(++e,e===t.length)throw new Error("Unexpected end of escape sequence");switch(t[e]){case"n":i+="\n";break;default:i+=t[e]}}else i+=t[e];++e}return{type:tt.STRING,text:i}}}function o(){var t,e=[r()];while((t=i()).type===tt.VERTICAL_BAR)e.push(r());return n.push(t),{type:"record",children:e}}function r(){var t=i();if(t.type===tt.LEFT_CURLY_BRACE){var e=o();if(i().type!==tt.RIGHT_CURLY_BRACE)throw new Error("Expect '}'");return e}var r={type:"field"};if(t.type===tt.LEFT_ANGLE_BRACE){if(t=i(),t.type===tt.STRING){var a=t.text;while((t=i()).type===tt.STRING)a+=" "+t.text;r.port=a}if(t.type!==tt.RIGHT_ANGLE_BRACE)throw new Error("Expect '>'");t=i()}if(t.type===tt.STRING){var s=t.text;while((t=i()).type===tt.STRING)s+=" "+t.text;r.text=s}return n.push(t),r}var a=o();if(i().type!==tt.EOF)throw new Error("Unexpected token");return a}it.defaultConfig={label:null,style:"solid",fillColor:"white",strokeColor:"black",strokeWidth:1,fontSize:12,fontFamily:"sans-serif",lineHeight:1.2,padding:4,align:"center"},function(t){t[t["EOF"]=0]="EOF",t[t["VERTICAL_BAR"]=1]="VERTICAL_BAR",t[t["LEFT_CURLY_BRACE"]=2]="LEFT_CURLY_BRACE",t[t["RIGHT_CURLY_BRACE"]=3]="RIGHT_CURLY_BRACE",t[t["LEFT_ANGLE_BRACE"]=4]="LEFT_ANGLE_BRACE",t[t["RIGHT_ANGLE_BRACE"]=5]="RIGHT_ANGLE_BRACE",t[t["STRING"]=6]="STRING"}(tt||(tt={}));var rt=function(t){function e(t,n,i){var o;return Object(h["a"])(this,e),o=Object(d["a"])(this,Object(u["a"])(e).call(this,t,n)),o.nodeType=i,o}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isField="field"===t.type,this.isHorizontal=n,this.isField){var i=t;i.port&&this.nodeType.getPorts().set(i.port,this);var o=this.root.ctx,r=this.nodeType.getConfig();this.label=i.text,o.font="".concat(r.fontSize,"px ").concat(r.fontFamily);var a=this.label?this.label.split("\n"):[];this.textSize={width:Math.max.apply(Math,Object(G["a"])(a.map((function(t){return o.measureText(t).width}))).concat([0])),height:a.length*r.fontSize*r.lineHeight},this.contentSize={width:this.textSize.width+2*r.padding,height:this.textSize.height+2*r.padding},this.cellSize={width:this.contentSize.width,height:this.contentSize.height}}else{var s=t;this.children=[];var l=!0,h=!1,c=void 0;try{for(var d,u=s.children[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){var f=d.value,p=new e(this.root,this,this.nodeType);p.setData(f,!n),this.children.push(p)}}catch(g){h=!0,c=g}finally{try{l||null==u.return||u.return()}finally{if(h)throw c}}this.cellSize=n?{width:this.children.map((function(t){return t.cellSize.width})).reduce((function(t,e){return t+e}),0),height:Math.max.apply(Math,Object(G["a"])(this.children.map((function(t){return t.cellSize.height}))))}:{width:Math.max.apply(Math,Object(G["a"])(this.children.map((function(t){return t.cellSize.width})))),height:this.children.map((function(t){return t.cellSize.height})).reduce((function(t,e){return t+e}),0)}}}},{key:"setCellSize",value:function(t,e){if(!this.isField)if(this.isHorizontal){var n=(t-this.cellSize.width)/this.children.length,i=-t/2,o=!0,r=!1,a=void 0;try{for(var s,l=this.children[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var h=s.value;h.setCellSize(h.cellSize.width+n,e),h.position={x:i+h.cellSize.width/2,y:0},i+=h.cellSize.width}}catch(v){r=!0,a=v}finally{try{o||null==l.return||l.return()}finally{if(r)throw a}}}else{var c=(e-this.cellSize.height)/this.children.length,d=-e/2,u=!0,f=!1,p=void 0;try{for(var g,y=this.children[Symbol.iterator]();!(u=(g=y.next()).done);u=!0){var b=g.value;b.setCellSize(t,b.cellSize.height+c),b.position={x:0,y:d+b.cellSize.height/2},d+=b.cellSize.height}}catch(v){f=!0,p=v}finally{try{u||null==y.return||y.return()}finally{if(f)throw p}}}this.cellSize={width:t,height:e}}},{key:"getCellSize",value:function(){return this.cellSize}},{key:"render",value:function(){var t;if(this.isField){var e=this.nodeType.getConfig();t=[{is:"v-rect",key:"rect",config:{x:-this.cellSize.width/2,y:-this.cellSize.height/2,width:this.cellSize.width,height:this.cellSize.height,fill:"filled"===e.style?e.fillColor:void 0,stroke:e.strokeWidth>0?e.strokeColor:void 0,strokeWidth:e.strokeWidth}}],this.label&&t.push({is:"v-text",key:"text",config:{x:-this.contentSize.width/2,y:-this.contentSize.height/2,text:this.label,fontSize:e.fontSize,fontFamily:e.fontFamily,lineHeight:e.lineHeight,padding:e.padding,align:e.align}})}else t=this.children.map((function(t,e){var n=t.getPosition();return{is:"Group",key:"record-".concat(e),config:{x:n.x,y:n.y},children:t.render()}}));return t}},{key:"getBoundingBoxSize",value:function(){var t=this.nodeType.getConfig();return{width:this.cellSize.width+t.strokeWidth,height:this.cellSize.height+t.strokeWidth}}},{key:"distanceToBorder",value:function(t){var e=this.getBoundingBoxSize();return Math.min(Math.abs(e.width/2/Math.cos(t)),Math.abs(e.height/2/Math.sin(t)))}}]),e}(q),at=function(t){function e(t){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).call(this,t))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"getConfig",value:function(){return this.config}},{key:"getPorts",value:function(){return this.ports}},{key:"setData",value:function(t){var n=Object.assign({},e.defaultConfig,t),i=!this.config||this.config.label!==n.label||this.config.direction!==n.direction||this.config.fontSize!==n.fontSize||this.config.fontFamily!==n.fontFamily||this.config.lineHeight!==n.lineHeight||this.config.padding!==n.padding,o=i||this.config.strokeWidth!==n.strokeWidth;if(this.config=n,i){var r=ot(t.label);this.root=new rt(this.parent.root,this.parent,this),this.ports=new Map,this.root.setData(r,"horizontal"===this.config.direction);var a=this.root.getCellSize();this.root.setCellSize(a.width,a.height)}if(o){var s=this.root.getCellSize();this.borderSize={width:s.width+this.config.strokeWidth,height:s.height+this.config.strokeWidth}}}},{key:"render",value:function(){return this.root.render()}},{key:"findPort",value:function(t){if(1===t.length){var e=this.ports.get(t[0]);return e||null}return null}},{key:"getBoundingBoxSize",value:function(){return this.borderSize}},{key:"distanceToBorder",value:function(t){return Math.min(Math.abs(this.borderSize.width/2/Math.cos(t)),Math.abs(this.borderSize.height/2/Math.sin(t)))}}]),e}(nt);at.defaultConfig={label:"",direction:"horizontal",style:"solid",fillColor:"white",strokeColor:"black",strokeWidth:1,fontSize:12,fontFamily:"sans-serif",lineHeight:1.2,padding:4,align:"center"};n("456d"),n("7f7f");var st=n("c51a"),lt=n.n(st),ht=function(t){function e(t,n,i){var o;return Object(h["a"])(this,e),o=Object(d["a"])(this,Object(u["a"])(e).call(this,t,n)),o.nodeType=i,o}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){if(this.config={rowSpan:1,columnSpan:1,border:this.nodeType.getTableConfig().cellBorder,backgroundColor:"white"},t.attributes)for(var e=0,n=Object.keys(t.attributes);e<n.length;e++){var i=n[e],o=t.attributes[i];switch(i.toLowerCase()){case"rowspan":this.config.rowSpan=parseInt(o,10);break;case"colspan":this.config.columnSpan=parseInt(o,10);break;case"border":this.config.border=parseInt(o,10);break;case"bgcolor":this.config.backgroundColor=o;break;case"port":this.port=o;break;default:throw new Error("Unknown attribute for table cell")}}function r(t){switch(t.type){case"text":return"string"===typeof t.text?t.text:"";case"element":return t.name&&"br"===t.name.toLowerCase()?"\n":t.elements?t.elements.map(r).join(""):"";default:throw new Error("Unknown element type")}}this.label=r(t);var a=this.nodeType.getConfig(),s=this.nodeType.getTableConfig(),l=this.root.ctx;l.font="".concat(a.fontSize,"px ").concat(a.fontFamily);var h=this.label?this.label.split("\n"):[];this.textSize={width:Math.max.apply(Math,Object(G["a"])(h.map((function(t){return l.measureText(t).width}))).concat([0])),height:h.length*a.fontSize*a.lineHeight},this.contentSize={width:this.textSize.width+2*s.cellPadding,height:this.textSize.height+2*s.cellPadding},this.cellSize={width:this.contentSize.width,height:this.contentSize.height},this.rowOffset=0,this.columnOffset=0}},{key:"render",value:function(){var t={is:"v-rect",key:"rect",config:{x:-this.cellSize.width/2,y:-this.cellSize.height/2,width:this.cellSize.width,height:this.cellSize.height,fill:this.config.backgroundColor,stroke:this.config.border>0?"black":void 0,strokeWidth:this.config.border}},e=[t];if(this.label){var n=this.nodeType.getConfig(),i={is:"v-text",key:"text",config:{x:-this.contentSize.width/2,y:-this.contentSize.height/2,text:this.label,fontSize:n.fontSize,fontFamily:n.fontFamily,lineHeight:n.lineHeight,padding:this.nodeType.getTableConfig().cellPadding,align:"center"}};e.push(i)}return{is:"Group",key:"cell-".concat(this.rowOffset,"-").concat(this.columnOffset),config:{x:this.position.x,y:this.position.y},children:e}}},{key:"getConfig",value:function(){return this.config}},{key:"getPort",value:function(){return this.port}},{key:"getBoundingBoxSize",value:function(){return{width:this.cellSize.width+this.config.border,height:this.cellSize.height+this.config.border}}},{key:"distanceToBorder",value:function(t){var e=this.getBoundingBoxSize();return Math.min(Math.abs(e.width/2/Math.cos(t)),Math.abs(e.height/2/Math.sin(t)))}}]),e}(q),ct=function(t){function e(t){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).call(this,t))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){var n=Object.assign({},e.defaultConfig,t),i=!this.config||this.config.label!==n.label||this.config.fontSize!==n.fontSize||this.config.fontFamily!==n.fontFamily||this.config.lineHeight!==n.lineHeight;if(this.config=n,i){var o=lt.a.xml2js(this.config.label);if(!o.elements||!o.elements[0]||!o.elements[0].name||"table"!==o.elements[0].name.toLowerCase())throw new Error("Expect table element");var r=o.elements[0];if(this.tableConfig={border:0,cellBorder:1,cellSpacing:0,cellPadding:4},r.attributes)for(var a=0,s=Object.keys(r.attributes);a<s.length;a++){var l=s[a],h=r.attributes[l];switch(l.toLowerCase()){case"border":this.tableConfig.border=parseInt(h,10);break;case"cellborder":this.tableConfig.cellBorder=parseInt(h,10);break;case"cellspacing":this.tableConfig.cellSpacing=parseInt(h,10);break;case"cellpadding":this.tableConfig.cellPadding=parseInt(h,10);break;default:throw new Error("Unknown attribute for table")}}this.table=[],this.ports=new Map;var c=0,d=0,u=!0;if(r.elements){var f=!0,p=!1,g=void 0;try{for(var y,b=r.elements[Symbol.iterator]();!(f=(y=b.next()).done);f=!0){var v=y.value;if(!v.name||"tr"!==v.name.toLowerCase())throw new Error("Expect tr element");var m=[];if(v.elements){var w=!0,x=!1,S=void 0;try{for(var k,O=v.elements[Symbol.iterator]();!(w=(k=O.next()).done);w=!0){var C=k.value;if(!C.name||"td"!==C.name.toLowerCase())throw new Error("Expect td element");var z=new ht(this.parent.root,this.parent,this);z.setData(C);var j=z.getPort();j&&this.ports.set(j,z),u&&(d+=z.getConfig().columnSpan),m.push(z)}}catch(Ot){x=!0,S=Ot}finally{try{w||null==O.return||O.return()}finally{if(x)throw S}}}++c,u&&(u=!1),this.table.push(m)}}catch(Ot){p=!0,g=Ot}finally{try{f||null==b.return||b.return()}finally{if(p)throw g}}}for(var _=[],N=0;N<c;++N)_.push(Array(d).fill(null));for(var T=0;T<c;++T){var M=0,P=!0,E=!1,L=void 0;try{for(var B,I=this.table[T][Symbol.iterator]();!(P=(B=I.next()).done);P=!0){var D=B.value;while(M<d&&_[T][M])++M;D.rowOffset=T,D.columnOffset=M;for(var W=D.getConfig(),A=W.rowSpan,R=W.columnSpan,H=(D.contentSize.height-(A-1)*this.tableConfig.cellSpacing)/A,F=(D.contentSize.width-(R-1)*this.tableConfig.cellSpacing)/R,G=0;G<A;++G)for(var J=0;J<R;++J)_[T+G][M+J]={width:F,height:H};M+=R}}catch(Ot){E=!0,L=Ot}finally{try{P||null==I.return||I.return()}finally{if(E)throw L}}}for(var U=[],$=[],Y=0;Y<c;++Y){for(var V=-1/0,X=0;X<d;++X)_[Y][X].height>V&&(V=_[Y][X].height);U.push(V)}for(var q=0;q<d;++q){for(var K=-1/0,Q=0;Q<c;++Q)_[Q][q].width>K&&(K=_[Q][q].width);$.push(K)}for(var Z=[0],tt=[0],et=0;et<c;++et)Z.push(Z[et]+U[et]+this.tableConfig.cellSpacing);for(var nt=0;nt<d;++nt)tt.push(tt[nt]+$[nt]+this.tableConfig.cellSpacing);this.contentSize={width:tt[tt.length-1]-this.tableConfig.cellSpacing,height:Z[Z.length-1]-this.tableConfig.cellSpacing};var it=!0,ot=!1,rt=void 0;try{for(var at,st=this.table[Symbol.iterator]();!(it=(at=st.next()).done);it=!0){var ct=at.value,dt=!0,ut=!1,ft=void 0;try{for(var pt,gt=ct[Symbol.iterator]();!(dt=(pt=gt.next()).done);dt=!0){var yt=pt.value,bt=yt.getConfig(),vt=(A=bt.rowSpan,R=bt.columnSpan,yt.rowOffset),mt=yt.columnOffset,wt=tt[mt],xt=Z[vt],St=tt[mt+R]-wt-this.tableConfig.cellSpacing,kt=Z[vt+A]-xt-this.tableConfig.cellSpacing;yt.setPosition({x:wt+St/2-this.contentSize.width/2,y:xt+kt/2-this.contentSize.height/2}),yt.cellSize={width:St,height:kt}}}catch(Ot){ut=!0,ft=Ot}finally{try{dt||null==gt.return||gt.return()}finally{if(ut)throw ft}}}}catch(Ot){ot=!0,rt=Ot}finally{try{it||null==st.return||st.return()}finally{if(ot)throw rt}}this.borderSize={width:this.contentSize.width+this.tableConfig.border+2*this.tableConfig.cellSpacing,height:this.contentSize.height+this.tableConfig.border+2*this.tableConfig.cellSpacing}}}},{key:"render",value:function(){var t=[];t.push({is:"v-rect",key:"rect",config:{x:-this.contentSize.width/2-this.tableConfig.cellSpacing,y:-this.contentSize.height/2-this.tableConfig.cellSpacing,width:this.contentSize.width+2*this.tableConfig.cellSpacing,height:this.contentSize.height+2*this.tableConfig.cellSpacing,fill:"white",stroke:this.tableConfig.border>0?"black":void 0,strokeWidth:this.tableConfig.border}});var e=!0,n=!1,i=void 0;try{for(var o,r=this.table[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value,s=!0,l=!1,h=void 0;try{for(var c,d=a[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value;t.push(u.render())}}catch(f){l=!0,h=f}finally{try{s||null==d.return||d.return()}finally{if(l)throw h}}}}catch(f){n=!0,i=f}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}return t}},{key:"getConfig",value:function(){return this.config}},{key:"getTableConfig",value:function(){return this.tableConfig}},{key:"findPort",value:function(t){if(1===t.length){var e=this.ports.get(t[0]);return e||null}return null}},{key:"getBoundingBoxSize",value:function(){return this.borderSize}},{key:"distanceToBorder",value:function(t){return Math.min(Math.abs(this.borderSize.width/2/Math.cos(t)),Math.abs(this.borderSize.height/2/Math.sin(t)))}}]),e}(nt);function dt(t){switch(t.shape){case"table":return ct;case"record":return at;default:return it}}ct.defaultConfig={label:"",fontSize:12,fontFamily:"sans-serif",lineHeight:1.2};var ut=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(h["a"])(this,e),n=Object(d["a"])(this,Object(u["a"])(e).call(this,t,o)),n.graph=i,n}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){this.id=e.getId(t),this.fullId=t.parentId?"".concat(t.parentId,":").concat(this.id):this.id;var n=dt(t);this.nodeType&&this.nodeType.constructor===n||(this.nodeType=new n(this)),this.nodeType.setData(t)}},{key:"render",value:function(){return{is:"Group",key:this.id,draggable:!0,fullId:this.fullId,config:{x:this.position.x,y:this.position.y},children:this.nodeType.render()}}},{key:"findPort",value:function(t){return 0===t.length?this:this.nodeType.findPort(t)}},{key:"getBoundingBoxSize",value:function(){return this.nodeType.getBoundingBoxSize()}},{key:"distanceToBorder",value:function(t){return this.nodeType.distanceToBorder(t)}}],[{key:"getId",value:function(t){if(!t.id)throw new Error("Missing id field for node");return t.id}}]),e}(q);function ft(t){switch(t.type){case"node":return ut;case"edge":return D;case"graph":return et;default:throw new Error("Unknown renderable object")}}var pt='digraph stdThreadJoin {\nlabel=" VFG of stdThreadJoin"\ngraph [rankdir="LR"]\nsubgraph cluster_input {\nlabel="Inputs"\nstyle=filled\ncolor=black\nfillcolor=darkolivegreen1\nN912 [label="N912\\n[arg:stdThreadJoin_0]", style=filled, fillcolor="cyan3", shape=box]\nN913 [label="N913\\n[arg:stdThreadJoin_0]*", style=filled, fillcolor="cyan3", shape=box]\n} # end of input\nsubgraph cluster_output {\nlabel="Outputs"\nstyle=filled\ncolor=black\nfillcolor=goldenrod1\nN940 [label="N940\\n_", style=filled, fillcolor="cornflowerblue", shape=box]\n} # end of output\n# body nodes\nN919 [label="N919\\n&dummy", style=filled, fillcolor="cyan3", shape=box]\nN925 [label="N925\\n0", style=filled, fillcolor="lightgrey", shape=box]\nN926 [label=<<table  border=\'0\' cellspacing=\'0\'><tr><td port=\'top\' bgcolor=\'palegreen\' border=\'1\'>N926(%6)<br/>getelementptr</td></tr><tr><td port=\'op_1\' border=\'1\'>N912</td></tr><tr><td port=\'op_2\' border=\'1\'>N925</td></tr><tr><td port=\'op_3\' border=\'1\'>N925</td></tr></table>>, shape=none]\nN927 [label="N927\\nDEREF", style=filled, fillcolor="gainsboro", shape=box]\nN928 [label="N928\\nstdThreadJoin::6*", style=filled, fillcolor="cyan3", shape=box]\nN930 [label="N930\\n[arg:_pthread_join_0]", style=filled, fillcolor="cornflowerblue", shape=box]\nN931 [label="N931\\n[arg:_pthread_join_1]", style=filled, fillcolor="cornflowerblue", shape=box]\nN932 [label="N932\\nstdThreadJoin::8", style=filled, fillcolor="cyan3", shape=box]\nN933 [label=<<table  border=\'0\' cellspacing=\'0\'><tr><td port=\'top\' bgcolor=\'palegreen\' border=\'1\'>N933(%9)<br/>icmp ne</td></tr><tr><td port=\'op_1\' border=\'1\'>N925</td></tr><tr><td port=\'op_2\' border=\'1\'>N932</td></tr></table>>, shape=none]\nN934 [label="N934\\n1", style=filled, fillcolor="lightgrey", shape=box]\nN937 [label="N937\\n&gamma;", style=filled, fillcolor="darksalmon", shape=box]\n# proxy\nP595 [label="",style=filled,color=crimson,fillcolor=crimson,shape=circle,height=0.05,width=0.05]\nP596 [label="",style=filled,color=crimson,fillcolor=crimson,shape=circle,height=0.05,width=0.05]\n# end of body\nN937 -> N940\nN912 -> N926:op_1\nN925 -> N926:op_2\nN925 -> N926:op_3\nN926:top -> N927\nN928 -> N930\nN919 -> N931\nN925 -> N933:op_1\nN932 -> N933:op_2\nN925 -> P595 [arrowhead=none]\nP595 -> N937\nN933:top -> P595 [label="N933",style=dotted,color=crimson]\nN934 -> P596 [arrowhead=none]\nP596 -> N937\nN933:top -> P596 [label="!(N933)",style=dotted,color=crimson]\nCS_31 [shape=record,style=bold,label="_pthread_join | { {<cs_id_in_0> N930 | <cs_id_in_1> N931} | {<cs_id_out_0> N932} }"]\nN930 -> CS_31:cs_id_in_0\nN931 -> CS_31:cs_id_in_1\nCS_31:cs_id_out_0 -> N932\n}\n',gt='{\n  "type": "graph",\n  "id": "stdThreadJoin",\n  "label": "VFG of stdThreadJoin",\n  "layout": {\n    "type": "KamadaKawai",\n    "springLength": 150,\n    "direction": "LR"\n  },\n  "children": [\n    {\n      "type": "graph",\n      "id": "cluster_input",\n      "label": "Inputs",\n      "style": "filled",\n      "fillColor": "darkolivegreen",\n      "strokeWidth": 1,\n      "strokeColor": "black",\n      "children": [\n        {\n          "type": "node",\n          "id": "N912",\n          "label": "N912\\n[arg:stdThreadJoin_0]",\n          "style": "filled",\n          "fillColor": "cyan",\n          "shape": "box"\n        },\n        {\n          "type": "node",\n          "id": "N913",\n          "label": "N913\\n[arg:stdThreadJoin_0]*",\n          "style": "filled",\n          "fillColor": "cyan",\n          "shape": "box"\n        }\n      ]\n    },\n    {\n      "type": "graph",\n      "id": "cluster_output",\n      "label": "Outputs",\n      "style": "filled",\n      "fillColor": "goldenrod",\n      "strokeWidth": 1,\n      "strokeColor": "black",\n      "children": [\n        {\n          "type": "node",\n          "id": "N940",\n          "label": "N940\\n_",\n          "style": "filled",\n          "fillColor": "cornflowerblue",\n          "shape": "box"\n        }\n      ]\n    },\n    {\n      "type": "node",\n      "id": "N919",\n      "label": "N919\\n&dummy",\n      "style": "filled",\n      "fillColor": "cyan",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N925",\n      "label": "N925\\n0",\n      "style": "filled",\n      "fillColor": "lightgrey",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N926",\n      "label": "<table  border=\'0\' cellspacing=\'0\'><tr><td port=\'top\' bgcolor=\'palegreen\' border=\'1\'>N926(%6)<br/>getelementptr</td></tr><tr><td port=\'op_1\' border=\'1\'>N912</td></tr><tr><td port=\'op_2\' border=\'1\'>N925</td></tr><tr><td port=\'op_3\' border=\'1\'>N925</td></tr></table>",\n      "shape": "table"\n    },\n    {\n      "type": "node",\n      "id": "N927",\n      "label": "N927\\nDEREF",\n      "style": "filled",\n      "fillColor": "gainsboro",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N928",\n      "label": "N928\\nstdThreadJoin::6*",\n      "style": "filled",\n      "fillColor": "cyan",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N930",\n      "label": "N930\\n[arg:_pthread_join_0]",\n      "style": "filled",\n      "fillColor": "cornflowerblue",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N931",\n      "label": "N931\\n[arg:_pthread_join_1]",\n      "style": "filled",\n      "fillColor": "cornflowerblue",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N932",\n      "label": "N932\\nstdThreadJoin::8",\n      "style": "filled",\n      "fillColor": "cyan",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N933",\n      "label": "<table  border=\'0\' cellspacing=\'0\'><tr><td port=\'top\' bgcolor=\'palegreen\' border=\'1\'>N933(%9)<br/>icmp ne</td></tr><tr><td port=\'op_1\' border=\'1\'>N925</td></tr><tr><td port=\'op_2\' border=\'1\'>N932</td></tr></table>",\n      "shape": "table"\n    },\n    {\n      "type": "node",\n      "id": "N934",\n      "label": "N934\\n1",\n      "style": "filled",\n      "fillColor": "lightgrey",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N937",\n      "label": "N937\\n&gamma;",\n      "style": "filled",\n      "fillColor": "darksalmon",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "P595",\n      "label": "",\n      "style": "filled",\n      "color": "crimson",\n      "fillColor": "crimson",\n      "shape": "circle",\n      "radius": 0.025\n    },\n    {\n      "type": "node",\n      "id": "P596",\n      "label": "",\n      "style": "filled",\n      "color": "crimson",\n      "fillColor": "crimson",\n      "shape": "circle",\n      "radius": 0.025\n    },\n    {\n      "type": "edge",\n      "from": "N937",\n      "to": "N940"\n    },\n    {\n      "type": "edge",\n      "from": "N912",\n      "to": "N926:op_1"\n    },\n    {\n      "type": "edge",\n      "from": "N925",\n      "to": "N926:op_2"\n    },\n    {\n      "type": "edge",\n      "from": "N925",\n      "to": "N926:op_3"\n    },\n    {\n      "type": "edge",\n      "from": "N926:top",\n      "to": "N927"\n    },\n    {\n      "type": "edge",\n      "from": "N928",\n      "to": "N930"\n    },\n    {\n      "type": "edge",\n      "from": "N919",\n      "to": "N931"\n    },\n    {\n      "type": "edge",\n      "from": "N925",\n      "to": "N933:op_1"\n    },\n    {\n      "type": "edge",\n      "from": "N932",\n      "to": "N933:op_2"\n    },\n    {\n      "type": "edge",\n      "from": "N925",\n      "to": "P595",\n      "arrowHead": "none"\n    },\n    {\n      "type": "edge",\n      "from": "P595",\n      "to": "N937"\n    },\n    {\n      "type": "edge",\n      "from": "N933:top",\n      "to": "P595",\n      "label": "N933",\n      "style": "dotted",\n      "color": "crimson"\n    },\n    {\n      "type": "edge",\n      "from": "N934",\n      "to": "P596",\n      "arrowHead": "none"\n    },\n    {\n      "type": "edge",\n      "from": "P596",\n      "to": "N937"\n    },\n    {\n      "type": "edge",\n      "from": "N933:top",\n      "to": "P596",\n      "label": "!(N933)",\n      "style": "dotted",\n      "color": "crimson"\n    },\n    {\n      "type": "node",\n      "id": "CS_31",\n      "shape": "record",\n      "style": "bold",\n      "direction": "vertical",\n      "label": "_pthread_join | { {<cs_id_in_0> N930 | <cs_id_in_1> N931} | {<cs_id_out_0> N932} }"\n    },\n    {\n      "type": "edge",\n      "from": "N930",\n      "to": "CS_31:cs_id_in_0"\n    },\n    {\n      "type": "edge",\n      "from": "N931",\n      "to": "CS_31:cs_id_in_1"\n    },\n    {\n      "type": "edge",\n      "from": "CS_31:cs_id_out_0",\n      "to": "N932"\n    }\n  ]\n}\n',yt='{\n  "type": "node",\n  "id": "N926",\n  "label": "hello\\\\nworld |{ b |{c|<here> d|e}| f}| g | h",\n  "shape": "record"\n}\n',bt='{\n  "type": "graph",\n  "id": "stdThreadJoin",\n  "label": "VFG of stdThreadJoin",\n  "layout": {\n    "type": "KamadaKawai",\n    "springLength": 150\n  },\n  "component": {\n    "direction": "LR"\n  },\n  "children": [\n    {\n      "type": "graph",\n      "id": "cluster_input",\n      "component": {\n        "direction": "TD"\n      },\n      "label": "Inputs",\n      "style": "filled",\n      "fillColor": "darkolivegreen",\n      "strokeWidth": 1,\n      "strokeColor": "black",\n      "children": [\n        {\n          "type": "node",\n          "id": "N921",\n          "label": "N912\\n[arg:stdThreadJoin_0]",\n          "style": "filled",\n          "fillColor": "cyan",\n          "shape": "box"\n        },\n        {\n          "type": "node",\n          "id": "N913",\n          "label": "N913\\n[arg:stdThreadJoin_0]*",\n          "style": "filled",\n          "fillColor": "cyan",\n          "shape": "box"\n        }\n      ]\n    },\n    {\n      "type": "graph",\n      "id": "cluster_output",\n      "label": "Outputs",\n      "style": "filled",\n      "fillColor": "goldenrod",\n      "strokeWidth": 1,\n      "strokeColor": "black",\n      "children": [\n        {\n          "type": "node",\n          "id": "N940",\n          "label": "N940\\n_",\n          "style": "filled",\n          "fillColor": "cornflowerblue",\n          "shape": "box"\n        }\n      ]\n    }\n  ]\n}\n',vt='{\n  "type": "graph",\n  "id": "cluster_input",\n  "layout": {\n    "type": "KamadaKawai",\n    "direction": "LR"\n  },\n  "children": [\n    {\n      "type": "node",\n      "id": "0",\n      "label": "0",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "1",\n      "label": "1",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "2",\n      "label": "2",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "3",\n      "label": "3",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "4",\n      "label": "4",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "5",\n      "label": "5",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "6",\n      "label": "6",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "7",\n      "label": "7",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "8",\n      "label": "8",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "9",\n      "label": "9",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "10",\n      "label": "10",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "11",\n      "label": "11",\n      "shape": "box"\n    },\n    {\n      "type": "edge",\n      "from": "0",\n      "to": "1"\n    },\n    {\n      "type": "edge",\n      "from": "1",\n      "to": "2"\n    },\n    {\n      "type": "edge",\n      "from": "2",\n      "to": "0"\n    },\n    {\n      "type": "edge",\n      "from": "0",\n      "to": "3"\n    },\n    {\n      "type": "edge",\n      "from": "3",\n      "to": "2"\n    },\n    {\n      "type": "edge",\n      "from": "3",\n      "to": "4"\n    },\n    {\n      "type": "edge",\n      "from": "4",\n      "to": "0"\n    },\n    {\n      "type": "edge",\n      "from": "4",\n      "to": "5"\n    },\n    {\n      "type": "edge",\n      "from": "5",\n      "to": "0"\n    },\n    {\n      "type": "edge",\n      "from": "5",\n      "to": "1"\n    },\n    {\n      "type": "edge",\n      "from": "1",\n      "to": "8"\n    },\n    {\n      "type": "edge",\n      "from": "8",\n      "to": "5"\n    },\n    {\n      "type": "edge",\n      "from": "5",\n      "to": "7"\n    },\n    {\n      "type": "edge",\n      "from": "7",\n      "to": "4"\n    },\n    {\n      "type": "edge",\n      "from": "4",\n      "to": "6"\n    },\n    {\n      "type": "edge",\n      "from": "6",\n      "to": "3"\n    },\n    {\n      "type": "edge",\n      "from": "3",\n      "to": "10"\n    },\n    {\n      "type": "edge",\n      "from": "10",\n      "to": "2"\n    },\n    {\n      "type": "edge",\n      "from": "2",\n      "to": "9"\n    },\n    {\n      "type": "edge",\n      "from": "9",\n      "to": "1"\n    },\n    {\n      "type": "edge",\n      "from": "8",\n      "to": "9"\n    },\n    {\n      "type": "edge",\n      "from": "9",\n      "to": "10"\n    },\n    {\n      "type": "edge",\n      "from": "10",\n      "to": "6"\n    },\n    {\n      "type": "edge",\n      "from": "6",\n      "to": "7"\n    },\n    {\n      "type": "edge",\n      "from": "7",\n      "to": "8"\n    },\n    {\n      "type": "edge",\n      "from": "11",\n      "to": "8"\n    },\n    {\n      "type": "edge",\n      "from": "11",\n      "to": "9"\n    },\n    {\n      "type": "edge",\n      "from": "11",\n      "to": "10"\n    },\n    {\n      "type": "edge",\n      "from": "11",\n      "to": "6"\n    },\n    {\n      "type": "edge",\n      "from": "11",\n      "to": "7"\n    }\n  ]\n}\n',mt='{\n  "type": "node",\n  "id": "N926",\n  "label": "<TABLE BORDER=\\"1\\" CELLBORDER=\\"1\\" CELLSPACING=\\"2\\" CELLPADDING=\\"4\\"><TR><TD ROWSPAN=\\"3\\"><FONT COLOR=\\"red\\">hello</FONT><BR/>world</TD><TD COLSPAN=\\"3\\">b</TD><TD ROWSPAN=\\"3\\" BGCOLOR=\\"lightgrey\\">g</TD><TD ROWSPAN=\\"3\\">h</TD></TR><TR><TD>c</TD><TD PORT=\\"here\\">d</TD><TD>e</TD></TR><TR><TD COLSPAN=\\"3\\">f</TD></TR></TABLE>",\n  "shape": "table"\n}\n',wt='{\n  "type": "graph",\n  "id": "hello",\n  "children": [\n    {\n      "type": "node",\n      "id": "0",\n      "label": "0",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "1",\n      "label": "1",\n      "shape": "box"\n    },\n    {\n      "type": "edge",\n      "from": "0",\n      "to": "1",\n      "lineWidth": 5,\n      "pointerWidth": 20,\n      "pointerHeight": 30\n    }\n  ]\n}\n',xt=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(d["a"])(this,Object(u["a"])(e).call(this)),t.ctx=document.createElement("canvas").getContext("2d"),t.child=null,t.stepTimer=setInterval((function(){t.child instanceof et&&t.child.step()&&t.refresh()}),1e3/60),t}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"findPort",value:function(t){return this.child instanceof q?this.child.findPort(t):null}},{key:"setData",value:function(t){var e=ft(t);null!==this.child&&this.child.constructor===e||(this.child=new e(this,null,null)),this.child.setData(t),this.refresh()}},{key:"redraw",value:function(t){this.child=new(ft(t))(this,null,null),this.child.setData(t),this.refresh()}},{key:"moveDraggable",value:function(t,e){var n=t.split(":");if(this.child instanceof q){if(this.child.id!==n[0])return null;var i=this.findPort(n.slice(1));null!==i&&(i.getPosition().x+=e.deltaX,i.getPosition().y+=e.deltaY,this.refresh())}}},{key:"refresh",value:function(){this.emit("render",[{key:"main",children:[this.child.render()]}])}}]),e}(E),St=new xt;window.globalRoot=St;var kt={json:function(t){return JSON.parse(t)},graphviz:function(){throw new Error("Not implemented")}},Ot=[{name:"stdThreadJoinGv",parser:"graphviz",content:pt},{name:"stdThreadJoinJson",parser:"json",content:gt},{name:"record",parser:"json",content:yt},{name:"subGraph",parser:"json",content:bt},{name:"icosahedronJson",parser:"json",content:vt},{name:"table",parser:"json",content:mt},{name:"edge",parser:"json",content:wt}],Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-line",{attrs:{config:t.pointerConfig}})},zt=[],jt=function(t){function e(){return Object(h["a"])(this,e),Object(d["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"pointerConfig",get:function(){var t=this.x||0,e=this.y||0,n=this.angle||0,i=this.width||10,o=this.height||15,r=this.fill||"black",a=t+o*Math.cos(n),s=e+o*Math.sin(n),l=i/2*Math.sin(n),h=-i/2*Math.cos(n);return{points:[t,e,a+l,s+h,a-l,s-h],closed:!0,fill:r}}}]),e}(g["c"]);Object(p["a"])([Object(g["b"])(Number)],jt.prototype,"x",void 0),Object(p["a"])([Object(g["b"])(Number)],jt.prototype,"y",void 0),Object(p["a"])([Object(g["b"])(Number)],jt.prototype,"angle",void 0),Object(p["a"])([Object(g["b"])(Number)],jt.prototype,"width",void 0),Object(p["a"])([Object(g["b"])(Number)],jt.prototype,"height",void 0),Object(p["a"])([Object(g["b"])(String)],jt.prototype,"fill",void 0),jt=Object(p["a"])([g["a"]],jt);var _t=jt,Nt=_t,Tt=Object(x["a"])(Nt,Ct,zt,!1,null,null,null),Mt=Tt.exports;g["c"].component("Group",P),g["c"].component("Pointer",Mt);var Pt=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(d["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.x=0,t.y=0,t.scale=1,t.draggedId=null,t.mouseDragActive=!1,t.mouseLastCoords={x:0,y:0},t.thumbnailMouseDragActive=!1,t.thumbnailMouseLastCoords={x:0,y:0},t}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){this.updateThumbnailScale()}},{key:"onScaleChanged",value:function(){var t=this.$refs.stage.getStage();t.scale({x:this.scale,y:this.scale}),t.draw()}},{key:"onThumbnailFactorChanged",value:function(){this.updateThumbnailScale()}},{key:"updateThumbnailScale",value:function(){var t=1/this.thumbnailFactor;this.$refs.thumbnailStage.getStage().scale({x:t,y:t})}},{key:"wheel",value:function(t){var e=1.1;t.evt.preventDefault();var n=this.$refs.stage.getStage(),i={x:(n.getPointerPosition().x-n.x())/this.scale,y:(n.getPointerPosition().y-n.y())/this.scale};this.scale=t.evt.deltaY<0?this.scale*e:this.scale/e;var o={x:-(i.x-n.getPointerPosition().x/this.scale)*this.scale,y:-(i.y-n.getPointerPosition().y/this.scale)*this.scale};this.x=o.x-this.width/2,this.y=o.y-this.height/2}},{key:"setDraggedIdAndPos",value:function(t,e){this.draggedId=t,this.mouseLastCoords=e}},{key:"mousedown",value:function(t){this.mouseDragActive=!0,this.mouseLastCoords={x:t.evt.pageX,y:t.evt.pageY}}},{key:"mouseup",value:function(){this.mouseDragActive=!1,this.draggedId=null}},{key:"mousemove",value:function(t){if(0===t.evt.buttons&&(this.mouseDragActive=!1),this.mouseDragActive||this.draggedId){var e={x:t.evt.pageX,y:t.evt.pageY},n=e.x-this.mouseLastCoords.x,i=e.y-this.mouseLastCoords.y;this.draggedId?St.moveDraggable(this.draggedId,{deltaX:n/this.scale,deltaY:i/this.scale}):(this.x+=n,this.y+=i),this.mouseLastCoords=e}}},{key:"thumbnailMousedown",value:function(t){this.thumbnailMouseDragActive=!0,this.thumbnailMouseLastCoords={x:t.evt.pageX,y:t.evt.pageY}}},{key:"thumbnailMouseup",value:function(){this.thumbnailMouseDragActive=!1}},{key:"thumbnailMousemove",value:function(t){if(0===t.evt.buttons&&(this.thumbnailMouseDragActive=!1),this.thumbnailMouseDragActive){var e={x:t.evt.pageX,y:t.evt.pageY},n=this.thumbnailMouseLastCoords,i=this.thumbnailFactor*this.scale;this.x-=(e.x-n.x)*i,this.y-=(e.y-n.y)*i,this.thumbnailMouseLastCoords=e}}},{key:"thumbnailFactor",get:function(){return Math.min(this.width,this.height)>600?5:4}},{key:"thumbnailWidth",get:function(){return this.width/this.thumbnailFactor}},{key:"thumbnailHeight",get:function(){return this.height/this.thumbnailFactor}},{key:"thumbnailViewportConfig",get:function(){return{x:(-this.width/2-this.x)/this.scale,y:(-this.height/2-this.y)/this.scale,width:this.width/this.scale,height:this.height/this.scale,stroke:"#3eaf7c",strokeWidth:this.thumbnailFactor}}},{key:"thumbnailViewportBackgroundConfig",get:function(){var t=this,e=this.thumbnailViewportConfig;return{fill:"rgba(0,0,0,0.2)",sceneFunc:function(n,i){n.beginPath(),n.moveTo(-t.width/2,-t.height/2),n.lineTo(t.width/2,-t.height/2),n.lineTo(t.width/2,t.height/2),n.lineTo(-t.width/2,t.height/2),n.lineTo(-t.width/2,-t.height/2),n.moveTo(e.x,e.y),n.lineTo(e.x,e.y+e.height),n.lineTo(e.x+e.width,e.y+e.height),n.lineTo(e.x+e.width,e.y),n.lineTo(e.x,e.y),n.fillStrokeShape(i)}}}}]),e}(g["c"]);Object(p["a"])([Object(g["b"])({type:Number,required:!0})],Pt.prototype,"width",void 0),Object(p["a"])([Object(g["b"])({type:Number,required:!0})],Pt.prototype,"height",void 0),Object(p["a"])([Object(g["b"])({type:Array,default:function(){return[]}})],Pt.prototype,"data",void 0),Object(p["a"])([Object(g["d"])("scale")],Pt.prototype,"onScaleChanged",null),Object(p["a"])([Object(g["d"])("thumbnailFactor")],Pt.prototype,"onThumbnailFactorChanged",null),Pt=Object(p["a"])([g["a"]],Pt);var Et=Pt,Lt=Et,Bt=(n("8543"),Object(x["a"])(Lt,O,C,!1,null,"c78ffbf4",null)),It=Bt.exports,Dt=(n("3d1c"),n("835f"),n("2ef0")),Wt=n.n(Dt),At=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(d["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.settingsOpen=!0,t.settingsWidth=300,t.minGraphWidth=150,t.minSettingsWidth=150,t.sizerMouseActive=!1,t.sizerTouchActive=!1,t.windowWidth=document.documentElement.clientWidth,t.windowHeight=document.documentElement.clientHeight,t.canvasWidth=0,t.canvasHeight=0,t.parser="json",t.rawInput="",t.parseError=null,t.parsedInput="",t.examples=Ot,t.rendered=[],t}return Object(f["a"])(e,t),Object(c["a"])(e,[{key:"parseInput",value:function(){try{if(this.rawInput){var t=kt[this.parser](this.rawInput);this.parsedInput=JSON.stringify(t,null,2),St.setData(t)}else this.parsedInput="";this.parseError=null}catch(e){console.log(e),this.parseError=e.stack}}},{key:"mounted",value:function(){var t=this;window.addEventListener("resize",this.getSize),this.updateCanvasSize(),St.addEventListener("render",Wt.a.throttle((function(e){t.rendered=e}),1e3/60))}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.getSize)}},{key:"onSettingsWidthChanged",value:function(){this.updateCanvasSize()}},{key:"onParserChanged",value:function(){this.parseInput()}},{key:"onRawInputChanged",value:function(){this.parseInput()}},{key:"redraw",value:function(){St.redraw(JSON.parse(this.parsedInput))}},{key:"selectExample",value:function(t){var e=Ot[t];this.parser=e.parser,this.rawInput=e.content}},{key:"inputFileChange",value:function(t){var e=this,n=t.target.files[0];if(n){switch(n.type){case"application/json":this.parser="json";break;case"text/vnd.graphviz":this.parser="graphviz";break;default:return void alert("Unknown file type")}var i=new FileReader;i.onload=function(t){e.rawInput=t.target.result},i.readAsText(n)}}},{key:"getSize",value:function(){var t=this;this.windowWidth=document.documentElement.clientWidth,this.windowHeight=document.documentElement.clientHeight,this.$nextTick((function(){return t.updateCanvasSize()}))}},{key:"updateCanvasSize",value:function(){this.canvasWidth=this.$refs.canvas.offsetWidth,this.canvasHeight=this.$refs.canvas.offsetHeight}},{key:"onMainSizerMouseDown",value:function(){this.sizerMouseActive=!0}},{key:"onMainSizerMouseUp",value:function(){this.sizerMouseActive=!1}},{key:"onMainSizerMouseMove",value:function(t){if(0===t.buttons&&(this.sizerMouseActive=!1),this.sizerMouseActive){var e=0,n=t.currentTarget;while(n)e+=n.offsetLeft,n=n.offsetParent;var i=t.pageX,o=t.currentTarget.offsetWidth,r=i-e;r>=this.minGraphWidth&&o-r>=this.minSettingsWidth&&(this.settingsWidth=Math.round(o-r))}}},{key:"onMainSizerTouchStart",value:function(){this.sizerTouchActive=!0}},{key:"onMainSizerTouchEnd",value:function(){this.sizerTouchActive=!1}},{key:"onMainSizerTouchMove",value:function(t){if(this.sizerTouchActive){var e=0,n=t.currentTarget;while(n)e+=n.offsetLeft,n=n.offsetParent;var i=t.touches[0].pageX,o=t.currentTarget.offsetWidth,r=i-e;r>=this.minGraphWidth&&o-r>=this.minSettingsWidth&&(this.settingsWidth=Math.round(o-r))}}},{key:"desktopLayout",get:function(){return this.windowWidth>719}},{key:"realSettingsWidth",get:function(){return this.desktopLayout?this.settingsWidth:this.canvasWidth}}]),e}(g["c"]);Object(p["a"])([Object(g["d"])("settingsWidth")],At.prototype,"onSettingsWidthChanged",null),Object(p["a"])([Object(g["d"])("parser")],At.prototype,"onParserChanged",null),Object(p["a"])([Object(g["d"])("rawInput")],At.prototype,"onRawInputChanged",null),At=Object(p["a"])([Object(g["a"])({components:{CollapsiblePane:k,Graph:It}})],At);var Rt=At,Ht=Rt,Ft=(n("7faf"),Object(x["a"])(Ht,s,l,!1,null,null,null)),Gt=Ft.exports;i["default"].config.productionTip=!1,i["default"].component("v-icon",o["a"]),i["default"].use(a.a),new i["default"]({render:function(t){return t(Gt)}}).$mount("#app")},fe74:function(t,e,n){"use strict";var i=n("42c8"),o=n.n(i);o.a}});
//# sourceMappingURL=app.43bffdf3.js.map