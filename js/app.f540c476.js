(function(t){function e(e){for(var i,a,s=e[0],h=e[1],l=e[2],d=0,u=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&u.push(o[a][0]),o[a]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);c&&c(e);while(u.length)u.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var h=n[s];0!==o[h]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=h;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},2:function(t,e){},"42c8":function(t,e,n){},"4dc6":function(t,e,n){"use strict";var i=n("898b"),o=n.n(i);o.a},"7faf":function(t,e,n){"use strict";var i=n("8fba"),o=n.n(i);o.a},"898b":function(t,e,n){},"8fba":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=n("0874"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",{staticClass:"app-header"},[n("h1",{staticClass:"title"},[t._v("Graph Visualizer")]),n("div",{staticClass:"settings"},[t.desktopLayout?n("div",{staticClass:"settings-item"},[n("span",{staticClass:"settings-item-title",class:{"setting-item-active":t.settingsOpen},on:{click:function(e){t.settingsOpen=!t.settingsOpen}}},[t._v("\n          侧栏\n        ")])]):t._e()])]),n("main",t._g({staticClass:"main-panes",class:{"main-panes-show-sidebarmain-panes-show-sidebar":t.settingsOpen&&t.desktopLayout}},Object.assign({},t.sizerMouseActive?{mouseup:t.onMainSizerMouseUp,mousemove:t.onMainSizerMouseMove}:{},t.sizerTouchActive?{touchend:t.onMainSizerTouchEnd,touchmove:t.onMainSizerTouchMove}:{})),[n("div",{staticClass:"main-container main-container-graph",class:{"main-container-graph-size-active":!t.sizerMouseActive&&!t.sizerTouchActive},style:{width:t.desktopLayout?t.settingsOpen?"calc(100% - "+t.settingsWidth+"px)":"100%":"auto"}},[n("div",{ref:"canvas",staticClass:"main-pane main-pane-graph"},[t.parseError?n("div",{staticClass:"error-pane"},[n("pre",[n("code",[t._v(t._s(t.parseError))])])]):t._e(),n("Graph",{ref:"graph",attrs:{width:t.canvasWidth,height:t.canvasHeight,data:t.rendered}})],1)]),n("transition",{attrs:{name:"sizer-slide-x",duration:300}},[t.settingsOpen&&t.desktopLayout?n("div",{staticClass:"main-sizer main-client-settings-sizer",style:{left:"calc(100% - "+t.settingsWidth+"px)"},on:{mousedown:t.onMainSizerMouseDown,touchstart:t.onMainSizerTouchStart}},[n("div",{staticClass:"main-sizer-handlebar"})]):t._e()]),n("transition",{attrs:{name:"settings-slide-x",duration:300}},[t.settingsOpen||!t.desktopLayout?n("div",{staticClass:"main-container main-container-settings",style:{width:t.desktopLayout?t.settingsWidth+"px":"auto"}},[n("div",{staticClass:"main-pane main-pane-settings"},[n("CollapsiblePane",{staticClass:"main-pane-subpane",attrs:{title:"输入"}},[n("div",{staticClass:"settings-input-file"},[n("label",{attrs:{for:"input-file"}},[n("v-icon",{attrs:{name:"upload",scale:"0.8"}}),t._v("打开文件\n              ")],1),n("input",{attrs:{type:"file",id:"input-file"},on:{change:t.inputFileChange}})]),n("div",{staticClass:"settings-input-format"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.parser,expression:"parser"}],attrs:{id:"input-format"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.parser=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"json",selected:""}},[t._v("JSON")]),n("option",{attrs:{value:"graphviz"}},[t._v("Graphviz")])])]),n("button",{staticClass:"setting-input-redraw",on:{click:t.redraw}},[n("v-icon",{attrs:{name:"sync",scale:"0.8"}}),t._v("重绘\n            ")],1),n("div",{staticClass:"settings-input-examples"},[n("span",{staticClass:"settings-input-example-label"},[t._v("示例：")]),t._l(t.examples,(function(e,i){return n("span",{key:e.name,staticClass:"settings-input-example",on:{click:function(e){return t.selectExample(i)}}},[t._v("\n                "+t._s(e.name)+"\n              ")])}))],2),n("div",{staticClass:"settings-input-display",class:{"settings-input-display-two-column":t.realSettingsWidth>=400}},[n("div",{staticClass:"settings-input-raw"},[n("label",{attrs:{for:"input-raw"}},[t._v("输入数据：")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.rawInput,expression:"rawInput"}],attrs:{id:"input-raw",rows:"10"},domProps:{value:t.rawInput},on:{input:function(e){e.target.composing||(t.rawInput=e.target.value)}}})]),n("div",{staticClass:"settings-input-parsed"},[n("label",{attrs:{for:"input-parsed"}},[t._v("解析结果（只读）：")]),n("textarea",{attrs:{id:"input-parsed",rows:"10",readonly:""},domProps:{value:t.parsedInput}})])])])],1)]):t._e()])],1)])},a=[],s=n("d225"),h=n("b0b4"),l=n("308d"),c=n("6bb5"),d=n("4e2b"),u=n("9ab4"),f=n("60a3"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"pane-title",on:{click:t.click}},[t._v("\n    "+t._s(t.title)+"\n    "),n("v-icon",{staticClass:"pane-arrow",class:{"pane-arrow-expand":t.expand},attrs:{name:"angle-up"}})],1),n("div",{ref:"paneContent",staticClass:"pane-content",style:null!==t.animationHeight?{height:t.animationHeight+"px"}:{}},[t._t("default")],2)])},g=[],y=(n("ea4b"),function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.expand=!0,t.realHeight=0,t.animationHeight=null,t}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"mounted",value:function(){var t=this.$refs.paneContent;this.realHeight=t.offsetHeight,t.addEventListener("transitionend",this.transitionEnd.bind(this))}},{key:"click",value:function(){var t=this;if(this.expand=!this.expand,this.expand)this.animationHeight=0,setTimeout((function(){t.animationHeight=t.realHeight}));else{var e=this.$refs.paneContent;this.realHeight=e.offsetHeight,this.animationHeight=this.realHeight,setTimeout((function(){t.animationHeight=0}))}}},{key:"transitionEnd",value:function(){0!==this.animationHeight&&(this.animationHeight=null)}}]),e}(f["d"]));Object(u["a"])([Object(f["b"])(String)],y.prototype,"title",void 0),y=Object(u["a"])([f["a"]],y);var v=y,b=v,m=(n("fe74"),n("2877")),w=Object(m["a"])(b,p,g,!1,null,"08120549",null),x=w.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"graph-container"},[n("my-canvas",t._g({ref:"mainCanvas",attrs:{width:t.width,height:t.height,data:t.mainCanvasData,"enable-hit":!0},on:{mousedown:t.mousedown,wheel:t.wheel}},t.mouseDragActive?{mouseup:t.mouseup,mousemove:t.mousemove}:{})),n("div",{staticClass:"thumbnail",style:{width:t.thumbnailWidth+"px",height:t.thumbnailHeight+"px"}},[n("my-canvas",t._g({ref:"thumbnailCanvas",attrs:{width:t.thumbnailWidth,height:t.thumbnailHeight,data:t.thumbnailCanvasData,"enable-hit":!0},on:{mousedown:t.thumbnailMousedown}},t.thumbnailMouseDragActive?{mouseup:t.thumbnailMouseup,mousemove:t.thumbnailMousemove}:{}))],1)],1)},k=[],C=(n("c5f6"),n("75fc")),O=(n("ac4d"),n("8a81"),n("d263"),n("ac6a"),n("28a5"),function(){function t(){Object(s["a"])(this,t),this.events={}}return Object(h["a"])(t,[{key:"addEventListener",value:function(t,e){void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this.events[t]){var n=this.events[t].indexOf(e);n>-1&&this.events[t].splice(n,-1)}}},{key:"emit",value:function(t){if(void 0!==this.events[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var o=!0,r=!1,a=void 0;try{for(var s,h=this.events[t][Symbol.iterator]();!(o=(s=h.next()).done);o=!0){var l=s.value;l.apply(this,n)}}catch(c){r=!0,a=c}finally{try{o||null==h.return||h.return()}finally{if(r)throw a}}}}}]),t}()),P=(n("4f7f"),n("5df3"),n("f400"),n("768b")),z=(n("6c7b"),n("2a88")),T=function(){function t(e){Object(s["a"])(this,t),this.parent=e,this.fixed=!1,this.position={x:0,y:0}}return Object(h["a"])(t,[{key:"setPosition",value:function(t){this.position=t}},{key:"getPosition",value:function(){return this.position}},{key:"getAbsolutePosition",value:function(t){var e=0,n=0,i=this;while(i!==t){if(null===i)throw new Error("Incorrect parent parameter");e+=i.position.x,n+=i.position.y,i=i.parent}return{x:e,y:n}}}]),t}(),j=function(t){function e(t,n){var i;return Object(s["a"])(this,e),i=Object(l["a"])(this,Object(c["a"])(e).call(this,n)),i.graph=t,i.data={ports:[],edges:[],children:[]},i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"solve",value:function(t,e,n){this.data=e}},{key:"informAllEdgesFullyUpdatePosition",value:function(){if(this.data){var t=!0,e=!1,n=void 0;try{for(var i,o=this.data.edges[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;r.edge.fullyUpdatePosition()}}catch(a){e=!0,n=a}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}}}}]),e}(T),M=function(t){function e(t,n){var i;return Object(s["a"])(this,e),i=Object(l["a"])(this,Object(c["a"])(e).call(this,t,n)),i.contentSize={width:0,height:0},i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"solve",value:function(t,n,i){Object(z["a"])(Object(c["a"])(e.prototype),"solve",this).call(this,t,n,i);for(var o=Object.assign({},e.defaultConfig,t),r=new Map,a=0;a<n.ports.length;++a)r.set(n.ports[a],a);var s=!0,h=!1,l=void 0;try{for(var d,u=n.ports[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var f=d.value;f.initialPlaced||(f.setPosition({x:o.springLength*(Math.random()-.5),y:o.springLength*(Math.random()-.5)}),f.initialPlaced=!0)}}catch(te){h=!0,l=te}finally{try{s||null==u.return||u.return()}finally{if(h)throw l}}for(var p=[],g=0;g<n.ports.length;++g)p.push(Array(n.ports.length).fill(1/0)),p[p.length-1][g]=0;var y=!0,v=!1,b=void 0;try{for(var m,w=n.edges[Symbol.iterator]();!(y=(m=w.next()).done);y=!0){var x=m.value,S=x.fromBelonging,k=x.toBelonging,C=r.get(S),O=r.get(k);p[C][O]=1,p[O][C]=1}}catch(te){v=!0,b=te}finally{try{y||null==w.return||w.return()}finally{if(v)throw b}}for(var T=0;T<n.ports.length;++T)for(var j=0;j<n.ports.length;++j)for(var M=0;M<n.ports.length;++M){var N=p[j][T]+p[T][M];p[j][M]>N&&(p[j][M]=N)}for(var _=[],E=0;E<n.ports.length;++E){for(var B=[],L=0;L<n.ports.length;++L)B.push(o.springLength*p[E][L]);_.push(B)}for(var A=[],W=0;W<n.ports.length;++W){for(var D=[],I=0;I<n.ports.length;++I)D.push(o.springConstant*Math.pow(p[W][I],-2));A.push(D)}var R=[],H=!0,F=!1,G=void 0;try{for(var Y,X=n.ports[Symbol.iterator]();!(H=(Y=X.next()).done);H=!0){Y.value;R.push(Array(n.ports.length))}}catch(te){F=!0,G=te}finally{try{H||null==X.return||X.return()}finally{if(F)throw G}}for(var U=0;U<n.ports.length;++U){var J=n.ports[U].getPosition();R[U][U]=[0,0];for(var $=U+1;$<n.ports.length;++$){var q=n.ports[$].getPosition(),V=1/Math.sqrt(Math.pow(J.x-q.x,2)+Math.pow(J.y-q.y,2));R[U][$]=[A[U][$]*(J.x-q.x)*(1-_[U][$]*V),A[U][$]*(J.y-q.y)*(1-_[U][$]*V)],R[$][U]=[-R[U][$][0],-R[U][$][1]]}}for(var K=[],Q=0;Q<n.ports.length;++Q){for(var Z=[0,0],tt=0;tt<n.ports.length;++tt)Z[0]+=R[Q][tt][0],Z[1]+=R[Q][tt][1];K.push(Z)}var et,nt=.01,it=Math.max(1e3,Math.min(10*n.ports.length,6e3)),ot=5,rt=0;while(rt<it){rt+=1;var at=0,st=0,ht=0;et=-1;for(var lt=0;lt<n.ports.length;++lt){var ct=Math.sqrt(Math.pow(K[lt][0],2)+Math.pow(K[lt][1],2));ct>et&&(at=lt,st=K[lt][0],ht=K[lt][1],et=ct)}if(et<=nt)break;var dt=n.ports[at].getPosition(),ut=et,ft=0;while(ut>nt&&ft<ot){ft+=1;for(var pt=0,gt=0,yt=0,vt=0;vt<n.ports.length;++vt)if(vt!==at){var bt=n.ports[vt].getPosition(),mt=1/Math.pow(Math.pow(dt.x-bt.x,2)+Math.pow(dt.y-bt.y,2),1.5),wt=A[at][vt],xt=_[at][vt];pt+=wt*(1-xt*Math.pow(dt.y-bt.y,2)*mt),gt+=wt*xt*(dt.x-bt.x)*(dt.y-bt.y)*mt,yt+=wt*(1-xt*Math.pow(dt.x-bt.x,2)*mt)}var St=pt*yt-Math.pow(gt,2),kt=(gt*ht-yt*st)/St,Ct=(gt*st-pt*ht)/St;dt.x+=kt,dt.y+=Ct;for(var Ot=0,Pt=0,zt=0;zt<n.ports.length;++zt)if(zt!==at){var Tt=Object(P["a"])(R[at][zt],2),jt=Tt[0],Mt=Tt[1],Nt=n.ports[zt].getPosition(),_t=1/Math.sqrt(Math.pow(dt.x-Nt.x,2)+Math.pow(dt.y-Nt.y,2)),Et=A[at][zt]*(dt.x-Nt.x)*(1-_[at][zt]*_t),Bt=A[at][zt]*(dt.y-Nt.y)*(1-_[at][zt]*_t);R[at][zt]=[Et,Bt],R[zt][at]=[-Et,-Bt],K[zt][0]+=jt-Et,K[zt][1]+=Mt-Bt,Ot+=Et,Pt+=Bt}K[at]=[Ot,Pt],ut=Math.sqrt(Math.pow(K[at][0],2)+Math.pow(K[at][1],2)),st=K[at][0],ht=K[at][1]}}var Lt=[1/0,1/0],At=[-1/0,-1/0],Wt=!0,Dt=!1,It=void 0;try{for(var Rt,Ht=n.ports[Symbol.iterator]();!(Wt=(Rt=Ht.next()).done);Wt=!0){var Ft=Rt.value,Gt=Ft.getPosition(),Yt=Ft.getBoundingBoxSize(),Xt=Yt.width/2,Ut=Yt.height/2;Gt.x-Xt<Lt[0]&&(Lt[0]=Gt.x-Xt),Gt.x+Xt>At[0]&&(At[0]=Gt.x+Xt),Gt.y-Ut<Lt[1]&&(Lt[1]=Gt.y-Ut),Gt.y+Ut>At[1]&&(At[1]=Gt.y+Ut)}}catch(te){Dt=!0,It=te}finally{try{Wt||null==Ht.return||Ht.return()}finally{if(Dt)throw It}}var Jt={x:(Lt[0]+At[0])/2,y:(Lt[1]+At[1])/2};this.contentSize={width:At[0]-Lt[0],height:At[1]-Lt[1]};var $t=!0,qt=!1,Vt=void 0;try{for(var Kt,Qt=n.ports[Symbol.iterator]();!($t=(Kt=Qt.next()).done);$t=!0){var Zt=Kt.value;Zt.getPosition().x-=Jt.x,Zt.getPosition().y-=Jt.y}}catch(te){qt=!0,Vt=te}finally{try{$t||null==Qt.return||Qt.return()}finally{if(qt)throw Vt}}this.informAllEdgesFullyUpdatePosition()}},{key:"render",value:function(){return{is:"group",x:this.position.x,y:this.position.y,children:this.data.children.map((function(t){return t.render()}))}}},{key:"getContentSize",value:function(){return this.contentSize}}]),e}(j);function N(t){switch(t&&t.type){default:return M}}M.defaultConfig={springLength:150,springConstant:.05};var _=function(t){function e(t,n){var i;return Object(s["a"])(this,e),i=Object(l["a"])(this,Object(c["a"])(e).call(this,n)),i.graph=t,i}return Object(d["a"])(e,t),e}(T),E=function(t){function e(t,n){var i;return Object(s["a"])(this,e),i=Object(l["a"])(this,Object(c["a"])(e).call(this,t,n)),i.contentSize={width:0,height:0},i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t){var n=Object.assign({},e.defaultConfig,t),i=this.graph.layouts,o=i.map((function(t){return t.getContentSize()}));if("LR"===n.direction||"RL"===n.direction){this.contentSize={width:o.map((function(t){return t.width})).reduce((function(t,e){return t+e}),0)+Math.max(i.length-1,0)*n.spaceBetween,height:Math.max.apply(Math,Object(C["a"])(o.map((function(t){return t.height}))).concat([0]))};for(var r="LR"===n.direction?-this.contentSize.width/2:this.contentSize.width/2,a=0;a<i.length;++a){var s=("LR"===n.direction?o[a].width/2:-o[a].width/2)+r;i[a].setPosition({x:s,y:0}),"LR"===n.direction?r+=o[a].width+n.spaceBetween:r-=o[a].width+n.spaceBetween}}else{this.contentSize={width:Math.max.apply(Math,Object(C["a"])(o.map((function(t){return t.width}))).concat([0])),height:o.map((function(t){return t.height})).reduce((function(t,e){return t+e}),0)+Math.max(i.length-1,0)*n.spaceBetween};for(var h="DT"===n.direction?this.contentSize.height/2:-this.contentSize.height/2,l=0;l<i.length;++l){var c=("DT"===n.direction?-o[l].height/2:o[l].height/2)+h;i[l].setPosition({x:0,y:c}),"DT"===n.direction?h-=o[l].height+n.spaceBetween:h+=o[l].height+n.spaceBetween}}}},{key:"render",value:function(){return{is:"group",x:this.position.x,y:this.position.y,children:this.graph.layouts.map((function(t){return t.render()}))}}},{key:"getContentSize",value:function(){return this.contentSize}}]),e}(_);function B(t){switch(t&&t.type){default:return E}}E.defaultConfig={direction:"TD",spaceBetween:12};var L=function t(e){Object(s["a"])(this,t),this.parent=e},A=function(t){function e(t,n){var i;if(Object(s["a"])(this,e),"box"!==n.shape)throw new Error("Expect box shape");return i=Object(l["a"])(this,Object(c["a"])(e).call(this,t)),i.updateData(n),i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t){var n=Object.assign({},e.defaultConfig,t);delete n.layout,delete n.children;var i=!this.config||this.config.label!==n.label||this.config.fontSize!==n.fontSize||this.config.fontFamily!==n.fontFamily||this.config.lineHeight!==n.lineHeight;if(i){var o=this.parent.root.ctx;o.font="".concat(n.fontSize,"px ").concat(n.fontFamily);var r=n.label?n.label.split("\n"):[];this.textSize={width:Math.max.apply(Math,Object(C["a"])(r.map((function(t){return o.measureText(t).width}))).concat([0])),height:r.length*n.fontSize*n.lineHeight}}var a=this.parent.componentLayout.getContentSize();this.contentSize={width:a.width+2*n.padding,height:a.height+2*n.padding},this.parent.componentLayout.setPosition({x:0,y:0}),this.textPosition={x:0,y:0},n.label&&("left"===n.labelPosition||"right"===n.labelPosition?(this.contentSize.width+=this.textSize.width+n.spaceBetween,this.textSize.height>a.height&&(this.contentSize.height=this.textSize.height+2*n.padding),"left"===n.labelPosition?(this.parent.componentLayout.getPosition().x=(this.textSize.width+n.spaceBetween)/2,this.textPosition.x=-(a.width+n.spaceBetween)/2):(this.parent.componentLayout.getPosition().x=-(this.textSize.width+n.spaceBetween)/2,this.textPosition.x=(a.width+n.spaceBetween)/2)):(this.contentSize.height+=this.textSize.height+n.spaceBetween,this.textSize.width>a.width&&(this.contentSize.width=this.textSize.width+2*n.padding),"bottom"===n.labelPosition?(this.parent.componentLayout.getPosition().y=-(this.textSize.height+n.spaceBetween)/2,this.textPosition.y=(a.height+n.spaceBetween)/2):(this.parent.componentLayout.getPosition().y=(this.textSize.height+n.spaceBetween)/2,this.textPosition.y=-(a.height+n.spaceBetween)/2))),this.borderSize={width:this.contentSize.width+n.strokeWidth,height:this.contentSize.height+n.strokeWidth},this.config=n}},{key:"render",value:function(){var t=[];if(this.config.style&&"none"!==this.config.style){var e={is:"rect",x:-this.contentSize.width/2,y:-this.contentSize.height/2,width:this.contentSize.width,height:this.contentSize.height,fill:"filled"===this.config.style?this.config.fillColor:void 0,stroke:this.config.strokeWidth>0?this.config.strokeColor:void 0,strokeWidth:this.config.strokeWidth};t.push(e)}if(this.config.label){var n={is:"text",x:-this.textSize.width/2,y:this.textPosition.y-this.textSize.height/2,text:this.config.label,fontSize:this.config.fontSize,fontFamily:this.config.fontFamily,lineHeight:this.config.lineHeight,align:this.config.align};t.push(n)}return t.push(this.parent.componentLayout.render()),t}},{key:"getBoundingBoxSize",value:function(){return this.borderSize}},{key:"distanceToBorder",value:function(t){return Math.min(Math.abs(this.borderSize.width/2/Math.cos(t)),Math.abs(this.borderSize.height/2/Math.sin(t)))}}]),e}(L);function W(t){return t.shape="box",A}A.defaultConfig={label:null,labelPosition:"top",style:"none",fillColor:"white",strokeColor:"black",strokeWidth:0,fontSize:12,fontFamily:"sans-serif",lineHeight:1.2,padding:6,align:"center",spaceBetween:12};var D=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(s["a"])(this,e),n=Object(l["a"])(this,Object(c["a"])(e).call(this,i)),n.root=t,n.initialPlaced=!1,n.id="",n}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"findPort",value:function(t){return 0===t.length?this:null}}]),e}(T),I=function t(e,n){Object(s["a"])(this,t),this.graph=e,this.layout=n},R=function(t){function e(t,n){var i;return Object(s["a"])(this,e),i=Object(l["a"])(this,Object(c["a"])(e).call(this,t,n)),i.config=e.defaultConfig,i.layoutData={ports:[],edges:[],children:[]},i.nodeToIndex=new Map,i.nodes=[],i.forces=[],i.velocities=[],i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"solve",value:function(t,n){this.config=Object.assign({},e.defaultConfig,t),this.layoutData=n,this.nodeToIndex=new Map,this.nodes=[];for(var i=0;i<this.layoutData.ports.length;++i)this.nodeToIndex.set(this.layoutData.ports[i],i),this.nodes.push(this.layoutData.ports[i]);var o=!0,r=!1,a=void 0;try{for(var s,h=this.layoutData.edges[Symbol.iterator]();!(o=(s=h.next()).done);o=!0){var l=s.value,c=l.edge.getControlPoints(),d=!0,u=!1,f=void 0;try{for(var p,g=c[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var y=p.value;this.nodeToIndex.set(y,i),this.nodes.push(y),++i}}catch(v){u=!0,f=v}finally{try{d||null==g.return||g.return()}finally{if(u)throw f}}}}catch(v){r=!0,a=v}finally{try{o||null==h.return||h.return()}finally{if(r)throw a}}for(this.forces=[],this.velocities=[],i=0;i<this.nodeToIndex.size;++i)this.forces.push({x:0,y:0}),this.velocities.push({x:0,y:0})}},{key:"formBarnesHutTree",value:function(){if(this.nodes.length<1)throw new Error("Expect at least one node to form Barnes Hut tree");for(var t=this.nodes[0].getPosition().x,n=this.nodes[0].getPosition().x,i=this.nodes[0].getPosition().y,o=this.nodes[0].getPosition().y,r=1;r<this.nodes.length;++r){var a=this.nodes[r],s=a.getPosition();s.x<t&&(t=s.x),s.x>n&&(n=s.x),s.y<i&&(i=s.y),s.y>o&&(o=s.y)}var h=Math.abs(n-t)-Math.abs(o-i);h>0?(i-=.5*h,o+=.5*h):(t+=.5*h,n-=.5*h);var l=Math.abs(n-t),c=.5*l,d=.5*(t+n),u=.5*(i+o),f={centerOfMass:{x:0,y:0},mass:0,range:{minX:d-c,maxX:d+c,minY:u-c,maxY:u+c},size:l};e.splitBranch(f);var p=!0,g=!1,y=void 0;try{for(var v,b=this.nodes[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var m=v.value;e.placeInTree(f,m)}}catch(w){g=!0,y=w}finally{try{p||null==b.return||b.return()}finally{if(g)throw y}}return f}},{key:"step",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,o=this.forces[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;r.x=0,r.y=0}}catch(Z){e=!0,n=Z}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}for(var a=this,s=0;s<this.nodes.length;++s){var h=this.nodes[s],l=-h.getPosition().x,c=-h.getPosition().y,d=Math.sqrt(l*l+c*c),u=0===d?0:this.config.centralGravity/d;this.forces[s].x=l*u,this.forces[s].y=c*u}if(this.nodes.length){var f=function(t,e,n,i){0===t&&0===e&&(t=.1);var o=1,r=Math.sqrt(t*t+e*e),s=a.config.gravitationalConstant*i.mass*o/Math.pow(r,3),h=a.forces[a.nodeToIndex.get(n)];h.x+=t*s,h.y+=e*s},p=function(t,e){if(!t.children)throw new Error("Get force contributions can be only called on a split branch");g(t.children.NW,e),g(t.children.NE,e),g(t.children.SW,e),g(t.children.SE,e)},g=function(t,e){if(t.children||t.data){var n=t.centerOfMass.x-e.getPosition().x,i=t.centerOfMass.y-e.getPosition().y,o=Math.sqrt(n*n+i*i);t.size/o<a.config.theta?f(n,i,e,t):t.children?p(t,e):t.data!==e&&f(n,i,e,t)}},y=this.formBarnesHutTree(),v=!0,b=!1,m=void 0;try{for(var w,x=this.nodes[Symbol.iterator]();!(v=(w=x.next()).done);v=!0){var S=w.value;p(y,S)}}catch(Z){b=!0,m=Z}finally{try{v||null==x.return||x.return()}finally{if(b)throw m}}}var k=!0,O=!1,P=void 0;try{for(var z,T=this.layoutData.edges[Symbol.iterator]();!(k=(z=T.next()).done);k=!0){var j=z.value;if(j.fromBelonging!==j.toBelonging)for(var M=[j.fromBelonging].concat(Object(C["a"])(j.edge.getControlPoints()),[j.toBelonging]),N=0;N<M.length-1;++N){var _=M[N],E=M[N+1],B=this.config.springLength/(M.length-1),L=_.getPosition().x-E.getPosition().x,A=_.getPosition().y-E.getPosition().y,W=Math.max(Math.sqrt(L*L+A*A),.01),D=this.config.springConstant*(B-W)/W,I=L*D,R=A*D;this.forces[this.nodeToIndex.get(_)].x+=I,this.forces[this.nodeToIndex.get(_)].y+=R,this.forces[this.nodeToIndex.get(E)].x-=I,this.forces[this.nodeToIndex.get(E)].y-=R}}}catch(Z){O=!0,P=Z}finally{try{k||null==T.return||T.return()}finally{if(O)throw P}}function H(t,e,n){var i=a.config.damping*t,o=(e-i)/n;return t+=o,Math.abs(t)>a.config.maxVelocity&&(t=t>0?a.config.maxVelocity:-a.config.maxVelocity),t}for(var F=0;F<this.nodes.length;++F){var G=this.nodes[F],Y=G.getPosition(),X=this.forces[F],U=this.velocities[F];G.fixed?(U.x=0,U.y=0):(U.x=H(U.x,X.x,1),U.y=H(U.y,X.y,1)),G.setPosition({x:Y.x+U.x,y:Y.y+U.y})}var J=!0,$=!1,q=void 0;try{for(var V,K=this.layoutData.edges[Symbol.iterator]();!(J=(V=K.next()).done);J=!0){var Q=V.value;Q.edge.updatePosition()}}catch(Z){$=!0,q=Z}finally{try{J||null==K.return||K.return()}finally{if($)throw q}}return!0}}],[{key:"splitBranch",value:function(t){if(t.children)throw new Error("Cannot split branch on an already split branch");var e=t.data;e&&(t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),delete t.data;var n=.5*t.size;t.children={NW:{centerOfMass:{x:0,y:0},mass:0,range:{minX:t.range.minX,maxX:t.range.minX+n,minY:t.range.minY,maxY:t.range.minY+n},size:n},NE:{centerOfMass:{x:0,y:0},mass:0,range:{minX:t.range.minX+n,maxX:t.range.maxX,minY:t.range.minY,maxY:t.range.minY+n},size:n},SW:{centerOfMass:{x:0,y:0},mass:0,range:{minX:t.range.minX,maxX:t.range.minX+n,minY:t.range.minY+n,maxY:t.range.maxY},size:n},SE:{centerOfMass:{x:0,y:0},mass:0,range:{minX:t.range.minX+n,maxX:t.range.maxX,minY:t.range.minY+n,maxY:t.range.maxY},size:n}},e&&this.placeInTree(t,e)}},{key:"placeInTree",value:function(t,e){if(!t.children)throw new Error("Place in tree can be only called on a split branch");this.updateBranchMass(t,e);var n,i=t.children.NW.range,o=e.getPosition();n=i.maxX>o.x?i.maxY>o.y?"NW":"SW":i.maxY>o.y?"NE":"SE";var r=t.children[n];r.children?this.placeInTree(r,e):r.data?r.data.getPosition().x===o.x&&r.data.getPosition().y===o.y?(o.x+=Math.random()-.5,o.y+=Math.random()-.5):(this.splitBranch(r),this.placeInTree(r,e)):(r.data=e,this.updateBranchMass(r,e))}},{key:"updateBranchMass",value:function(t,e){var n=1,i=t.mass+n;t.centerOfMass.x=(t.centerOfMass.x*t.mass+e.getPosition().x*n)/i,t.centerOfMass.y=(t.centerOfMass.y*t.mass+e.getPosition().y*n)/i,t.mass=i}}]),e}(I);function H(t){switch(t&&t.type){default:return R}}R.defaultConfig={theta:0,gravitationalConstant:-2e3,centralGravity:.05,springLength:150,springConstant:.04,damping:.09,maxVelocity:50};var F=function(t){function e(t,n,i,o,r){var a;if(Object(s["a"])(this,e),"graph"!==o.type)throw new Error("Expect node type");return a=Object(l["a"])(this,Object(c["a"])(e).call(this,t,i)),a.graph=n,a.updateData(o,r),a}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t,n){var i=this;this.id=e.getId(t);new Map;this.depth=n?n.depth+1:0,this.fullId=n?"".concat(n.parentId,":").concat(this.id):this.id,this.fromEdges=new Set,this.toEdges=new Set;var o=this.children;if(this.children=new Map,this.edges=new Map,this.ports=new Map,this.subgraphs=new Map,t.children){var r=!0,a=!1,s=void 0;try{for(var h,l=t.children[Symbol.iterator]();!(r=(h=l.next()).done);r=!0){var c=h.value,d=at(c),u=d.getId(c);if(this.children.has(u))throw new Error("Duplicated id");var f=void 0;o&&o.has(u)&&o.get(u).constructor===d?(f=o.get(u),f.updateData(c,{parentId:this.fullId,depth:this.depth})):f=new d(this.root,this,null,c,{parentId:this.fullId,depth:this.depth}),this.children.set(u,f),f instanceof rt?this.edges.set(u,f):(this.ports.set(u,f),f instanceof e&&this.subgraphs.set(u,f))}}catch(wt){a=!0,s=wt}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}}var p=new Map,g=[],y=!0,v=!1,b=void 0;try{for(var m,w=this.edges.values()[Symbol.iterator]();!(y=(m=w.next()).done);y=!0){var x=m.value,S=this.findPort(x.from.split(":")),k=this.findPort(x.to.split(":")),C=this.findBelongingPort(x.from),O=this.findBelongingPort(x.to);if(!(S&&k&&C&&O))throw new Error("Cannot find starting or ending port of edge");p.has(C)||p.set(C,[]),p.has(O)||p.set(O,[]),p.get(C).push(O),p.get(O).push(C),g.push({from:S,to:k,fromBelonging:C,toBelonging:O,edge:x})}}catch(wt){v=!0,b=wt}finally{try{y||null==w.return||w.return()}finally{if(v)throw b}}var P=new Set(this.ports.values());this.layoutsData=[];var z=function t(e){P.delete(e);var n=i.layoutsData[i.layoutsData.length-1];n.ports.push(e);var o=p.get(e);if(o){var r=!0,a=!1,s=void 0;try{for(var h,l=o[Symbol.iterator]();!(r=(h=l.next()).done);r=!0){var c=h.value;P.has(c)&&t(c)}}catch(wt){a=!0,s=wt}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}}};while(P.size){var T=P.values().next().value,j={ports:[],edges:[],children:[]};this.layoutsData.push(j),z(T)}var M=new Map,_=!0,E=!1,L=void 0;try{for(var A,D=this.layoutsData[Symbol.iterator]();!(_=(A=D.next()).done);_=!0){var I=A.value,R=!0,F=!1,G=void 0;try{for(var Y,X=I.ports[Symbol.iterator]();!(R=(Y=X.next()).done);R=!0){var U=Y.value;M.set(U,I)}}catch(wt){F=!0,G=wt}finally{try{R||null==X.return||X.return()}finally{if(F)throw G}}}}catch(wt){E=!0,L=wt}finally{try{_||null==D.return||D.return()}finally{if(E)throw L}}for(var J=0,$=g;J<$.length;J++){var q=$[J],V=q.fromBelonging;M.get(V).edges.push(q)}var K=!0,Q=!1,Z=void 0;try{for(var tt,et=this.layoutsData[Symbol.iterator]();!(K=(tt=et.next()).done);K=!0){var nt=tt.value;nt.children=nt.ports.concat(nt.edges.map((function(t){return t.edge})))}}catch(wt){Q=!0,Z=wt}finally{try{K||null==et.return||et.return()}finally{if(Q)throw Z}}var it=B(t.component);this.componentLayout&&this.componentLayout.constructor===it||(this.componentLayout=new it(this,this));for(var ot=N(t.layout),st=H(t.physics),ht=[],lt=[],ct=0;ct<this.layoutsData.length;++ct){var dt=this.layouts&&ct<this.layouts.length&&this.layouts[ct].constructor===ot?this.layouts[ct]:new ot(this,this.componentLayout),ut=this.physics&&ct<this.physics.length&&this.physics[ct].constructor===st?this.physics[ct]:new st(this,dt),ft=!0,pt=!1,gt=void 0;try{for(var yt,vt=this.layoutsData[ct].children[Symbol.iterator]();!(ft=(yt=vt.next()).done);ft=!0){var bt=yt.value;bt.parent=dt}}catch(wt){pt=!0,gt=wt}finally{try{ft||null==vt.return||vt.return()}finally{if(pt)throw gt}}dt.solve(t.layout,this.layoutsData[ct],ct),ut.solve(t.physics,this.layoutsData[ct]),ht.push(dt),lt.push(ut)}this.layouts=ht,this.physics=lt,this.componentLayout.updateData(t.component);var mt=W(t);this.graphType&&this.graphType.constructor===mt?this.graphType.updateData(t):this.graphType=new mt(this,t)}},{key:"step",value:function(){var t=!1;if(this.subgraphs){var e=!0,n=!1,i=void 0;try{for(var o,r=this.subgraphs.values()[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;a.step()&&(t=!0)}}catch(f){n=!0,i=f}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}}if(this.physics){var s=!0,h=!1,l=void 0;try{for(var c,d=this.physics[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value;u.step()&&(t=!0)}}catch(f){h=!0,l=f}finally{try{s||null==d.return||d.return()}finally{if(h)throw l}}}return t}},{key:"render",value:function(){return{is:"group",draggable:!0,id:this.fullId,x:this.position.x,y:this.position.y,children:this.graphType.render()}}},{key:"findBelongingPort",value:function(t){if(t=t.split(":")[0],this.ports.has(t))return this.ports.get(t);var e=!0,n=!1,i=void 0;try{for(var o,r=this.subgraphs.values()[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;if(a.findBelongingPort(t))return a}}catch(s){n=!0,i=s}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}return null}},{key:"findPort",value:function(t){if(0===t.length)return this;if(this.ports.has(t[0])){var e=this.ports.get(t[0]);return e.findPort(t.slice(1))}var n=!0,i=!1,o=void 0;try{for(var r,a=this.subgraphs.values()[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value,h=s.findPort(t);if(h)return h}}catch(l){i=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return null}},{key:"getBoundingBoxSize",value:function(){return this.graphType.getBoundingBoxSize()}},{key:"distanceToBorder",value:function(t){return this.graphType.distanceToBorder(t)}}],[{key:"getId",value:function(t){if(!t.id)throw new Error("Missing id field for graph");return t.id}}]),e}(D),G=function(){function t(e){Object(s["a"])(this,t),this.parent=e}return Object(h["a"])(t,[{key:"getControlPoints",value:function(){return[]}}]),t}(),Y=function(t){function e(t,n){var i;if(Object(s["a"])(this,e),"straight"!==n.shape)throw new Error("Expect straight shape");return i=Object(l["a"])(this,Object(c["a"])(e).call(this,t)),i.updateData(n),i.fromPointerPos={x:0,y:0},i.toPointerPos={x:0,y:0},i.fromAngle=i.toAngle=0,i.lineFromPos={x:0,y:0},i.lineToPos={x:0,y:0},i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t){this.config=Object.assign({},e.defaultConfig,t)}},{key:"fullyUpdatePosition",value:function(){this.updatePosition()}},{key:"updatePosition",value:function(){if(!this.parent.parent)throw new Error("Top level edge cannot be rendered");var t=this.parent.fromPort,e=this.parent.toPort,n=t.getAbsolutePosition(this.parent.parent),i=e.getAbsolutePosition(this.parent.parent);this.fromAngle=Math.atan2(i.y-n.y,i.x-n.x),this.toAngle=Math.PI+this.fromAngle;var o=t.distanceToBorder(this.fromAngle),r=e.distanceToBorder(this.toAngle),a=n.x+o*Math.cos(this.fromAngle),s=n.y+o*Math.sin(this.fromAngle),h=i.x+r*Math.cos(this.toAngle),l=i.y+r*Math.sin(this.toAngle);this.fromPointerPos={x:a,y:s},this.config.fromPointer&&(a+=this.config.pointerWidth*Math.cos(this.fromAngle),s+=this.config.pointerWidth*Math.sin(this.fromAngle)),this.lineFromPos={x:a,y:s},this.toPointerPos={x:h,y:l},this.config.toPointer&&(h+=this.config.pointerWidth*Math.cos(this.toAngle),l+=this.config.pointerWidth*Math.sin(this.toAngle)),this.lineToPos={x:h,y:l}}},{key:"render",value:function(){var t=[];return this.config.fromPointer&&t.push({is:"pointer",x:this.fromPointerPos.x,y:this.fromPointerPos.y,angle:this.fromAngle,width:this.config.pointerWidth,height:this.config.pointerHeight,fill:this.config.pointerColor}),this.config.toPointer&&t.push({is:"pointer",x:this.toPointerPos.x,y:this.toPointerPos.y,angle:this.toAngle,width:this.config.pointerWidth,height:this.config.pointerHeight,fill:this.config.pointerColor}),t.unshift({is:"line",points:[this.lineFromPos.x,this.lineFromPos.y,this.lineToPos.x,this.lineToPos.y],stroke:this.config.lineColor,strokeWidth:this.config.lineWidth}),{is:"group",children:t}}}]),e}(G);Y.defaultConfig={fromPointer:!1,toPointer:!0,lineColor:"black",lineWidth:1,pointerColor:"black",pointerWidth:10,pointerHeight:15};var X=function(t){function e(t,n){var i;if(Object(s["a"])(this,e),"quadratic"!==n.shape)throw new Error("Expect quadratic shape");return i=Object(l["a"])(this,Object(c["a"])(e).call(this,t)),i.updateData(n),i.controlPoint=new T(i.parent.parent),i.fromPointerPos={x:0,y:0},i.toPointerPos={x:0,y:0},i.fromAngle=i.toAngle=0,i.lineFromPos={x:0,y:0},i.lineToPos={x:0,y:0},i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t){this.config=Object.assign({},e.defaultConfig,t)}},{key:"fullyUpdatePosition",value:function(){if(!this.parent.parent)throw new Error("Top level edge cannot be rendered");var t=this.parent.fromPort,e=this.parent.toPort,n=t.getAbsolutePosition(this.parent.parent),i=e.getAbsolutePosition(this.parent.parent);this.controlPoint.setPosition({x:.5*(n.x+i.x),y:.5*(n.y+i.y)}),this.updatePosition()}},{key:"updatePosition",value:function(){if(!this.parent.parent)throw new Error("Top level edge cannot be rendered");var t=this.parent.fromPort,e=this.parent.toPort,n=t.getAbsolutePosition(this.parent.parent),i=e.getAbsolutePosition(this.parent.parent),o=this.controlPoint.getPosition();this.fromAngle=Math.atan2(o.y-n.y,o.x-n.x),this.toAngle=Math.PI+Math.atan2(i.y-o.y,i.x-o.x);var r=t.distanceToBorder(this.fromAngle),a=e.distanceToBorder(this.toAngle),s=n.x+r*Math.cos(this.fromAngle),h=n.y+r*Math.sin(this.fromAngle),l=i.x+a*Math.cos(this.toAngle),c=i.y+a*Math.sin(this.toAngle);this.fromPointerPos={x:s,y:h},this.config.fromPointer&&(s+=this.config.pointerWidth*Math.cos(this.fromAngle),h+=this.config.pointerWidth*Math.sin(this.fromAngle)),this.lineFromPos={x:s,y:h},this.toPointerPos={x:l,y:c},this.config.toPointer&&(l+=this.config.pointerWidth*Math.cos(this.toAngle),c+=this.config.pointerWidth*Math.sin(this.toAngle)),this.lineToPos={x:l,y:c}}},{key:"getControlPoints",value:function(){return[this.controlPoint]}},{key:"render",value:function(){var t=[];return this.config.fromPointer&&t.push({is:"pointer",x:this.fromPointerPos.x,y:this.fromPointerPos.y,angle:this.fromAngle,width:this.config.pointerWidth,height:this.config.pointerHeight,fill:this.config.pointerColor}),this.config.toPointer&&t.push({is:"pointer",x:this.toPointerPos.x,y:this.toPointerPos.y,angle:this.toAngle,width:this.config.pointerWidth,height:this.config.pointerHeight,fill:this.config.pointerColor}),t.unshift({is:"quadraticLine",points:[this.lineFromPos.x,this.lineFromPos.y,this.controlPoint.getPosition().x,this.controlPoint.getPosition().y,this.lineToPos.x,this.lineToPos.y],stroke:this.config.lineColor,strokeWidth:this.config.lineWidth}),{is:"group",children:t}}}]),e}(G);function U(t){switch(t.shape){case"straight":return Y;default:return t.shape="quadratic",X}}X.defaultConfig={fromPointer:!1,toPointer:!0,lineColor:"black",lineWidth:1,pointerColor:"black",pointerWidth:10,pointerHeight:15};var J,$=function(){function t(e){Object(s["a"])(this,t),this.parent=e}return Object(h["a"])(t,[{key:"findPort",value:function(t){return null}}]),t}(),q=function(t){function e(t,n){var i;if(Object(s["a"])(this,e),"box"!==n.shape)throw new Error("Expect box shape");return i=Object(l["a"])(this,Object(c["a"])(e).call(this,t)),i.updateData(n),i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t){var n=Object.assign({},e.defaultConfig,t),i=!this.config||this.config.label!==n.label||this.config.fontSize!==n.fontSize||this.config.fontFamily!==n.fontFamily||this.config.lineHeight!==n.lineHeight,o=i||this.config.padding!==n.padding,r=o||this.config.strokeWidth!==n.strokeWidth;if(this.config=n,i){var a=this.parent.root.ctx;a.font="".concat(n.fontSize,"px ").concat(n.fontFamily);var s=n.label?n.label.split("\n"):[];this.textSize={width:Math.max.apply(Math,Object(C["a"])(s.map((function(t){return a.measureText(t).width}))).concat([0])),height:s.length*n.fontSize*n.lineHeight}}o&&(this.contentSize={width:this.textSize.width+2*n.padding,height:this.textSize.height+2*n.padding}),r&&(this.borderSize={width:this.contentSize.width+n.strokeWidth,height:this.contentSize.height+n.strokeWidth})}},{key:"render",value:function(){var t={is:"rect",x:-this.contentSize.width/2,y:-this.contentSize.height/2,width:this.contentSize.width,height:this.contentSize.height,fill:"filled"===this.config.style?this.config.fillColor:void 0,stroke:this.config.strokeWidth>0?this.config.strokeColor:void 0,strokeWidth:this.config.strokeWidth},e=[t];if(this.config.label){var n={is:"text",x:-this.contentSize.width/2,y:-this.contentSize.height/2,text:this.config.label,fontSize:this.config.fontSize,fontFamily:this.config.fontFamily,lineHeight:this.config.lineHeight,padding:this.config.padding,align:this.config.align};e.push(n)}return e}},{key:"getBoundingBoxSize",value:function(){return this.borderSize}},{key:"distanceToBorder",value:function(t){return Math.min(Math.abs(this.borderSize.width/2/Math.cos(t)),Math.abs(this.borderSize.height/2/Math.sin(t)))}}]),e}($);function V(t){var e=0,n=[];function i(){if(n.length)return n.pop();while(e<t.length&&" \t\n\r\v".indexOf(t[e])>-1)++e;if(e>=t.length)return{type:J.EOF};switch(t[e]){case"|":return++e,{type:J.VERTICAL_BAR};case"{":return++e,{type:J.LEFT_CURLY_BRACE};case"}":return++e,{type:J.RIGHT_CURLY_BRACE};case"<":return++e,{type:J.LEFT_ANGLE_BRACE};case">":return++e,{type:J.RIGHT_ANGLE_BRACE};default:var i="";while(e<t.length&&-1===" \t\n\r\v|{}<>".indexOf(t[e])){if("\\"===t[e]){if(++e,e===t.length)throw new Error("Unexpected end of escape sequence");switch(t[e]){case"n":i+="\n";break;default:i+=t[e]}}else i+=t[e];++e}return{type:J.STRING,text:i}}}function o(){var t,e=[r()];while((t=i()).type===J.VERTICAL_BAR)e.push(r());return n.push(t),{type:"record",children:e}}function r(){var t=i();if(t.type===J.LEFT_CURLY_BRACE){var e=o();if(i().type!==J.RIGHT_CURLY_BRACE)throw new Error("Expect '}'");return e}var r={type:"field"};if(t.type===J.LEFT_ANGLE_BRACE){if(t=i(),t.type===J.STRING){var a=t.text;while((t=i()).type===J.STRING)a+=" "+t.text;r.port=a}if(t.type!==J.RIGHT_ANGLE_BRACE)throw new Error("Expect '>'");t=i()}if(t.type===J.STRING){var s=t.text;while((t=i()).type===J.STRING)s+=" "+t.text;r.text=s}return n.push(t),r}var a=o();if(i().type!==J.EOF)throw new Error("Unexpected token");return a}q.defaultConfig={label:null,style:"solid",fillColor:"white",strokeColor:"black",strokeWidth:1,fontSize:12,fontFamily:"sans-serif",lineHeight:1.2,padding:4,align:"center"},function(t){t[t["EOF"]=0]="EOF",t[t["VERTICAL_BAR"]=1]="VERTICAL_BAR",t[t["LEFT_CURLY_BRACE"]=2]="LEFT_CURLY_BRACE",t[t["RIGHT_CURLY_BRACE"]=3]="RIGHT_CURLY_BRACE",t[t["LEFT_ANGLE_BRACE"]=4]="LEFT_ANGLE_BRACE",t[t["RIGHT_ANGLE_BRACE"]=5]="RIGHT_ANGLE_BRACE",t[t["STRING"]=6]="STRING"}(J||(J={}));var K=function(t){function e(t,n,i,o){var r,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return Object(s["a"])(this,e),r=Object(l["a"])(this,Object(c["a"])(e).call(this,t,n)),r.nodeType=i,r.updateData(o,a),r}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isField="field"===t.type,this.isHorizontal=n,this.isField){var i=t;i.port&&this.nodeType.getPorts().set(i.port,this);var o=this.root.ctx,r=this.nodeType.getConfig();this.label=i.text||"",o.font="".concat(r.fontSize,"px ").concat(r.fontFamily);var a=this.label?this.label.split("\n"):[];this.textSize={width:Math.max.apply(Math,Object(C["a"])(a.map((function(t){return o.measureText(t).width}))).concat([0])),height:a.length*r.fontSize*r.lineHeight},this.contentSize={width:this.textSize.width+2*r.padding,height:this.textSize.height+2*r.padding},this.cellSize={width:this.contentSize.width,height:this.contentSize.height}}else{var s=t;this.children=[];var h=!0,l=!1,c=void 0;try{for(var d,u=s.children[Symbol.iterator]();!(h=(d=u.next()).done);h=!0){var f=d.value,p=new e(this.root,this,this.nodeType,f,!n);this.children.push(p)}}catch(g){l=!0,c=g}finally{try{h||null==u.return||u.return()}finally{if(l)throw c}}this.cellSize=n?{width:this.children.map((function(t){return t.cellSize.width})).reduce((function(t,e){return t+e}),0),height:Math.max.apply(Math,Object(C["a"])(this.children.map((function(t){return t.cellSize.height}))))}:{width:Math.max.apply(Math,Object(C["a"])(this.children.map((function(t){return t.cellSize.width})))),height:this.children.map((function(t){return t.cellSize.height})).reduce((function(t,e){return t+e}),0)}}}},{key:"updateCellSize",value:function(t,e){if(!this.isField){if(!this.children)throw new Error("Non-field record should have children");if(this.isHorizontal){var n=(t-this.cellSize.width)/this.children.length,i=-t/2,o=!0,r=!1,a=void 0;try{for(var s,h=this.children[Symbol.iterator]();!(o=(s=h.next()).done);o=!0){var l=s.value;l.updateCellSize(l.cellSize.width+n,e),l.position={x:i+l.cellSize.width/2,y:0},i+=l.cellSize.width}}catch(b){r=!0,a=b}finally{try{o||null==h.return||h.return()}finally{if(r)throw a}}}else{var c=(e-this.cellSize.height)/this.children.length,d=-e/2,u=!0,f=!1,p=void 0;try{for(var g,y=this.children[Symbol.iterator]();!(u=(g=y.next()).done);u=!0){var v=g.value;v.updateCellSize(t,v.cellSize.height+c),v.position={x:0,y:d+v.cellSize.height/2},d+=v.cellSize.height}}catch(b){f=!0,p=b}finally{try{u||null==y.return||y.return()}finally{if(f)throw p}}}}this.cellSize={width:t,height:e}}},{key:"getCellSize",value:function(){return this.cellSize}},{key:"render",value:function(){var t;if(this.isField){var e=this.nodeType.getConfig();if(t=[{is:"rect",x:-this.cellSize.width/2,y:-this.cellSize.height/2,width:this.cellSize.width,height:this.cellSize.height,fill:"filled"===e.style?e.fillColor:void 0,stroke:e.strokeWidth>0?e.strokeColor:void 0,strokeWidth:e.strokeWidth}],this.label){if(!this.contentSize)throw new Error("Field record should have content size");t.push({is:"text",x:-this.contentSize.width/2,y:-this.contentSize.height/2,text:this.label,fontSize:e.fontSize,fontFamily:e.fontFamily,lineHeight:e.lineHeight,padding:e.padding,align:e.align})}}else{if(!this.children)throw new Error("Non-field record should have children");t=this.children.map((function(t){var e=t.getPosition();return{is:"group",x:e.x,y:e.y,children:t.render()}}))}return t}},{key:"getBoundingBoxSize",value:function(){var t=this.nodeType.getConfig();return{width:this.cellSize.width+t.strokeWidth,height:this.cellSize.height+t.strokeWidth}}},{key:"distanceToBorder",value:function(t){var e=this.getBoundingBoxSize();return Math.min(Math.abs(e.width/2/Math.cos(t)),Math.abs(e.height/2/Math.sin(t)))}}]),e}(D),Q=function(t){function e(t,n){var i;if(Object(s["a"])(this,e),"record"!==n.shape)throw new Error("Expect record shape");return i=Object(l["a"])(this,Object(c["a"])(e).call(this,t)),i.updateData(n),i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"getConfig",value:function(){return this.config}},{key:"getPorts",value:function(){return this.ports}},{key:"updateData",value:function(t){var n=Object.assign({},e.defaultConfig,t),i=!this.config||this.config.label!==n.label||this.config.direction!==n.direction||this.config.fontSize!==n.fontSize||this.config.fontFamily!==n.fontFamily||this.config.lineHeight!==n.lineHeight||this.config.padding!==n.padding,o=i||this.config.strokeWidth!==n.strokeWidth;if(this.config=n,i){var r=V(t.label);this.ports=new Map,this.root=new K(this.parent.root,this.parent,this,r,"horizontal"===this.config.direction);var a=this.root.getCellSize();this.root.updateCellSize(a.width,a.height)}if(o){var s=this.root.getCellSize();this.borderSize={width:s.width+this.config.strokeWidth,height:s.height+this.config.strokeWidth}}}},{key:"render",value:function(){return this.root.render()}},{key:"findPort",value:function(t){if(1===t.length){var e=this.ports.get(t[0]);return e||null}return null}},{key:"getBoundingBoxSize",value:function(){return this.borderSize}},{key:"distanceToBorder",value:function(t){return Math.min(Math.abs(this.borderSize.width/2/Math.cos(t)),Math.abs(this.borderSize.height/2/Math.sin(t)))}}]),e}($);Q.defaultConfig={label:"",direction:"horizontal",style:"solid",fillColor:"white",strokeColor:"black",strokeWidth:1,fontSize:12,fontFamily:"sans-serif",lineHeight:1.2,padding:4,align:"center"};n("456d"),n("7f7f");var Z=n("c51a"),tt=n.n(Z),et=function(t){function e(t,n,i,o){var r;return Object(s["a"])(this,e),r=Object(l["a"])(this,Object(c["a"])(e).call(this,t,n)),r.nodeType=i,r.updateData(o),r}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t){if(this.config={rowSpan:1,columnSpan:1,border:this.nodeType.getTableConfig().cellBorder,backgroundColor:"white"},t.attributes)for(var e=0,n=Object.keys(t.attributes);e<n.length;e++){var i=n[e],o=t.attributes[i];switch(i.toLowerCase()){case"rowspan":this.config.rowSpan=parseInt(o,10);break;case"colspan":this.config.columnSpan=parseInt(o,10);break;case"border":this.config.border=parseInt(o,10);break;case"bgcolor":this.config.backgroundColor=o;break;case"port":this.port=o;break;default:throw new Error("Unknown attribute for table cell")}}function r(t){switch(t.type){case"text":return"string"===typeof t.text?t.text:"";case"element":return t.name&&"br"===t.name.toLowerCase()?"\n":t.elements?t.elements.map(r).join(""):"";default:throw new Error("Unknown element type")}}this.label=r(t);var a=this.nodeType.getConfig(),s=this.nodeType.getTableConfig(),h=this.root.ctx;h.font="".concat(a.fontSize,"px ").concat(a.fontFamily);var l=this.label?this.label.split("\n"):[];this.textSize={width:Math.max.apply(Math,Object(C["a"])(l.map((function(t){return h.measureText(t).width}))).concat([0])),height:l.length*a.fontSize*a.lineHeight},this.contentSize={width:this.textSize.width+2*s.cellPadding,height:this.textSize.height+2*s.cellPadding},this.cellSize={width:this.contentSize.width,height:this.contentSize.height},this.rowOffset=0,this.columnOffset=0}},{key:"render",value:function(){var t={is:"rect",x:-this.cellSize.width/2,y:-this.cellSize.height/2,width:this.cellSize.width,height:this.cellSize.height,fill:this.config.backgroundColor,stroke:this.config.border>0?"black":void 0,strokeWidth:this.config.border},e=[t];if(this.label){var n=this.nodeType.getConfig(),i={is:"text",x:-this.contentSize.width/2,y:-this.contentSize.height/2,text:this.label,fontSize:n.fontSize,fontFamily:n.fontFamily,lineHeight:n.lineHeight,padding:this.nodeType.getTableConfig().cellPadding,align:"center"};e.push(i)}return{is:"group",x:this.position.x,y:this.position.y,children:e}}},{key:"getConfig",value:function(){return this.config}},{key:"getPort",value:function(){return this.port}},{key:"getBoundingBoxSize",value:function(){return{width:this.cellSize.width+this.config.border,height:this.cellSize.height+this.config.border}}},{key:"distanceToBorder",value:function(t){var e=this.getBoundingBoxSize();return Math.min(Math.abs(e.width/2/Math.cos(t)),Math.abs(e.height/2/Math.sin(t)))}}]),e}(D),nt=function(t){function e(t,n){var i;if(Object(s["a"])(this,e),"table"!==n.shape)throw new Error("Expect record shape");return i=Object(l["a"])(this,Object(c["a"])(e).call(this,t)),i.updateData(n),i}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t){var n=Object.assign({},e.defaultConfig,t),i=!this.config||this.config.label!==n.label||this.config.fontSize!==n.fontSize||this.config.fontFamily!==n.fontFamily||this.config.lineHeight!==n.lineHeight;if(this.config=n,i){var o=tt.a.xml2js(this.config.label);if(!o.elements||!o.elements[0]||!o.elements[0].name||"table"!==o.elements[0].name.toLowerCase())throw new Error("Expect table element");var r=o.elements[0];if(this.tableConfig={border:0,cellBorder:1,cellSpacing:0,cellPadding:4},r.attributes)for(var a=0,s=Object.keys(r.attributes);a<s.length;a++){var h=s[a],l=r.attributes[h];switch(h.toLowerCase()){case"border":this.tableConfig.border=parseInt(l,10);break;case"cellborder":this.tableConfig.cellBorder=parseInt(l,10);break;case"cellspacing":this.tableConfig.cellSpacing=parseInt(l,10);break;case"cellpadding":this.tableConfig.cellPadding=parseInt(l,10);break;default:throw new Error("Unknown attribute for table")}}this.table=[],this.ports=new Map;var c=0,d=0,u=!0;if(r.elements){var f=!0,p=!1,g=void 0;try{for(var y,v=r.elements[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){var b=y.value;if(!b.name||"tr"!==b.name.toLowerCase())throw new Error("Expect tr element");var m=[];if(b.elements){var w=!0,x=!1,S=void 0;try{for(var k,C=b.elements[Symbol.iterator]();!(w=(k=C.next()).done);w=!0){var O=k.value;if(!O.name||"td"!==O.name.toLowerCase())throw new Error("Expect td element");var P=new et(this.parent.root,this.parent,this,O),z=P.getPort();z&&this.ports.set(z,P),u&&(d+=P.getConfig().columnSpan),m.push(P)}}catch(Ct){x=!0,S=Ct}finally{try{w||null==C.return||C.return()}finally{if(x)throw S}}}++c,u&&(u=!1),this.table.push(m)}}catch(Ct){p=!0,g=Ct}finally{try{f||null==v.return||v.return()}finally{if(p)throw g}}}for(var T=[],j=0;j<c;++j)T.push(Array(d).fill(null));for(var M=0;M<c;++M){var N=0,_=!0,E=!1,B=void 0;try{for(var L,A=this.table[M][Symbol.iterator]();!(_=(L=A.next()).done);_=!0){var W=L.value;while(N<d&&T[M][N])++N;W.rowOffset=M,W.columnOffset=N;for(var D=W.getConfig(),I=D.rowSpan,R=D.columnSpan,H=(W.contentSize.height-(I-1)*this.tableConfig.cellSpacing)/I,F=(W.contentSize.width-(R-1)*this.tableConfig.cellSpacing)/R,G=0;G<I;++G)for(var Y=0;Y<R;++Y)T[M+G][N+Y]={width:F,height:H};N+=R}}catch(Ct){E=!0,B=Ct}finally{try{_||null==A.return||A.return()}finally{if(E)throw B}}}for(var X=[],U=[],J=0;J<c;++J){for(var $=-1/0,q=0;q<d;++q)T[J][q].height>$&&($=T[J][q].height);X.push($)}for(var V=0;V<d;++V){for(var K=-1/0,Q=0;Q<c;++Q)T[Q][V].width>K&&(K=T[Q][V].width);U.push(K)}for(var Z=[0],nt=[0],it=0;it<c;++it)Z.push(Z[it]+X[it]+this.tableConfig.cellSpacing);for(var ot=0;ot<d;++ot)nt.push(nt[ot]+U[ot]+this.tableConfig.cellSpacing);this.contentSize={width:nt[nt.length-1]-this.tableConfig.cellSpacing,height:Z[Z.length-1]-this.tableConfig.cellSpacing};var rt=!0,at=!1,st=void 0;try{for(var ht,lt=this.table[Symbol.iterator]();!(rt=(ht=lt.next()).done);rt=!0){var ct=ht.value,dt=!0,ut=!1,ft=void 0;try{for(var pt,gt=ct[Symbol.iterator]();!(dt=(pt=gt.next()).done);dt=!0){var yt=pt.value,vt=yt.getConfig(),bt=(I=vt.rowSpan,R=vt.columnSpan,yt.rowOffset),mt=yt.columnOffset,wt=nt[mt],xt=Z[bt],St=nt[mt+R]-wt-this.tableConfig.cellSpacing,kt=Z[bt+I]-xt-this.tableConfig.cellSpacing;yt.setPosition({x:wt+St/2-this.contentSize.width/2,y:xt+kt/2-this.contentSize.height/2}),yt.cellSize={width:St,height:kt}}}catch(Ct){ut=!0,ft=Ct}finally{try{dt||null==gt.return||gt.return()}finally{if(ut)throw ft}}}}catch(Ct){at=!0,st=Ct}finally{try{rt||null==lt.return||lt.return()}finally{if(at)throw st}}this.borderSize={width:this.contentSize.width+this.tableConfig.border+2*this.tableConfig.cellSpacing,height:this.contentSize.height+this.tableConfig.border+2*this.tableConfig.cellSpacing}}}},{key:"render",value:function(){var t=[];t.push({is:"rect",x:-this.contentSize.width/2-this.tableConfig.cellSpacing,y:-this.contentSize.height/2-this.tableConfig.cellSpacing,width:this.contentSize.width+2*this.tableConfig.cellSpacing,height:this.contentSize.height+2*this.tableConfig.cellSpacing,fill:"white",stroke:this.tableConfig.border>0?"black":void 0,strokeWidth:this.tableConfig.border});var e=!0,n=!1,i=void 0;try{for(var o,r=this.table[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value,s=!0,h=!1,l=void 0;try{for(var c,d=a[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value;t.push(u.render())}}catch(f){h=!0,l=f}finally{try{s||null==d.return||d.return()}finally{if(h)throw l}}}}catch(f){n=!0,i=f}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}return t}},{key:"getConfig",value:function(){return this.config}},{key:"getTableConfig",value:function(){return this.tableConfig}},{key:"findPort",value:function(t){if(1===t.length){var e=this.ports.get(t[0]);return e||null}return null}},{key:"getBoundingBoxSize",value:function(){return this.borderSize}},{key:"distanceToBorder",value:function(t){return Math.min(Math.abs(this.borderSize.width/2/Math.cos(t)),Math.abs(this.borderSize.height/2/Math.sin(t)))}}]),e}($);function it(t){switch(t.shape){case"table":return nt;case"record":return Q;default:return t.shape="box",q}}nt.defaultConfig={label:"",fontSize:12,fontFamily:"sans-serif",lineHeight:1.2};var ot=function(t){function e(t,n,i,o,r){var a;if(Object(s["a"])(this,e),"node"!==o.type)throw new Error("Expect node type");return a=Object(l["a"])(this,Object(c["a"])(e).call(this,t,i)),a.graph=n,a.updateData(o,r),a}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"updateData",value:function(t,n){this.id=e.getId(t),this.depth=n?n.depth+1:0,this.fullId=n?"".concat(n.parentId,":").concat(this.id):this.id,this.fromEdges=new Set,this.toEdges=new Set;var i=it(t);this.nodeType&&this.nodeType.constructor===i?this.nodeType.updateData(t):this.nodeType=new i(this,t)}},{key:"render",value:function(){return{is:"group",draggable:!0,id:this.fullId,x:this.position.x,y:this.position.y,children:this.nodeType.render()}}},{key:"findPort",value:function(t){return 0===t.length?this:this.nodeType.findPort(t)}},{key:"getBoundingBoxSize",value:function(){return this.nodeType.getBoundingBoxSize()}},{key:"distanceToBorder",value:function(t){return this.nodeType.distanceToBorder(t)}}],[{key:"getId",value:function(t){if(!t.id)throw new Error("Missing id field for node");return t.id}}]),e}(D),rt=function(){function t(e,n,i,o,r){if(Object(s["a"])(this,t),"edge"!==o.type)throw new Error("Expect edge type");this.root=e,this.graph=n,this.parent=i,this.updateData(o,r)}return Object(h["a"])(t,[{key:"updateData",value:function(e,n){if(this.id=t.getId(e),this.from=e.from,this.to=e.to,this.depth=n?n.depth+1:0,this.fullId=n?"".concat(n.parentId,":").concat(this.id):this.id,!this.graph)throw new Error("Top level edge cannot be rendered");var i=this.graph.findPort(this.from.split(":")),o=this.graph.findPort(this.to.split(":"));if(!i||!o)throw new Error("Unknown start or end port for edge");this.fromPort=i,this.toPort=o,this.fromNodeOrGraph&&this.fromNodeOrGraph.fromEdges.delete(this),this.toNodeOrGraph&&this.toNodeOrGraph.toEdges.delete(this);var r=t.findParentNodeOrGraph(i),a=t.findParentNodeOrGraph(o);if(!r||!a)throw new Error("Unknown start or end node for edge");r.fromEdges.add(this),a.toEdges.add(this),this.fromNodeOrGraph=r,this.toNodeOrGraph=a;var s=U(e);this.edgeType&&this.edgeType.constructor===s?this.edgeType.updateData(e):this.edgeType=new s(this,e)}},{key:"fullyUpdatePosition",value:function(){this.edgeType.fullyUpdatePosition()}},{key:"updatePosition",value:function(){this.edgeType.updatePosition()}},{key:"getControlPoints",value:function(){return this.edgeType.getControlPoints()}},{key:"render",value:function(){return this.edgeType.render()}}],[{key:"getId",value:function(t){return t.id||"".concat(t.from,"-").concat(t.to)}},{key:"findParentNodeOrGraph",value:function(t){while(t&&!(t instanceof F||t instanceof ot))t=t.parent;return t}}]),t}();function at(t){switch(t.type){case"node":return ot;case"edge":return rt;case"graph":return F;default:throw new Error("Unknown renderable object")}}var st='digraph stdThreadJoin {\nlabel=" VFG of stdThreadJoin"\ngraph [rankdir="LR"]\nsubgraph cluster_input {\nlabel="Inputs"\nstyle=filled\ncolor=black\nfillcolor=darkolivegreen1\nN912 [label="N912\\n[arg:stdThreadJoin_0]", style=filled, fillcolor="cyan3", shape=box]\nN913 [label="N913\\n[arg:stdThreadJoin_0]*", style=filled, fillcolor="cyan3", shape=box]\n} # end of input\nsubgraph cluster_output {\nlabel="Outputs"\nstyle=filled\ncolor=black\nfillcolor=goldenrod1\nN940 [label="N940\\n_", style=filled, fillcolor="cornflowerblue", shape=box]\n} # end of output\n# body nodes\nN919 [label="N919\\n&dummy", style=filled, fillcolor="cyan3", shape=box]\nN925 [label="N925\\n0", style=filled, fillcolor="lightgrey", shape=box]\nN926 [label=<<table  border=\'0\' cellspacing=\'0\'><tr><td port=\'top\' bgcolor=\'palegreen\' border=\'1\'>N926(%6)<br/>getelementptr</td></tr><tr><td port=\'op_1\' border=\'1\'>N912</td></tr><tr><td port=\'op_2\' border=\'1\'>N925</td></tr><tr><td port=\'op_3\' border=\'1\'>N925</td></tr></table>>, shape=none]\nN927 [label="N927\\nDEREF", style=filled, fillcolor="gainsboro", shape=box]\nN928 [label="N928\\nstdThreadJoin::6*", style=filled, fillcolor="cyan3", shape=box]\nN930 [label="N930\\n[arg:_pthread_join_0]", style=filled, fillcolor="cornflowerblue", shape=box]\nN931 [label="N931\\n[arg:_pthread_join_1]", style=filled, fillcolor="cornflowerblue", shape=box]\nN932 [label="N932\\nstdThreadJoin::8", style=filled, fillcolor="cyan3", shape=box]\nN933 [label=<<table  border=\'0\' cellspacing=\'0\'><tr><td port=\'top\' bgcolor=\'palegreen\' border=\'1\'>N933(%9)<br/>icmp ne</td></tr><tr><td port=\'op_1\' border=\'1\'>N925</td></tr><tr><td port=\'op_2\' border=\'1\'>N932</td></tr></table>>, shape=none]\nN934 [label="N934\\n1", style=filled, fillcolor="lightgrey", shape=box]\nN937 [label="N937\\n&gamma;", style=filled, fillcolor="darksalmon", shape=box]\n# proxy\nP595 [label="",style=filled,color=crimson,fillcolor=crimson,shape=circle,height=0.05,width=0.05]\nP596 [label="",style=filled,color=crimson,fillcolor=crimson,shape=circle,height=0.05,width=0.05]\n# end of body\nN937 -> N940\nN912 -> N926:op_1\nN925 -> N926:op_2\nN925 -> N926:op_3\nN926:top -> N927\nN928 -> N930\nN919 -> N931\nN925 -> N933:op_1\nN932 -> N933:op_2\nN925 -> P595 [arrowhead=none]\nP595 -> N937\nN933:top -> P595 [label="N933",style=dotted,color=crimson]\nN934 -> P596 [arrowhead=none]\nP596 -> N937\nN933:top -> P596 [label="!(N933)",style=dotted,color=crimson]\nCS_31 [shape=record,style=bold,label="_pthread_join | { {<cs_id_in_0> N930 | <cs_id_in_1> N931} | {<cs_id_out_0> N932} }"]\nN930 -> CS_31:cs_id_in_0\nN931 -> CS_31:cs_id_in_1\nCS_31:cs_id_out_0 -> N932\n}\n',ht='{\n  "type": "graph",\n  "id": "stdThreadJoin",\n  "label": "VFG of stdThreadJoin",\n  "layout": {\n    "type": "KamadaKawai",\n    "springLength": 150,\n    "direction": "LR"\n  },\n  "children": [\n    {\n      "type": "graph",\n      "id": "cluster_input",\n      "label": "Inputs",\n      "style": "filled",\n      "fillColor": "darkolivegreen",\n      "strokeWidth": 1,\n      "strokeColor": "black",\n      "children": [\n        {\n          "type": "node",\n          "id": "N912",\n          "label": "N912\\n[arg:stdThreadJoin_0]",\n          "style": "filled",\n          "fillColor": "cyan",\n          "shape": "box"\n        },\n        {\n          "type": "node",\n          "id": "N913",\n          "label": "N913\\n[arg:stdThreadJoin_0]*",\n          "style": "filled",\n          "fillColor": "cyan",\n          "shape": "box"\n        }\n      ]\n    },\n    {\n      "type": "graph",\n      "id": "cluster_output",\n      "label": "Outputs",\n      "style": "filled",\n      "fillColor": "goldenrod",\n      "strokeWidth": 1,\n      "strokeColor": "black",\n      "children": [\n        {\n          "type": "node",\n          "id": "N940",\n          "label": "N940\\n_",\n          "style": "filled",\n          "fillColor": "cornflowerblue",\n          "shape": "box"\n        }\n      ]\n    },\n    {\n      "type": "node",\n      "id": "N919",\n      "label": "N919\\n&dummy",\n      "style": "filled",\n      "fillColor": "cyan",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N925",\n      "label": "N925\\n0",\n      "style": "filled",\n      "fillColor": "lightgrey",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N926",\n      "label": "<table  border=\'0\' cellspacing=\'0\'><tr><td port=\'top\' bgcolor=\'palegreen\' border=\'1\'>N926(%6)<br/>getelementptr</td></tr><tr><td port=\'op_1\' border=\'1\'>N912</td></tr><tr><td port=\'op_2\' border=\'1\'>N925</td></tr><tr><td port=\'op_3\' border=\'1\'>N925</td></tr></table>",\n      "shape": "table"\n    },\n    {\n      "type": "node",\n      "id": "N927",\n      "label": "N927\\nDEREF",\n      "style": "filled",\n      "fillColor": "gainsboro",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N928",\n      "label": "N928\\nstdThreadJoin::6*",\n      "style": "filled",\n      "fillColor": "cyan",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N930",\n      "label": "N930\\n[arg:_pthread_join_0]",\n      "style": "filled",\n      "fillColor": "cornflowerblue",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N931",\n      "label": "N931\\n[arg:_pthread_join_1]",\n      "style": "filled",\n      "fillColor": "cornflowerblue",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N932",\n      "label": "N932\\nstdThreadJoin::8",\n      "style": "filled",\n      "fillColor": "cyan",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N933",\n      "label": "<table  border=\'0\' cellspacing=\'0\'><tr><td port=\'top\' bgcolor=\'palegreen\' border=\'1\'>N933(%9)<br/>icmp ne</td></tr><tr><td port=\'op_1\' border=\'1\'>N925</td></tr><tr><td port=\'op_2\' border=\'1\'>N932</td></tr></table>",\n      "shape": "table"\n    },\n    {\n      "type": "node",\n      "id": "N934",\n      "label": "N934\\n1",\n      "style": "filled",\n      "fillColor": "lightgrey",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "N937",\n      "label": "N937\\n&gamma;",\n      "style": "filled",\n      "fillColor": "darksalmon",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "P595",\n      "label": "",\n      "style": "filled",\n      "color": "crimson",\n      "fillColor": "crimson",\n      "shape": "circle",\n      "radius": 0.025\n    },\n    {\n      "type": "node",\n      "id": "P596",\n      "label": "",\n      "style": "filled",\n      "color": "crimson",\n      "fillColor": "crimson",\n      "shape": "circle",\n      "radius": 0.025\n    },\n    {\n      "type": "edge",\n      "from": "N937",\n      "to": "N940"\n    },\n    {\n      "type": "edge",\n      "from": "N912",\n      "to": "N926:op_1"\n    },\n    {\n      "type": "edge",\n      "from": "N925",\n      "to": "N926:op_2"\n    },\n    {\n      "type": "edge",\n      "from": "N925",\n      "to": "N926:op_3"\n    },\n    {\n      "type": "edge",\n      "from": "N926:top",\n      "to": "N927"\n    },\n    {\n      "type": "edge",\n      "from": "N928",\n      "to": "N930"\n    },\n    {\n      "type": "edge",\n      "from": "N919",\n      "to": "N931"\n    },\n    {\n      "type": "edge",\n      "from": "N925",\n      "to": "N933:op_1"\n    },\n    {\n      "type": "edge",\n      "from": "N932",\n      "to": "N933:op_2"\n    },\n    {\n      "type": "edge",\n      "from": "N925",\n      "to": "P595",\n      "arrowHead": "none"\n    },\n    {\n      "type": "edge",\n      "from": "P595",\n      "to": "N937"\n    },\n    {\n      "type": "edge",\n      "from": "N933:top",\n      "to": "P595",\n      "label": "N933",\n      "style": "dotted",\n      "color": "crimson"\n    },\n    {\n      "type": "edge",\n      "from": "N934",\n      "to": "P596",\n      "arrowHead": "none"\n    },\n    {\n      "type": "edge",\n      "from": "P596",\n      "to": "N937"\n    },\n    {\n      "type": "edge",\n      "from": "N933:top",\n      "to": "P596",\n      "label": "!(N933)",\n      "style": "dotted",\n      "color": "crimson"\n    },\n    {\n      "type": "node",\n      "id": "CS_31",\n      "shape": "record",\n      "style": "bold",\n      "direction": "vertical",\n      "label": "_pthread_join | { {<cs_id_in_0> N930 | <cs_id_in_1> N931} | {<cs_id_out_0> N932} }"\n    },\n    {\n      "type": "edge",\n      "from": "N930",\n      "to": "CS_31:cs_id_in_0"\n    },\n    {\n      "type": "edge",\n      "from": "N931",\n      "to": "CS_31:cs_id_in_1"\n    },\n    {\n      "type": "edge",\n      "from": "CS_31:cs_id_out_0",\n      "to": "N932"\n    }\n  ]\n}\n',lt='{\n  "type": "node",\n  "id": "N926",\n  "label": "hello\\\\nworld |{ b |{c|<here> d|e}| f}| g | h",\n  "shape": "record"\n}\n',ct='{\n  "type": "graph",\n  "id": "stdThreadJoin",\n  "label": "VFG of stdThreadJoin",\n  "layout": {\n    "type": "KamadaKawai",\n    "springLength": 150\n  },\n  "component": {\n    "direction": "LR"\n  },\n  "children": [\n    {\n      "type": "graph",\n      "id": "cluster_input",\n      "component": {\n        "direction": "TD"\n      },\n      "label": "Inputs",\n      "style": "filled",\n      "fillColor": "darkolivegreen",\n      "strokeWidth": 1,\n      "strokeColor": "black",\n      "children": [\n        {\n          "type": "node",\n          "id": "N921",\n          "label": "N912\\n[arg:stdThreadJoin_0]",\n          "style": "filled",\n          "fillColor": "cyan",\n          "shape": "box"\n        },\n        {\n          "type": "node",\n          "id": "N913",\n          "label": "N913\\n[arg:stdThreadJoin_0]*",\n          "style": "filled",\n          "fillColor": "cyan",\n          "shape": "box"\n        }\n      ]\n    },\n    {\n      "type": "graph",\n      "id": "cluster_output",\n      "label": "Outputs",\n      "style": "filled",\n      "fillColor": "goldenrod",\n      "strokeWidth": 1,\n      "strokeColor": "black",\n      "children": [\n        {\n          "type": "node",\n          "id": "N940",\n          "label": "N940\\n_",\n          "style": "filled",\n          "fillColor": "cornflowerblue",\n          "shape": "box"\n        }\n      ]\n    }\n  ]\n}\n',dt='{\n  "type": "graph",\n  "id": "cluster_input",\n  "layout": {\n    "type": "KamadaKawai",\n    "direction": "LR"\n  },\n  "children": [\n    {\n      "type": "node",\n      "id": "0",\n      "label": "0",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "1",\n      "label": "1",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "2",\n      "label": "2",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "3",\n      "label": "3",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "4",\n      "label": "4",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "5",\n      "label": "5",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "6",\n      "label": "6",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "7",\n      "label": "7",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "8",\n      "label": "8",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "9",\n      "label": "9",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "10",\n      "label": "10",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "11",\n      "label": "11",\n      "shape": "box"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "0",\n      "to": "1"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "1",\n      "to": "2"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "2",\n      "to": "0"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "0",\n      "to": "3"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "3",\n      "to": "2"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "3",\n      "to": "4"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "4",\n      "to": "0"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "4",\n      "to": "5"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "5",\n      "to": "0"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "5",\n      "to": "1"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "1",\n      "to": "8"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "8",\n      "to": "5"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "5",\n      "to": "7"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "7",\n      "to": "4"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "4",\n      "to": "6"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "6",\n      "to": "3"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "3",\n      "to": "10"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "10",\n      "to": "2"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "2",\n      "to": "9"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "9",\n      "to": "1"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "8",\n      "to": "9"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "9",\n      "to": "10"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "10",\n      "to": "6"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "6",\n      "to": "7"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "7",\n      "to": "8"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "11",\n      "to": "8"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "11",\n      "to": "9"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "11",\n      "to": "10"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "11",\n      "to": "6"\n    },\n    {\n      "type": "edge",\n      "shape": "straight",\n      "from": "11",\n      "to": "7"\n    }\n  ]\n}\n',ut='{\n  "type": "node",\n  "id": "N926",\n  "label": "<TABLE BORDER=\\"1\\" CELLBORDER=\\"1\\" CELLSPACING=\\"2\\" CELLPADDING=\\"4\\"><TR><TD ROWSPAN=\\"3\\"><FONT COLOR=\\"red\\">hello</FONT><BR/>world</TD><TD COLSPAN=\\"3\\">b</TD><TD ROWSPAN=\\"3\\" BGCOLOR=\\"lightgrey\\">g</TD><TD ROWSPAN=\\"3\\">h</TD></TR><TR><TD>c</TD><TD PORT=\\"here\\">d</TD><TD>e</TD></TR><TR><TD COLSPAN=\\"3\\">f</TD></TR></TABLE>",\n  "shape": "table"\n}\n',ft='{\n  "type": "graph",\n  "id": "hello",\n  "children": [\n    {\n      "type": "node",\n      "id": "0",\n      "label": "0",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "1",\n      "label": "1",\n      "shape": "box"\n    },\n    {\n      "type": "node",\n      "id": "2",\n      "label": "2",\n      "shape": "box"\n    },\n    {\n      "type": "edge",\n      "from": "0",\n      "to": "1",\n      "lineWidth": 5,\n      "pointerWidth": 20,\n      "pointerHeight": 30\n    },\n    {\n      "type": "edge",\n      "from": "1",\n      "to": "2",\n      "shape": "straight"\n    }\n  ]\n}\n',pt=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).call(this)),t.ctx=document.createElement("canvas").getContext("2d"),t.child=null,t.stepTimer=setInterval((function(){t.child instanceof F&&t.child.step()&&t.informRender()}),1e3/60),t.fixed=[],t}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"findPort",value:function(t){var e=t.split(":");return this.child?this.child.id!==e[0]?null:this.child.findPort(e.slice(1)):null}},{key:"setFixed",value:function(t){var e=this;this.clearFixed(),this.fixed=t.map((function(t){var n=e.findPort(t);if(null===n)throw new Error("Cannot find the port");if(!(n instanceof F||n instanceof ot))throw new Error("Wrong type of port");return n.fixed=!0,n}))}},{key:"clearFixed",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,o=this.fixed[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;r.fixed=!1}}catch(a){e=!0,n=a}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}}},{key:"movePort",value:function(t,e){var n=this.findPort(t);if(null===n)throw new Error("Cannot find the port");if(!(n instanceof F||n instanceof ot))throw new Error("Wrong type of port");n.getPosition().x+=e.deltaX,n.getPosition().y+=e.deltaY;for(var i=0,o=[].concat(Object(C["a"])(n.fromEdges),Object(C["a"])(n.toEdges));i<o.length;i++){var r=o[i];r.updatePosition()}this.informRender()}},{key:"updateData",value:function(t){var e=at(t);if(this.child&&this.child.constructor===e)this.child.updateData(t,null);else{var n=new e(this,null,null,t,null);if(!(n instanceof D))throw new Error("Root element must be renderable port");this.child=n}this.informRender()}},{key:"fullyUpdateData",value:function(t){var e=new(at(t))(this,null,null,t,null);if(!(e instanceof D))throw new Error("Root element must be renderable port");this.child=e,this.informRender()}},{key:"informRender",value:function(){this.child&&this.emit("render",[this.child.render()])}}]),e}(O),gt=new pt;window.globalRoot=gt;var yt={json:function(t){return JSON.parse(t)},graphviz:function(){throw new Error("Not implemented")}},vt=[{name:"stdThreadJoinGv",parser:"graphviz",content:st},{name:"stdThreadJoinJson",parser:"json",content:ht},{name:"record",parser:"json",content:lt},{name:"subgraph",parser:"json",content:ct},{name:"icosahedronJson",parser:"json",content:dt},{name:"table",parser:"json",content:ut},{name:"edge",parser:"json",content:ft}],bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{width:t.width,height:t.height,position:"relative"}},[t.enableHit?n("canvas",{ref:"hitCanvas",staticStyle:{position:"absolute",display:"none"}}):t._e(),n("canvas",t._g({ref:"canvas",staticStyle:{position:"absolute"}},t.$listeners))])},mt=[],wt=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.context=null,t.hitContext=null,t.hitColorMap={},t.hitIdMap={},t}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"mounted",value:function(){this.context=this.$refs.canvas.getContext("2d"),this.$refs.canvas.width=this.width,this.$refs.canvas.height=this.height,this.enableHit&&(this.hitContext=this.$refs.hitCanvas.getContext("2d"),this.$refs.hitCanvas.width=this.width,this.$refs.hitCanvas.height=this.height)}},{key:"generateHitColor",value:function(t){if(this.hitIdMap[t])return this.hitIdMap[t];while(1){var e=Math.round(255*Math.random()),n=Math.round(255*Math.random()),i=Math.round(255*Math.random()),o="rgb(".concat(e,",").concat(n,",").concat(i,")");if(!this.hitColorMap[o])return this.hitColorMap[o]=t,this.hitIdMap[t]=o,o}}},{key:"updateCanvas",value:function(){var t=this;if(this.context){var e=this.context,n=this.hitContext;e.clearRect(0,0,this.width,this.height),n&&(n.clearRect(0,0,this.width,this.height),this.hitColorMap={},this.hitIdMap={});var i=function i(o,r,a){var s=o.draggable||r,h=o.id||a;switch(o.is){case"group":if(e.save(),e.translate(o.x||0,o.y||0),e.scale(o.scaleX||1,o.scaleY||1),n&&(n.save(),n.translate(o.x||0,o.y||0),n.scale(o.scaleX||1,o.scaleY||1)),o.children){var l=!0,c=!1,d=void 0;try{for(var u,f=o.children[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var p=u.value;i(p,o.draggable||r,o.id||a)}}catch(W){c=!0,d=W}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}}e.restore(),n&&n.restore();break;case"rect":if(e.beginPath(),e.rect(o.x||0,o.y||0,o.width||0,o.height||0),o.fill&&(e.fillStyle=o.fill,e.fill()),o.stroke&&(e.lineWidth=o.strokeWidth||1,e.strokeStyle=o.stroke,e.stroke()),n&&s&&h){var g=t.generateHitColor(h);n.beginPath(),n.rect(o.x||0,o.y||0,o.width||0,o.height||0),n.fillStyle=g,n.fill(),o.stroke&&(n.lineWidth=o.strokeWidth||1,n.strokeStyle=g,n.stroke())}break;case"text":var y=o.fontSize||12,v=o.lineHeight||1.2,b=o.padding||4;e.font="".concat(y,"px ").concat(o.fontFamily||"sans-serif");var m=o.text?o.text.split("\n"):[],w=m.map((function(t){return e.measureText(t).width})),x=Math.max.apply(Math,Object(C["a"])(w).concat([0])),S=(o.y||0)+b;e.textBaseline="top",e.fillStyle=o.fill||"black";for(var k=0;k<m.length;++k){var O=(o.x||0)+b;"left"===o.align||("right"===o.align?O+=x-w[k]:O+=(x-w[k])/2),e.fillText(m[k],O,S+.5*(v-1)*y),S+=v*y}break;case"line":var P=o.points||[];e.strokeStyle=o.stroke||"black",e.lineWidth=o.strokeWidth||1,e.beginPath(),e.moveTo(P[0]||0,P[1]||0),e.lineTo(P[2]||0,P[3]||0),e.stroke();break;case"quadraticLine":var z=o.points||[];e.strokeStyle=o.stroke||"black",e.lineWidth=o.strokeWidth||1,e.beginPath(),e.moveTo(z[0]||0,z[1]||0),e.quadraticCurveTo(z[2]||0,z[3]||0,z[4]||0,z[5]||0),e.stroke();break;case"pointer":var T=o.x||0,j=o.y||0,M=o.angle||0,N=o.width||10,_=o.height||15,E=T+_*Math.cos(M),B=j+_*Math.sin(M),L=N/2*Math.sin(M),A=-N/2*Math.cos(M);e.fillStyle=o.fill||"black",e.beginPath(),e.moveTo(T,j),e.lineTo(E+L,B+A),e.lineTo(E-L,B-A),e.closePath(),e.fill();break;case"rectWithWhole":e.beginPath(),e.moveTo(o.outerLeft||0,o.outerTop||0),e.lineTo(o.outerRight||0,o.outerTop||0),e.lineTo(o.outerRight||0,o.outerBottom||0),e.lineTo(o.outerLeft||0,o.outerBottom||0),e.lineTo(o.outerLeft||0,o.outerTop||0),e.moveTo(o.innerLeft||0,o.innerTop||0),e.lineTo(o.innerLeft||0,o.innerBottom||0),e.lineTo(o.innerRight||0,o.innerBottom||0),e.lineTo(o.innerRight||0,o.innerTop||0),e.lineTo(o.innerLeft||0,o.innerTop||0),e.fillStyle=o.fill||"white",e.fill();break;default:throw new Error("Unknown shape")}};this.data&&i(this.data,!1,"")}}},{key:"getIdFromHitPoint",value:function(t,e){if(this.hitContext){var n=this.hitContext.getImageData(t,e,1,1).data,i="rgb(".concat(n[0],",").concat(n[1],",").concat(n[2],")");return this.hitColorMap[i]}}},{key:"onWidthChanged",value:function(){this.$refs.canvas.width=this.width,this.enableHit&&(this.$refs.hitCanvas.width=this.width),this.updateCanvas()}},{key:"onHeightChanged",value:function(){this.$refs.canvas.height=this.height,this.enableHit&&(this.$refs.hitCanvas.height=this.height),this.updateCanvas()}},{key:"onDataChanged",value:function(){this.updateCanvas()}}]),e}(f["d"]);Object(u["a"])([Object(f["b"])({type:Number,required:!0})],wt.prototype,"width",void 0),Object(u["a"])([Object(f["b"])({type:Number,required:!0})],wt.prototype,"height",void 0),Object(u["a"])([Object(f["b"])(Boolean)],wt.prototype,"enableHit",void 0),Object(u["a"])([Object(f["b"])(Object)],wt.prototype,"data",void 0),Object(u["a"])([Object(f["c"])()],wt.prototype,"generateHitColor",null),Object(u["a"])([Object(f["e"])("width")],wt.prototype,"onWidthChanged",null),Object(u["a"])([Object(f["e"])("height")],wt.prototype,"onHeightChanged",null),Object(u["a"])([Object(f["e"])("data")],wt.prototype,"onDataChanged",null),wt=Object(u["a"])([f["a"]],wt);var xt=wt,St=xt,kt=Object(m["a"])(St,bt,mt,!1,null,null,null),Ct=kt.exports,Ot=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.x=0,t.y=0,t.scale=1,t.size={width:0,height:0},t.draggedId=null,t.mouseDragActive=!1,t.mouseLastCoords={x:0,y:0},t.maxThumbnailLength=160,t.minThumbnailLength=100,t.thumbnailPadding=10,t.thumbnailMouseDragActive=!1,t.thumbnailMouseLastCoords={x:0,y:0},t}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"mounted",value:function(){this.updateSize()}},{key:"onDataChanged",value:function(){this.updateSize()}},{key:"updateSize",value:function(){gt.child instanceof D&&(this.size=gt.child.getBoundingBoxSize())}},{key:"wheel",value:function(t){var e=1.1;t.preventDefault();var n=this.translateMouseEvent(t),i={x:(n.x-this.stageX)/this.scale,y:(n.y-this.stageY)/this.scale};this.scale=t.deltaY<0?this.scale*e:this.scale/e;var o={x:-(i.x-n.x/this.scale)*this.scale,y:-(i.y-n.y/this.scale)*this.scale};this.x=o.x-this.width/2,this.y=o.y-this.height/2}},{key:"translateMouseEvent",value:function(t){var e=0,n=0,i=t.currentTarget;while(i)e+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;return{x:t.pageX-e,y:t.pageY-n}}},{key:"mousedown",value:function(t){this.mouseDragActive=!0,this.mouseLastCoords={x:t.pageX,y:t.pageY};var e=this.translateMouseEvent(t),n=this.$refs.mainCanvas.getIdFromHitPoint(e.x,e.y);n&&(this.draggedId=n,gt.setFixed([n]))}},{key:"mouseup",value:function(){this.mouseDragActive=!1,this.draggedId=null,gt.clearFixed()}},{key:"mousemove",value:function(t){if(0===t.buttons&&(this.mouseDragActive=!1),this.mouseDragActive||this.draggedId){var e={x:t.pageX,y:t.pageY},n=e.x-this.mouseLastCoords.x,i=e.y-this.mouseLastCoords.y;this.draggedId?gt.movePort(this.draggedId,{deltaX:n/this.scale,deltaY:i/this.scale}):(this.x+=n,this.y+=i),this.mouseLastCoords=e}}},{key:"thumbnailMousedown",value:function(t){var e=this.translateMouseEvent(t),n=this.$refs.thumbnailCanvas.getIdFromHitPoint(e.x,e.y);"viewport"===n&&(this.thumbnailMouseDragActive=!0,this.thumbnailMouseLastCoords={x:t.pageX,y:t.pageY})}},{key:"thumbnailMouseup",value:function(){this.thumbnailMouseDragActive=!1}},{key:"thumbnailMousemove",value:function(t){if(0===t.buttons&&(this.thumbnailMouseDragActive=!1),this.thumbnailMouseDragActive){var e={x:t.pageX,y:t.pageY},n=this.thumbnailMouseLastCoords,i=this.thumbnailFactor*this.scale;this.x-=(e.x-n.x)*i,this.y-=(e.y-n.y)*i,this.thumbnailMouseLastCoords=e}}},{key:"stageX",get:function(){return this.width/2+this.x}},{key:"stageY",get:function(){return this.height/2+this.y}},{key:"mainCanvasData",get:function(){return{is:"group",x:this.stageX,y:this.stageY,scaleX:this.scale,scaleY:this.scale,children:this.data}}},{key:"thumbnailCanvasData",get:function(){var t=1/this.thumbnailFactor;function e(t){var n=Object.assign({},t);return n.draggable&&delete n.draggable,n.children&&(n.children=n.children.map((function(t){return e(t)}))),n}var n=this.data.map((function(t){return e(t)})),i=(-this.width/2-this.x)/this.scale,o=(-this.height/2-this.y)/this.scale,r=this.width/this.scale,a=this.height/this.scale;return n.push({is:"rectWithWhole",id:"mask",fill:"rgba(0,0,0,0.2)",outerLeft:-this.thumbnailWidth*this.thumbnailFactor/2,outerRight:this.thumbnailWidth*this.thumbnailFactor/2,outerTop:-this.thumbnailHeight*this.thumbnailFactor/2,outerBottom:this.thumbnailHeight*this.thumbnailFactor/2,innerLeft:i,innerRight:i+r,innerTop:o,innerBottom:o+a}),n.push({is:"rect",id:"viewport",draggable:!0,x:i,y:o,width:r,height:a,stroke:"#3eaf7c",strokeWidth:this.thumbnailFactor}),{is:"group",x:this.thumbnailWidth/2,y:this.thumbnailHeight/2,scaleX:t,scaleY:t,children:n}}},{key:"thumbnailFactor",get:function(){return Math.max(this.size.width/this.maxThumbnailLength,this.size.height/this.maxThumbnailLength,1)}},{key:"thumbnailWidth",get:function(){return Math.max(this.size.width/this.thumbnailFactor,this.minThumbnailLength)+2*this.thumbnailPadding}},{key:"thumbnailHeight",get:function(){return Math.max(this.size.height/this.thumbnailFactor,this.minThumbnailLength)+2*this.thumbnailPadding}}]),e}(f["d"]);Object(u["a"])([Object(f["b"])({type:Number,required:!0})],Ot.prototype,"width",void 0),Object(u["a"])([Object(f["b"])({type:Number,required:!0})],Ot.prototype,"height",void 0),Object(u["a"])([Object(f["b"])({type:Array,default:function(){return[]}})],Ot.prototype,"data",void 0),Object(u["a"])([Object(f["e"])("data")],Ot.prototype,"onDataChanged",null),Ot=Object(u["a"])([Object(f["a"])({components:{MyCanvas:Ct}})],Ot);var Pt=Ot,zt=Pt,Tt=(n("4dc6"),Object(m["a"])(zt,S,k,!1,null,"31f9a6f4",null)),jt=Tt.exports,Mt=(n("3d1c"),n("835f"),n("2ef0")),Nt=n.n(Mt),_t=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.settingsOpen=!0,t.settingsWidth=300,t.minGraphWidth=150,t.minSettingsWidth=150,t.sizerMouseActive=!1,t.sizerTouchActive=!1,t.windowWidth=document.documentElement.clientWidth,t.windowHeight=document.documentElement.clientHeight,t.canvasWidth=0,t.canvasHeight=0,t.parser="json",t.rawInput="",t.parseError=null,t.parsedInput="",t.examples=vt,t.rendered=[],t}return Object(d["a"])(e,t),Object(h["a"])(e,[{key:"parseInput",value:function(){try{if(this.rawInput){var t=yt[this.parser](this.rawInput);this.parsedInput=JSON.stringify(t,null,2),gt.updateData(t)}else this.parsedInput="";this.parseError=null}catch(e){console.log(e),this.parseError=e.stack}}},{key:"mounted",value:function(){var t=this;window.addEventListener("resize",this.getSize),this.updateCanvasSize(),gt.addEventListener("render",Nt.a.throttle((function(e){t.rendered=e}),1e3/60))}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.getSize)}},{key:"onSettingsWidthChanged",value:function(){this.updateCanvasSize()}},{key:"onParserChanged",value:function(){this.parseInput()}},{key:"onRawInputChanged",value:function(){this.parseInput()}},{key:"redraw",value:function(){gt.fullyUpdateData(JSON.parse(this.parsedInput))}},{key:"selectExample",value:function(t){var e=vt[t];this.parser=e.parser,this.rawInput=e.content}},{key:"inputFileChange",value:function(t){var e=this,n=t.target.files[0];if(n){switch(n.type){case"application/json":this.parser="json";break;case"text/vnd.graphviz":this.parser="graphviz";break;default:return void alert("Unknown file type")}var i=new FileReader;i.onload=function(t){e.rawInput=t.target.result},i.readAsText(n)}}},{key:"getSize",value:function(){var t=this;this.windowWidth=document.documentElement.clientWidth,this.windowHeight=document.documentElement.clientHeight,this.$nextTick((function(){return t.updateCanvasSize()}))}},{key:"updateCanvasSize",value:function(){this.canvasWidth=this.$refs.canvas.offsetWidth,this.canvasHeight=this.$refs.canvas.offsetHeight}},{key:"onMainSizerMouseDown",value:function(){this.sizerMouseActive=!0}},{key:"onMainSizerMouseUp",value:function(){this.sizerMouseActive=!1}},{key:"onMainSizerMouseMove",value:function(t){if(0===t.buttons&&(this.sizerMouseActive=!1),this.sizerMouseActive){var e=0,n=t.currentTarget;while(n)e+=n.offsetLeft,n=n.offsetParent;var i=t.pageX,o=t.currentTarget.offsetWidth,r=i-e;r>=this.minGraphWidth&&o-r>=this.minSettingsWidth&&(this.settingsWidth=Math.round(o-r))}}},{key:"onMainSizerTouchStart",value:function(){this.sizerTouchActive=!0}},{key:"onMainSizerTouchEnd",value:function(){this.sizerTouchActive=!1}},{key:"onMainSizerTouchMove",value:function(t){if(this.sizerTouchActive){var e=0,n=t.currentTarget;while(n)e+=n.offsetLeft,n=n.offsetParent;var i=t.touches[0].pageX,o=t.currentTarget.offsetWidth,r=i-e;r>=this.minGraphWidth&&o-r>=this.minSettingsWidth&&(this.settingsWidth=Math.round(o-r))}}},{key:"desktopLayout",get:function(){return this.windowWidth>719}},{key:"realSettingsWidth",get:function(){return this.desktopLayout?this.settingsWidth:this.canvasWidth}}]),e}(f["d"]);Object(u["a"])([Object(f["e"])("settingsWidth")],_t.prototype,"onSettingsWidthChanged",null),Object(u["a"])([Object(f["e"])("parser")],_t.prototype,"onParserChanged",null),Object(u["a"])([Object(f["e"])("rawInput")],_t.prototype,"onRawInputChanged",null),_t=Object(u["a"])([Object(f["a"])({components:{CollapsiblePane:x,Graph:jt}})],_t);var Et=_t,Bt=Et,Lt=(n("7faf"),Object(m["a"])(Bt,r,a,!1,null,null,null)),At=Lt.exports;i["a"].config.productionTip=!1,i["a"].component("v-icon",o["a"]),new i["a"]({render:function(t){return t(At)}}).$mount("#app")},fe74:function(t,e,n){"use strict";var i=n("42c8"),o=n.n(i);o.a}});
//# sourceMappingURL=app.f540c476.js.map