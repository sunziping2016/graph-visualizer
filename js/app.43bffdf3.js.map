{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7970","webpack:///./src/components/Graph.vue?edb2","webpack:///./src/App.vue?75c7","webpack:///./src/components/CollapsiblePane.vue?1a34","webpack:///./src/components/CollapsiblePane.vue?1fa9","webpack:///./src/components/CollapsiblePane.vue?0878","webpack:///./src/components/CollapsiblePane.vue","webpack:///./src/components/Graph.vue?cdbd","webpack:///./src/components/renderable/Group.vue?1cdc","webpack:///./src/components/renderable/Group.vue?4d00","webpack:///./src/components/renderable/Group.vue?e6a0","webpack:///./src/components/renderable/Group.vue","webpack:///./src/graph/base/EventEmitter.ts","webpack:///./src/graph/edge/type/EdgeType.ts","webpack:///./src/graph/edge/type/StraightEdgeType.ts","webpack:///./src/graph/edge/type/index.ts","webpack:///./src/graph/edge/Edge.ts","webpack:///./src/graph/base/Positioned.ts","webpack:///./src/graph/graph/layout/GraphLayout.ts","webpack:///./src/graph/graph/layout/KamadaKawaiGraphLayout.ts","webpack:///./src/graph/graph/layout/index.ts","webpack:///./src/graph/graph/component/ComponentLayout.ts","webpack:///./src/graph/graph/component/LinearComponentLayout.ts","webpack:///./src/graph/graph/component/index.ts","webpack:///./src/graph/graph/type/GraphType.ts","webpack:///./src/graph/graph/type/BoxGraphType.ts","webpack:///./src/graph/graph/type/index.ts","webpack:///./src/graph/base/Port.ts","webpack:///./src/graph/graph/physics/GraphPhysics.ts","webpack:///./src/graph/graph/physics/BarnesHutGraphPhysics.ts","webpack:///./src/graph/graph/physics/index.ts","webpack:///./src/graph/node/type/recordParser.ts","webpack:///./src/graph/graph/Graph.ts","webpack:///./src/graph/node/type/NodeType.ts","webpack:///./src/graph/node/type/BoxNodeType.ts","webpack:///./src/graph/node/type/RecordCell.ts","webpack:///./src/graph/node/type/RecordNodeType.ts","webpack:///./src/graph/node/type/TableCell.ts","webpack:///./src/graph/node/type/TableNodeType.ts","webpack:///./src/graph/node/type/index.ts","webpack:///./src/graph/node/Node.ts","webpack:///./src/graph/base/renderableFactory.ts","webpack:///./src/graph/examples/stdThreadJoin.gv","webpack:///./src/graph/examples/stdThreadJoin.txt","webpack:///./src/graph/examples/record.txt","webpack:///./src/graph/examples/subgraph.txt","webpack:///./src/graph/examples/icosahedron.txt","webpack:///./src/graph/examples/table.txt","webpack:///./src/graph/examples/edge.txt","webpack:///./src/graph/Root.ts","webpack:///./src/components/renderable/Pointer.vue?809d","webpack:///./src/components/renderable/Pointer.vue?57d4","webpack:///./src/components/renderable/Pointer.vue?df81","webpack:///./src/components/renderable/Pointer.vue","webpack:///./src/components/Graph.vue?b1ea","webpack:///./src/components/Graph.vue?becd","webpack:///./src/components/Graph.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/main.ts","webpack:///./src/components/CollapsiblePane.vue?6677"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","class","settingsOpen","on","$event","_e","_g","desktopLayout","assign","sizerMouseActive","mouseup","onMainSizerMouseUp","mousemove","onMainSizerMouseMove","sizerTouchActive","touchend","onMainSizerTouchEnd","touchmove","onMainSizerTouchMove","style","width","settingsWidth","ref","_s","parseError","canvasWidth","canvasHeight","rendered","left","onMainSizerMouseDown","onMainSizerTouchStart","inputFileChange","directives","rawName","expression","$$selectedVal","Array","filter","target","options","selected","map","val","_value","parser","multiple","redraw","_l","example","selectExample","realSettingsWidth","domProps","composing","rawInput","parsedInput","staticRenderFns","click","title","expand","animationHeight","height","_t","realHeight","content","$refs","paneContent","offsetHeight","addEventListener","transitionEnd","setTimeout","String","x","y","mousedown","wheel","mouseDragActive","draggedId","layer","component","is","_b","tag","thumbnailWidth","thumbnailHeight","thumbnailMouseDragActive","thumbnailMouseup","thumbnailMousemove","thumbnailViewportBackgroundConfig","thumbnailViewportConfig","thumbnailMousedown","config","draggable","evt","cancelBubble","fullId","$root","$children","graph","setDraggedIdAndPos","pageX","pageY","Boolean","events","event","listener","undefined","index","indexOf","args","parent","StraightEdgeType","defaultConfig","Error","fromNode","findPort","from","split","toNode","to","fromPos","getAbsolutePosition","toPos","fromAngle","Math","atan2","toAngle","PI","fromDistance","distanceToBorder","toDistance","realFromPosX","cos","realFromPosY","sin","realToPosX","realToPosY","children","fromPointer","angle","pointerWidth","pointerHeight","fill","pointerColor","toPointer","unshift","points","stroke","lineColor","strokeWidth","lineWidth","id","edgeTypeFactory","shape","root","Edge","getId","parentId","typeClass","edgeType","constructor","setData","render","position","node","newConfig","KamadaKawaiGraphLayout","portToIndex","Map","ports","set","port","initialPlaced","setPosition","springLength","random","distanceMatrix","Infinity","edges","fromBelonging","toBelonging","fromIndex","toIndex","k","dist","lengthMatrix","kMatrix","springConstant","pow","energyMatrix","mPos","getPosition","iPos","denominator","sqrt","energySum","sum","maxEnergy","threshold","maxIterations","max","min","maxInnerIterations","iterations","deDx","deDy","e","delta","subIterations","d2eDx2","d2eDxDy","d2eDy2","factor","dx","dy","sumX","sumY","oldDx","oldDy","deltaX","deltaY","upperLeft","lowerRight","pos","size","getBoundingBoxSize","halfWidth","halfHeight","contentSize","layoutFactory","type","LinearComponentLayout","components","layouts","componentsSize","getContentSize","direction","reduce","a","b","spaceBetween","begin","componentFactory","BoxGraphType","layout","textSizeNeedsUpdate","label","fontSize","fontFamily","lineHeight","ctx","font","lines","textSize","measureText","layoutContentSize","componentLayout","padding","textPosition","labelPosition","borderSize","rect","fillColor","strokeColor","text","align","abs","graphTypeFactory","BarnesHutGraphPhysics","layoutData","physicsFactory","theta","gravitationalConstant","centralGravity","TokenEnum","Graph","newChildren","depth","child","renderableFactory","has","newChild","subgraphs","entries","renderable","adjacencyList","edgesData","values","edge","findBelongingPort","unvisited","Set","layoutsData","calculateConnectedComponent","delete","adjacency","next","portToComponent","edgeData","concat","componentClass","layoutClass","physicsClass","physics","newLayouts","newPhysics","solve","graphType","updated","subgraph","step","BoxNodeType","contentSizeNeedsUpdate","borderSizeNeedsUpdate","recordParser","record","buffer","lexer","pop","EOF","VERTICAL_BAR","LEFT_CURLY_BRACE","RIGHT_CURLY_BRACE","LEFT_ANGLE_BRACE","RIGHT_ANGLE_BRACE","STRING","parseRecordLabel","token","parseField","ret","tree","nodeType","isHorizontal","isField","fieldData","getPorts","getConfig","cellSize","recordData","cell","RecordCell","deltaWidth","startX","setCellSize","deltaHeight","startY","RecordNodeType","contentNeedsUpdate","borderNeedsUpdate","rootCellSize","getCellSize","founded","rowSpan","columnSpan","border","getTableConfig","cellBorder","backgroundColor","attributes","keys","attribute","toLowerCase","parseInt","getText","element","elements","join","parentConfig","tableConfig","cellPadding","rowOffset","columnOffset","TableNodeType","layoutNeedsUpdate","jsonObj","xml2js","tableElement","cellSpacing","table","rows","columns","firstRow","tr","row","td","getPort","cellSizes","cellHeight","cellWidth","rowHeight","columnWidth","accRowHeight","accColumnWidth","upperLeftX","upperLeftY","nodeTypeFactory","Node","document","createElement","getContext","stepTimer","setInterval","refresh","newClass","emit","globalRoot","globalParsers","json","input","JSON","parse","graphviz","globalExamples","stdThreadJoin","icosahedron","pointerConfig","middleX","middleY","closed","Number","scale","mouseLastCoords","thumbnailMouseLastCoords","updateThumbnailScale","stage","getStage","draw","thumbnailFactor","thumbnailStage","scaleBy","preventDefault","mousePointTo","getPointerPosition","newPos","buttons","newCoords","moveDraggable","oldCoords","viewport","sceneFunc","beginPath","moveTo","lineTo","fillStrokeShape","required","default","minGraphWidth","minSettingsWidth","windowWidth","documentElement","clientWidth","windowHeight","clientHeight","examples","parsed","stringify","console","log","stack","getSize","updateCanvasSize","throttle","removeEventListener","parseInput","file","files","alert","reader","FileReader","onload","readAsText","$nextTick","canvas","offsetWidth","elementOffsetX","currentTarget","offsetLeft","offsetParent","mouseOffsetX","offsetX","round","touches","CollapsiblePane","productionTip","Icon","use","h","$mount"],"mappings":"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","file":"js/app.43bffdf3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=stylus&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=style&index=0&id=c78ffbf4&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=style&index=0&id=c78ffbf4&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('header',{staticClass:\"app-header\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"Graph Visualizer\")]),_c('div',{staticClass:\"settings\"},[(_vm.desktopLayout)?_c('div',{staticClass:\"settings-item\"},[_c('span',{staticClass:\"settings-item-title\",class:{ 'setting-item-active': _vm.settingsOpen },on:{\"click\":function($event){_vm.settingsOpen = !_vm.settingsOpen}}},[_vm._v(\"\\n          侧栏\\n        \")])]):_vm._e()])]),_c('main',_vm._g({staticClass:\"main-panes\",class:{\n          'main-panes-show-sidebarmain-panes-show-sidebar': _vm.settingsOpen && _vm.desktopLayout\n        }},Object.assign({}, _vm.sizerMouseActive ? {\n          mouseup: _vm.onMainSizerMouseUp,\n          mousemove: _vm.onMainSizerMouseMove\n        } : {}, _vm.sizerTouchActive ? {\n          touchend: _vm.onMainSizerTouchEnd,\n          touchmove: _vm.onMainSizerTouchMove\n        } : {})),[_c('div',{staticClass:\"main-container main-container-graph\",class:{ 'main-container-graph-size-active':\n                    !_vm.sizerMouseActive && !_vm.sizerTouchActive},style:({\n           width: _vm.desktopLayout ? (_vm.settingsOpen ?\n                  (\"calc(100% - \" + _vm.settingsWidth + \"px)\") : '100%') : 'auto'\n         })},[_c('div',{ref:\"canvas\",staticClass:\"main-pane main-pane-graph\"},[(_vm.parseError)?_c('div',{staticClass:\"error-pane\"},[_c('pre',[_c('code',[_vm._v(_vm._s(_vm.parseError))])])]):_vm._e(),_c('Graph',{ref:\"graph\",attrs:{\"width\":_vm.canvasWidth,\"height\":_vm.canvasHeight,\"data\":_vm.rendered}})],1)]),_c('transition',{attrs:{\"name\":\"sizer-slide-x\",\"duration\":300}},[(_vm.settingsOpen && _vm.desktopLayout)?_c('div',{staticClass:\"main-sizer main-client-settings-sizer\",style:({ left: (\"calc(100% - \" + _vm.settingsWidth + \"px)\") }),on:{\"mousedown\":_vm.onMainSizerMouseDown,\"touchstart\":_vm.onMainSizerTouchStart}},[_c('div',{staticClass:\"main-sizer-handlebar\"})]):_vm._e()]),_c('transition',{attrs:{\"name\":\"settings-slide-x\",\"duration\":300}},[(_vm.settingsOpen || !_vm.desktopLayout)?_c('div',{staticClass:\"main-container main-container-settings\",style:({\n             width: _vm.desktopLayout ? (_vm.settingsWidth + \"px\") : 'auto'\n           })},[_c('div',{staticClass:\"main-pane main-pane-settings\"},[_c('CollapsiblePane',{staticClass:\"main-pane-subpane\",attrs:{\"title\":\"输入\"}},[_c('div',{staticClass:\"settings-input-file\"},[_c('label',{attrs:{\"for\":\"input-file\"}},[_c('v-icon',{attrs:{\"name\":\"upload\",\"scale\":\"0.8\"}}),_vm._v(\"打开文件\\n              \")],1),_c('input',{attrs:{\"type\":\"file\",\"id\":\"input-file\"},on:{\"change\":_vm.inputFileChange}})]),_c('div',{staticClass:\"settings-input-format\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.parser),expression:\"parser\"}],attrs:{\"id\":\"input-format\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.parser=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"json\",\"selected\":\"\"}},[_vm._v(\"JSON\")]),_c('option',{attrs:{\"value\":\"graphviz\"}},[_vm._v(\"Graphviz\")])])]),_c('button',{staticClass:\"setting-input-redraw\",on:{\"click\":_vm.redraw}},[_c('v-icon',{attrs:{\"name\":\"sync\",\"scale\":\"0.8\"}}),_vm._v(\"重绘\\n            \")],1),_c('div',{staticClass:\"settings-input-examples\"},[_c('span',{staticClass:\"settings-input-example-label\"},[_vm._v(\"示例：\")]),_vm._l((_vm.examples),function(example,i){return _c('span',{key:example.name,staticClass:\"settings-input-example\",on:{\"click\":function($event){return _vm.selectExample(i)}}},[_vm._v(\"\\n                \"+_vm._s(example.name)+\"\\n              \")])})],2),_c('div',{staticClass:\"settings-input-display\",class:{ 'settings-input-display-two-column':\n                            _vm.realSettingsWidth >= 400 }},[_c('div',{staticClass:\"settings-input-raw\"},[_c('label',{attrs:{\"for\":\"input-raw\"}},[_vm._v(\"输入数据：\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rawInput),expression:\"rawInput\"}],attrs:{\"id\":\"input-raw\",\"rows\":\"10\"},domProps:{\"value\":(_vm.rawInput)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.rawInput=$event.target.value}}})]),_c('div',{staticClass:\"settings-input-parsed\"},[_c('label',{attrs:{\"for\":\"input-parsed\"}},[_vm._v(\"解析结果（只读）：\")]),_c('textarea',{attrs:{\"id\":\"input-parsed\",\"rows\":\"10\",\"readonly\":\"\"},domProps:{\"value\":_vm.parsedInput}})])])])],1)]):_vm._e()])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',{staticClass:\"pane-title\",on:{\"click\":_vm.click}},[_vm._v(\"\\n    \"+_vm._s(_vm.title)+\"\\n    \"),_c('v-icon',{staticClass:\"pane-arrow\",class:{ 'pane-arrow-expand': _vm.expand },attrs:{\"name\":\"angle-up\"}})],1),_c('div',{ref:\"paneContent\",staticClass:\"pane-content\",style:(_vm.animationHeight !== null ?\n               { height: _vm.animationHeight + 'px' } : {})},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'vue-awesome/icons/angle-up';\nimport { Vue, Component, Prop } from 'vue-property-decorator';\n\n@Component\nexport default class CollapsiblePane extends Vue {\n  @Prop(String) public readonly title: string | undefined;\n  private expand = true;\n  private realHeight = 0;\n  private animationHeight: number|null = null;\n  public mounted() {\n    const content = this.$refs.paneContent as HTMLElement;\n    this.realHeight = content.offsetHeight;\n    content.addEventListener('transitionend', this.transitionEnd.bind(this));\n  }\n  public click() {\n    this.expand = !this.expand;\n    if (this.expand) {\n      this.animationHeight = 0;\n      setTimeout(() => {\n        this.animationHeight = this.realHeight;\n      });\n    } else {\n      const content = this.$refs.paneContent as HTMLElement;\n      this.realHeight = content.offsetHeight;\n      this.animationHeight = this.realHeight;\n      setTimeout(() => {\n        this.animationHeight = 0;\n      });\n    }\n  }\n  public transitionEnd() {\n    if (this.animationHeight !== 0) {\n      this.animationHeight = null;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollapsiblePane.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollapsiblePane.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CollapsiblePane.vue?vue&type=template&id=08120549&scoped=true&\"\nimport script from \"./CollapsiblePane.vue?vue&type=script&lang=ts&\"\nexport * from \"./CollapsiblePane.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CollapsiblePane.vue?vue&type=style&index=0&id=08120549&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08120549\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"graph-container\"},[_c('v-stage',_vm._g({ref:\"stage\",attrs:{\"config\":{ width: _vm.width, height: _vm.height, x: _vm.width / 2 + _vm.x, y: _vm.height / 2 + _vm.y }},on:{\"mousedown\":_vm.mousedown,\"wheel\":_vm.wheel}},_vm.mouseDragActive || _vm.draggedId ? { mouseup: _vm.mouseup, mousemove: _vm.mousemove } : {}),_vm._l((_vm.data),function(layer){return _c('v-layer',{key:layer.key},_vm._l((layer.children),function(component){return _c(component.is,_vm._b({key:component.key,tag:\"component\"},'component',component,false))}),1)}),1),_c('div',{staticClass:\"thumbnail\",style:({\n    width: _vm.thumbnailWidth + 'px',\n    height: _vm.thumbnailHeight + 'px',\n  })},[_c('v-stage',_vm._g({ref:\"thumbnailStage\",attrs:{\"config\":{ width: _vm.thumbnailWidth, height: _vm.thumbnailHeight,\n             x: _vm.thumbnailWidth / 2, y: _vm.thumbnailHeight / 2 }}},_vm.thumbnailMouseDragActive ? {\n               mouseup: _vm.thumbnailMouseup,\n               mousemove: _vm.thumbnailMousemove\n             } : {}),_vm._l((_vm.data),function(layer){return _c('v-layer',{key:layer.key},[_vm._l((layer.children),function(component){return _c(component.is,_vm._b({key:component.key,tag:\"component\"},'component',component,false))}),_c('v-shape',{attrs:{\"config\":_vm.thumbnailViewportBackgroundConfig}}),_c('v-rect',{attrs:{\"config\":_vm.thumbnailViewportConfig},on:{\"mousedown\":_vm.thumbnailMousedown}})],2)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',_vm._g({attrs:{\"config\":_vm.config}},_vm.draggable ? { mousedown: _vm.mousedown } : {}),_vm._l((_vm.children),function(component){return _c(component.is,_vm._b({key:component.key,tag:\"component\"},'component',component,false))}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop } from 'vue-property-decorator';\n\n@Component\nexport default class Group extends Vue {\n  @Prop(Object) public readonly config: object | undefined;\n  @Prop(Array) public readonly children: object[] | undefined;\n  @Prop(Boolean) public readonly draggable: boolean | undefined;\n  @Prop(String) public readonly fullId: string | undefined;\n  public mousedown(evt: { evt: MouseEvent, cancelBubble: boolean }) {\n    evt.cancelBubble = true;\n    if (this.fullId) {\n      (this.$root.$children[0].$refs.graph as any).setDraggedIdAndPos(\n          this.fullId, { x: evt.evt.pageX, y: evt.evt.pageY });\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Group.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Group.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Group.vue?vue&type=template&id=dcabdfc4&\"\nimport script from \"./Group.vue?vue&type=script&lang=ts&\"\nexport * from \"./Group.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default class EventEmitter {\n  private readonly events: { [event: string]: Array<(...args: any[]) => any> } = {};\n\n  public addEventListener(event: string, listener: (...args: any[]) => any) {\n    if (this.events[event] === undefined) {\n      this.events[event] = [];\n    }\n    this.events[event].push(listener);\n  }\n\n  public removeEventListener(event: string, listener: (...args: any[]) => any) {\n    if (this.events[event] !== undefined) {\n      const index = this.events[event].indexOf(listener);\n      if (index > -1) {\n        this.events[event].splice(index, -1);\n      }\n    }\n  }\n\n  public emit(event: string, ...args: any[]) {\n    if (this.events[event] !== undefined) {\n      for (const listener of this.events[event]) {\n        listener.apply(this, args);\n      }\n    }\n  }\n}\n","import Edge from '@/graph/edge/Edge';\nimport {EdgeData} from '@/graph/base/data';\n\nexport default abstract class EdgeType {\n  public readonly parent: Edge;\n  public constructor(parent: Edge) {\n    this.parent = parent;\n  }\n  public abstract setData(data: EdgeData): void;\n  public abstract render(): object;\n}\n","import EdgeType from '@/graph/edge/type/EdgeType';\nimport {StraightEdgeData} from '@/graph/base/data';\n\nexport interface StraightEdgeConfig {\n  fromPointer: boolean;\n  toPointer: boolean;\n  lineColor: string;\n  lineWidth: number;\n  pointerColor: string;\n  pointerWidth: number;\n  pointerHeight: number;\n}\n\nexport default class StraightEdgeType extends EdgeType {\n  private static defaultConfig: StraightEdgeConfig = {\n    fromPointer: false,\n    toPointer: true,\n    lineColor: 'black',\n    lineWidth: 1,\n    pointerColor: 'black',\n    pointerWidth: 10,\n    pointerHeight: 15,\n  };\n  private config?: StraightEdgeConfig;\n  public setData(data: StraightEdgeData): void {\n    this.config = Object.assign({}, StraightEdgeType.defaultConfig, data);\n  }\n  public render(): object {\n    if (!this.parent.graph) {\n      throw new Error('Top level edge cannot be rendered');\n    }\n    const fromNode = this.parent.graph.findPort(this.parent.from!.split(':'));\n    const toNode = this.parent.graph.findPort(this.parent.to!.split(':'));\n    if (!fromNode || !toNode) {\n      throw new Error('Unknown start or end node for edge');\n    }\n    const fromPos = fromNode.getAbsolutePosition(this.parent.parent!);\n    const toPos = toNode.getAbsolutePosition(this.parent.parent!);\n    const fromAngle = Math.atan2(toPos.y - fromPos.y, toPos.x - fromPos.x);\n    const toAngle = Math.PI + fromAngle;\n    const fromDistance = fromNode.distanceToBorder(fromAngle);\n    const toDistance = toNode.distanceToBorder(toAngle);\n    let realFromPosX = fromPos.x + fromDistance * Math.cos(fromAngle);\n    let realFromPosY = fromPos.y + fromDistance * Math.sin(fromAngle);\n    let realToPosX = toPos.x + toDistance * Math.cos(toAngle);\n    let realToPosY = toPos.y + toDistance * Math.sin(toAngle);\n    const children: object[] = [];\n    if (this.config!.fromPointer) {\n      children.push({\n        is: 'Pointer',\n        key: 'toPointer',\n        x: realFromPosX,\n        y: realFromPosY,\n        angle: fromAngle,\n        width: this.config!.pointerWidth,\n        height: this.config!.pointerHeight,\n        fill: this.config!.pointerColor,\n      });\n      realFromPosX += this.config!.pointerWidth * Math.cos(fromAngle);\n      realFromPosY += this.config!.pointerWidth * Math.sin(fromAngle);\n    }\n    if (this.config!.toPointer) {\n      children.push({\n        is: 'Pointer',\n        key: 'toPointer',\n        x: realToPosX,\n        y: realToPosY,\n        angle: toAngle,\n        width: this.config!.pointerWidth,\n        height: this.config!.pointerHeight,\n        fill: this.config!.pointerColor,\n      });\n      realToPosX += this.config!.pointerWidth * Math.cos(toAngle);\n      realToPosY += this.config!.pointerWidth * Math.sin(toAngle);\n    }\n    children.unshift({\n      is: 'v-line',\n      key: 'line',\n      config: {\n        points: [\n          realFromPosX, realFromPosY, realToPosX, realToPosY,\n        ],\n        stroke: this.config!.lineColor,\n        strokeWidth: this.config!.lineWidth,\n      },\n    });\n    return {\n      is: 'Group',\n      key: this.parent.id,\n      children,\n    };\n  }\n}\n","import {EdgeData} from '@/graph/base/data';\nimport Edge from '@/graph/edge/Edge';\nimport StraightEdgeType from '@/graph/edge/type/StraightEdgeType';\nimport EdgeType from '@/graph/edge/type/EdgeType';\n\nexport default function edgeTypeFactory(data: EdgeData)\n    : new (parent: Edge) => EdgeType {\n  switch (data.shape) {\n    default:\n      return StraightEdgeType;\n  }\n}\n","import {EdgeData} from '@/graph/base/data';\nimport Root from '@/graph/Root';\nimport Renderable from '@/graph/base/Renderable';\nimport Positioned from '@/graph/base/Positioned';\nimport Graph from '@/graph/graph/Graph';\nimport EdgeType from '@/graph/edge/type/EdgeType';\nimport edgeTypeFactory from '@/graph/edge/type';\n\nexport default class Edge implements Renderable {\n  public static getId(data: EdgeData) {\n    return data.id || `${data.from}-${data.to}`;\n  }\n  public from?: string;\n  public to?: string;\n  public fullId?: string;\n  public readonly root: Root;\n  public readonly graph: Graph | null;\n  public readonly parent: Positioned | null;\n  public id?: string;\n  private edgeType?: EdgeType;\n  constructor(root: Root, graph: Graph | null, parent: Positioned | null) {\n    this.root = root;\n    this.graph = graph;\n    this.parent = parent;\n  }\n  public setData(data: EdgeData) {\n    this.id = Edge.getId(data);\n    this.from = data.from;\n    this.to = data.to;\n    this.fullId = data.parentId ? `${data.parentId}:${this.id}` : this.id;\n    const typeClass = edgeTypeFactory(data);\n    if (!this.edgeType || this.edgeType.constructor !== typeClass) {\n      this.edgeType = new typeClass(this);\n    }\n    this.edgeType.setData(data);\n  }\n  public render() {\n    return this.edgeType!.render();\n  }\n}\n","import {Position} from '@/graph/base/data';\n\nexport default abstract class Positioned {\n  public parent: Positioned | null;\n  protected position: Position;\n  protected constructor(parent: Positioned | null) {\n    this.parent = parent;\n    this.position = { x: 0, y: 0 };\n  }\n  public setPosition(position: Position): void {\n    this.position = position;\n  }\n  public getPosition(): Position {\n    return this.position;\n  }\n  public getAbsolutePosition(parent: Positioned): Position {\n    let x = 0;\n    let y = 0;\n    let node: Positioned | null = this;\n    while (node !== parent) {\n      if (node === null) {\n        throw new Error('Incorrect parent parameter');\n      }\n      x += node.position.x;\n      y += node.position.y;\n      node = node.parent;\n    }\n    return {x, y};\n  }\n}\n","import Graph from '@/graph/graph/Graph';\nimport Positioned from '@/graph/base/Positioned';\nimport {GraphLayoutData, Size} from '@/graph/base/data';\nimport Port from '@/graph/base/Port';\nimport Edge from '@/graph/edge/Edge';\nimport Renderable from '@/graph/base/Renderable';\n\nexport interface LayoutEdgeData {\n  from: Port;\n  to: Port;\n  fromBelonging: Port;\n  toBelonging: Port;\n  edge: Edge;\n}\n\nexport interface LayoutData {\n  ports: Port[];\n  edges: LayoutEdgeData[];\n  children: Renderable[];\n}\n\nexport default abstract class GraphLayout extends Positioned {\n  protected readonly graph: Graph;\n  protected constructor(graph: Graph, parent: Positioned | null) {\n    super(parent);\n    this.graph = graph;\n  }\n  public abstract solve(config: GraphLayoutData | undefined,\n                        data: LayoutData,\n                        index: number): void;\n  public abstract render(): object;\n  public abstract getContentSize(): Size | undefined;\n}\n","import Graph from '@/graph/graph/Graph';\nimport GraphLayout, {LayoutData} from '@/graph/graph/layout/GraphLayout';\nimport {KamadaKawaiGraphLayoutData, Size} from '@/graph/base/data';\nimport Port from '@/graph/base/Port';\nimport Positioned from '@/graph/base/Positioned';\n\ninterface KamadaKawaiGraphLayoutConfig {\n  springLength: number;\n  springConstant: number;\n}\n\nexport default class KamadaKawaiGraphLayout extends GraphLayout {\n  private static defaultConfig: KamadaKawaiGraphLayoutConfig = {\n    springLength: 150,\n    springConstant: 0.05,\n  };\n  private data?: LayoutData;\n  private index?: number;\n  private contentSize?: Size;\n  constructor(graph: Graph, parent: Positioned | null) {\n    super(graph, parent);\n  }\n  public solve(config: KamadaKawaiGraphLayoutData | undefined,\n               data: LayoutData,\n               index: number) {\n    const newConfig: KamadaKawaiGraphLayoutConfig = Object.assign({},\n      KamadaKawaiGraphLayout.defaultConfig, config);\n    this.data = data;\n    this.index = index;\n    const portToIndex: Map<Port, number> = new Map();\n    for (let i = 0; i < data.ports.length; ++i) {\n      portToIndex.set(data.ports[i], i);\n    }\n    // Initial random placement\n    for (const port of data.ports) {\n      if (!port.initialPlaced) {\n        port.setPosition({\n          x: newConfig.springLength * ( Math.random() - 0.5),\n          y: newConfig.springLength * ( Math.random() - 0.5),\n        });\n        port.initialPlaced = true;\n      }\n    }\n      // Compute distance matrix by Floyd Warshall\n    const distanceMatrix: number[][] = [];\n    for (let i = 0; i < data.ports.length; ++i) {\n      distanceMatrix.push(Array(data.ports.length).fill(Infinity));\n      distanceMatrix[distanceMatrix.length - 1][i] = 0;\n    }\n    for (const {fromBelonging, toBelonging} of data.edges) {\n      const fromIndex = portToIndex.get(fromBelonging)!;\n      const toIndex = portToIndex.get(toBelonging)!;\n      distanceMatrix[fromIndex][toIndex] = 1;\n      distanceMatrix[toIndex][fromIndex] = 1;\n    }\n    for (let k = 0; k < data.ports.length; ++k) {\n      for (let i = 0; i < data.ports.length; ++i) {\n        for (let j = 0; j < data.ports.length; ++j) {\n          const dist = distanceMatrix[i][k] + distanceMatrix[k][j];\n          if (distanceMatrix[i][j] > dist) {\n            distanceMatrix[i][j] = dist;\n          }\n        }\n      }\n    }\n    // Place ports using Kamada Kawai\n    // Compute length matrix\n    const lengthMatrix = [];\n    for (let i = 0; i < data.ports.length; ++i) {\n      const length = [];\n      for (let j = 0; j < data.ports.length; ++j) {\n        length.push(newConfig.springLength * distanceMatrix[i][j]);\n      }\n      lengthMatrix.push(length);\n    }\n    // Compute k matrix\n    const kMatrix = [];\n    for (let i = 0; i < data.ports.length; ++i) {\n      const k = [];\n      for (let j = 0; j < data.ports.length; ++j) {\n        k.push(newConfig.springConstant *\n          Math.pow(distanceMatrix[i][j], -2));\n      }\n      kMatrix.push(k);\n    }\n    // Compute energy matrix\n    const energyMatrix = [];\n    for (const port of data.ports) {\n      energyMatrix.push(Array(data.ports.length));\n    }\n    for (let m = 0; m < data.ports.length; ++m) {\n      const mPos = data.ports[m].getPosition();\n      energyMatrix[m][m] = [0, 0];\n      for (let i = m + 1; i < data.ports.length; ++i) {\n        const iPos = data.ports[i].getPosition();\n        const denominator = 1.0 / Math.sqrt(\n          Math.pow(mPos.x - iPos.x, 2) + Math.pow(mPos.y - iPos.y, 2));\n        energyMatrix[m][i] = [\n          kMatrix[m][i] * (mPos.x - iPos.x) *\n            (1 - lengthMatrix[m][i] * denominator),\n          kMatrix[m][i] * (mPos.y - iPos.y) *\n            (1 - lengthMatrix[m][i] * denominator),\n        ];\n        energyMatrix[i][m] = [\n          -energyMatrix[m][i][0],\n          -energyMatrix[m][i][1],\n        ];\n      }\n    }\n    const energySum = [];\n    for (let i = 0; i < data.ports.length; ++i) {\n      const sum = [0, 0];\n      for (let j = 0; j < data.ports.length; ++j) {\n        sum[0] += energyMatrix[i][j][0];\n        sum[1] += energyMatrix[i][j][1];\n      }\n      energySum.push(sum);\n    }\n    // Compute position\n    const threshold = 0.01;\n    const maxIterations = Math.max(1000,\n      Math.min(10 * data.ports.length, 6000));\n    const maxInnerIterations = 5;\n    let iterations = 0;\n    let maxEnergy;\n    while (iterations < maxIterations) {\n      iterations += 1;\n      // Get port with highest energy\n      let m = 0;\n      let deDx = 0;\n      let deDy = 0;\n      maxEnergy = -1;\n      for (let i = 0; i < data.ports.length; ++i) {\n        const e = Math.sqrt(Math.pow(energySum[i][0], 2) +\n          Math.pow(energySum[i][1], 2));\n        if (e > maxEnergy) {\n          m = i;\n          deDx = energySum[i][0];\n          deDy = energySum[i][1];\n          maxEnergy = e;\n        }\n      }\n      if (maxEnergy <= threshold) {\n        break;\n      }\n      const mPos = data.ports[m].getPosition();\n      let delta = maxEnergy;\n      let subIterations = 0;\n      while (delta > threshold && subIterations < maxInnerIterations) {\n        subIterations += 1;\n        // Move port\n        let d2eDx2 = 0;\n        let d2eDxDy = 0;\n        let d2eDy2 = 0;\n        for (let i = 0; i < data.ports.length; ++i) {\n          if (i !== m) {\n            const iPos = data.ports[i].getPosition();\n            const factor = 1.0 / Math.pow(Math.pow(mPos.x - iPos.x, 2) +\n              Math.pow(mPos.y - iPos.y, 2), 1.5);\n            const k = kMatrix[m][i];\n            const l = lengthMatrix[m][i];\n            d2eDx2 += k * (1 - l * Math.pow(mPos.y - iPos.y, 2) * factor);\n            d2eDxDy += k * l * (mPos.x - iPos.x) * (mPos.y - iPos.y) *\n              factor;\n            d2eDy2 += k * (1 - l * Math.pow(mPos.x - iPos.x, 2) * factor);\n          }\n        }\n        // Solve equation using Cramer's rule\n        const denominator = d2eDx2 * d2eDy2 - Math.pow(d2eDxDy, 2);\n        const dx = (d2eDxDy * deDy - d2eDy2 * deDx) / denominator;\n        const dy = (d2eDxDy * deDx - d2eDx2 * deDy) / denominator;\n        mPos.x += dx;\n        mPos.y += dy;\n        // Recalculate energy matrix\n        let sumX = 0;\n        let sumY = 0;\n        for (let i = 0; i < data.ports.length; ++i) {\n          if (i !== m) {\n            const [oldDx, oldDy] = energyMatrix[m][i];\n            const iPos = data.ports[i].getPosition();\n            const factor = 1.0 / Math.sqrt(\n              Math.pow(mPos.x - iPos.x, 2) + Math.pow(mPos.y - iPos.y, 2));\n            const deltaX = kMatrix[m][i] * (mPos.x - iPos.x) *\n              (1 - lengthMatrix[m][i] * factor);\n            const deltaY = kMatrix[m][i] * (mPos.y - iPos.y) *\n              (1 - lengthMatrix[m][i] * factor);\n            energyMatrix[m][i] = [deltaX, deltaY];\n            energyMatrix[i][m] = [-deltaX, -deltaY];\n            energySum[i][0] += oldDx - deltaX;\n            energySum[i][1] += oldDy - deltaY;\n            sumX += deltaX;\n            sumY += deltaY;\n          }\n        }\n        energySum[m] = [sumX, sumY];\n        // Update\n        delta = Math.sqrt(Math.pow(energySum[m][0], 2) +\n          Math.pow(energySum[m][1], 2));\n        deDx = energySum[m][0];\n        deDy = energySum[m][1];\n      } // for kamada kawai inner iteration\n    } // for kamada kawai outer iteration\n    // Save results for further evaluation\n    // Calculate component size and position\n    const upperLeft = [Infinity, Infinity];\n    const lowerRight = [-Infinity, -Infinity];\n    for (const port of data.ports) {\n      const pos = port.getPosition();\n      const size = port.getBoundingBoxSize();\n      const halfWidth = size.width / 2;\n      const halfHeight = size.height / 2;\n      if (pos.x - halfWidth < upperLeft[0]) {\n        upperLeft[0] = pos.x - halfWidth;\n      }\n      if (pos.x + halfWidth > lowerRight[0]) {\n        lowerRight[0] = pos.x + halfWidth;\n      }\n      if (pos.y - halfHeight < upperLeft[1]) {\n        upperLeft[1] = pos.y - halfHeight;\n      }\n      if (pos.y + halfHeight > lowerRight[1]) {\n        lowerRight[1] = pos.y + halfHeight;\n      }\n    }\n    const position = {\n      x: (upperLeft[0] + lowerRight[0]) / 2,\n      y: (upperLeft[1] + lowerRight[1]) / 2,\n    };\n    this.contentSize = {\n      width: lowerRight[0] - upperLeft[0],\n      height: lowerRight[1] - upperLeft[1],\n    };\n    // Move ports to center\n    for (const port of data.ports) {\n      port.getPosition().x -= position.x;\n      port.getPosition().y -= position.y;\n    }\n  } // solve method\n  public render() {\n    return {\n      is: 'Group',\n      key: `component-${this.index}`,\n      config: {\n        x: this.position.x,\n        y: this.position.y,\n      },\n      children: this.data!.children.map((x) => x.render()),\n    };\n  }\n  public getContentSize() {\n    return this.contentSize;\n  }\n}\n","import KamadaKawaiGraphLayout from './KamadaKawaiGraphLayout';\nimport {GraphLayoutData} from '@/graph/base/data';\nimport GraphLayout from '@/graph/graph/layout/GraphLayout';\nimport Graph from '@/graph/graph/Graph';\nimport Positioned from '@/graph/base/Positioned';\n\nexport default function layoutFactory(data: GraphLayoutData | undefined)\n    : new (graph: Graph, parent: Positioned | null) => GraphLayout {\n  switch (data && data.type) {\n    default:\n      return KamadaKawaiGraphLayout;\n  }\n}\n","import Graph from '@/graph/graph/Graph';\nimport Positioned from '@/graph/base/Positioned';\nimport {ComponentLayoutData, Size} from '@/graph/base/data';\n\nexport default abstract class ComponentLayout extends Positioned {\n  protected readonly graph: Graph;\n  protected constructor(graph: Graph, parent: Positioned | null) {\n    super(parent);\n    this.graph = graph;\n  }\n  public abstract solve(config: ComponentLayoutData | undefined): void;\n  public abstract render(): object;\n  public abstract getContentSize(): Size | undefined;\n}\n","import ComponentLayout from '@/graph/graph/component/ComponentLayout';\nimport Graph from '@/graph/graph/Graph';\nimport {LinearComponentLayoutData, Size} from '@/graph/base/data';\nimport Positioned from '@/graph/base/Positioned';\n\ninterface LinearComponentLayoutConfig {\n  direction: 'TD' | 'DT' | 'LR' | 'RL';\n  spaceBetween: number;\n}\n\nexport default class LinearComponentLayout extends ComponentLayout {\n  private static defaultConfig = {\n    direction: 'TD',\n    spaceBetween: 12,\n  };\n  private contentSize?: Size;\n  constructor(graph: Graph, parent: Positioned | null) {\n    super(graph, parent);\n  }\n  public solve(config: LinearComponentLayoutData | undefined) {\n    const newConfig: LinearComponentLayoutConfig = Object.assign({},\n      LinearComponentLayout.defaultConfig, config);\n    const components = this.graph.layouts!;\n    const componentsSize = components.map((x) => x.getContentSize()!);\n    if (newConfig.direction === 'LR' || newConfig.direction === 'RL') {\n      this.contentSize = {\n        width: componentsSize.map((x) => x.width).reduce((a, b) => a + b, 0) +\n          Math.max(components.length - 1, 0) * newConfig.spaceBetween,\n        height: Math.max(...componentsSize.map((x) => x.height), 0),\n      };\n      let begin = newConfig.direction === 'LR' ?\n        -this.contentSize.width / 2 : this.contentSize.width / 2;\n      for (let i = 0; i < components.length; ++i) {\n        const deltaX = (newConfig.direction === 'LR' ?\n          componentsSize[i].width / 2 : -componentsSize[i].width / 2) +\n          begin;\n        components[i].setPosition({ x: deltaX, y: 0 });\n        if (newConfig.direction === 'LR') {\n          begin += componentsSize[i].width + newConfig.spaceBetween;\n        } else {\n          begin -= componentsSize[i].width + newConfig.spaceBetween;\n        }\n      }\n    } else {\n      this.contentSize = {\n        width: Math.max(...componentsSize.map((x) => x.width), 0),\n        height: componentsSize.map((x) => x.height).reduce((a, b) => a + b, 0) +\n          Math.max(components.length - 1, 0) * newConfig.spaceBetween,\n      };\n      let begin = newConfig.direction === 'DT' ?\n        this.contentSize.height / 2 : -this.contentSize.height / 2;\n      for (let i = 0; i < components.length; ++i) {\n        const deltaY = (newConfig.direction === 'DT' ?\n          -componentsSize[i].height / 2 : componentsSize[i].height / 2) +\n          begin;\n        components[i].setPosition({ x: 0, y: deltaY });\n        if (newConfig.direction === 'DT') {\n          begin -= componentsSize[i].height + newConfig.spaceBetween;\n        } else {\n          begin += componentsSize[i].height + newConfig.spaceBetween;\n        }\n      }\n    } // position calculation\n  }\n  public render() {\n    return {\n      is: 'Group',\n      key: `components`,\n      config: {\n        x: this.position.x,\n        y: this.position.y,\n      },\n      children: this.graph.layouts!.map((x) => x.render()),\n    };\n  }\n  public getContentSize() {\n    return this.contentSize;\n  }\n}\n","import {ComponentLayoutData} from '@/graph/base/data';\nimport Graph from '@/graph/graph/Graph';\nimport ComponentLayout from '@/graph/graph/component/ComponentLayout';\nimport LinearComponentLayout from '@/graph/graph/component/LinearComponentLayout';\nimport Positioned from '@/graph/base/Positioned';\n\nexport default function componentFactory(data: ComponentLayoutData | undefined)\n  : new (graph: Graph, parent: Positioned | null) => ComponentLayout {\n  switch (data && data.type) {\n    default:\n      return LinearComponentLayout;\n  }\n}\n","import Graph from '@/graph/graph/Graph';\nimport {GraphData, Size} from '@/graph/base/data';\n\nexport default abstract class GraphType {\n  protected parent: Graph;\n  protected constructor(parent: Graph) {\n    this.parent = parent;\n  }\n  public abstract setData(data: GraphData): void;\n  public abstract render(): object[];\n  public abstract getBoundingBoxSize(): Size;\n  public abstract distanceToBorder(angle: number): number;\n}\n","import GraphType from '@/graph/graph/type/GraphType';\nimport Graph from '@/graph/graph/Graph';\nimport {BoxGraphData, Position, Size} from '@/graph/base/data';\n\ninterface BoxGraphConfig {\n  label: string | null;\n  labelPosition: 'top' | 'right' | 'bottom' | 'left';\n  style: 'solid' | 'filled';\n  fillColor: string;\n  strokeColor: string;\n  strokeWidth: number;\n  fontSize: number;\n  fontFamily: string;\n  lineHeight: number;\n  padding: number;\n  align: 'left' | 'center' | 'right';\n  spaceBetween: number;\n}\n\nexport default class BoxGraphType extends GraphType {\n  public static defaultConfig = {\n    label: null,\n    labelPosition: 'top', // or 'right', 'bottom', 'left'\n    style: 'solid',  // or 'filled'\n    fillColor: 'white',\n    strokeColor: 'black',\n    strokeWidth: 0,\n    fontSize: 12,\n    fontFamily: 'sans-serif',\n    lineHeight: 1.2,\n    padding: 6,\n    align: 'center',\n    spaceBetween: 12,\n  };\n  private config?: BoxGraphConfig;\n  private textSize?: Size;\n  private contentSize?: Size;\n  private textPosition?: Position;\n  private borderSize?: Size;\n  constructor(parent: Graph) {\n    super(parent);\n  }\n  public setData(data: BoxGraphData) {\n    const newConfig = Object.assign({}, BoxGraphType.defaultConfig, data);\n    delete newConfig.layout;\n    delete newConfig.children;\n    const textSizeNeedsUpdate = !this.config ||\n      this.config.label !== newConfig.label ||\n      this.config.fontSize !== newConfig.fontSize ||\n      this.config.fontFamily !== newConfig.fontFamily ||\n      this.config.lineHeight !== newConfig.lineHeight;\n    if (textSizeNeedsUpdate) {\n      const ctx = this.parent.root.ctx;\n      ctx.font = `${newConfig.fontSize}px ${newConfig.fontFamily}`;\n      const lines = newConfig.label ? (newConfig.label as string)\n        .split('\\n') : [];\n      this.textSize = {\n        width: Math.max(...lines.map((x) => ctx.measureText(x).width), 0),\n        height: lines.length * newConfig.fontSize * newConfig.lineHeight,\n      };\n    }\n    const layoutContentSize = this.parent.componentLayout!.getContentSize()!;\n    this.contentSize = {\n      width: layoutContentSize.width + 2 * newConfig.padding,\n      height: layoutContentSize.height + 2 * newConfig.padding,\n    };\n    this.parent.componentLayout!.setPosition({ x: 0, y: 0 });\n    this.textPosition = { x: 0, y: 0 };\n    if (newConfig.label) {\n      if (newConfig.labelPosition === 'left' ||\n          newConfig.labelPosition === 'right') {\n        this.contentSize.width += this.textSize!.width + newConfig.spaceBetween;\n        if (this.textSize!.height > layoutContentSize.height) {\n          this.contentSize.height = this.textSize!.height +\n            2 * newConfig.padding;\n        }\n        if (newConfig.labelPosition === 'left') {\n          this.parent.componentLayout!.getPosition().x = (this.textSize!.width +\n            newConfig.spaceBetween) / 2;\n          this.textPosition.x = -(layoutContentSize.width +\n            newConfig.spaceBetween) / 2;\n        } else {\n          this.parent.componentLayout!.getPosition().x = -(this.textSize!.width +\n            newConfig.spaceBetween) / 2;\n          this.textPosition.x = (layoutContentSize.width +\n            newConfig.spaceBetween) / 2;\n        }\n      } else {\n        this.contentSize.height += this.textSize!.height +\n          newConfig.spaceBetween;\n        if (this.textSize!.width > layoutContentSize.width) {\n          this.contentSize.width = this.textSize!.width + 2 * newConfig.padding;\n        }\n        if (newConfig.labelPosition === 'bottom') {\n          this.parent.componentLayout!.getPosition().y = -(this.textSize!.height +\n            newConfig.spaceBetween) / 2;\n          this.textPosition.y = (layoutContentSize.height +\n            newConfig.spaceBetween) / 2;\n        } else {\n          this.parent.componentLayout!.getPosition().y = (this.textSize!.height +\n            newConfig.spaceBetween) / 2;\n          this.textPosition.y = -(layoutContentSize.height +\n            newConfig.spaceBetween) / 2;\n        }\n      }\n    }\n    this.borderSize = {\n      width: this.contentSize.width + newConfig.strokeWidth,\n      height: this.contentSize.height + newConfig.strokeWidth,\n    };\n    this.config = newConfig;\n  }\n  public render() {\n    const rect = {\n      is: 'v-rect',\n      key: 'rect',\n      config: {\n        x: -this.contentSize!.width / 2,\n        y: -this.contentSize!.height / 2,\n        width: this.contentSize!.width,\n        height: this.contentSize!.height,\n        fill: this.config!.style === 'filled' ?\n          this.config!.fillColor : undefined,\n        stroke: this.config!.strokeWidth > 0 ?\n          this.config!.strokeColor : undefined,\n        strokeWidth: this.config!.strokeWidth,\n      },\n    };\n    const rendered: object[] = [rect];\n    if (this.config!.label) {\n      const text = {\n        is: 'v-text',\n        key: 'text',\n        config: {\n          x: this.textPosition!.x - this.textSize!.width / 2,\n          y: this.textPosition!.y - this.textSize!.height / 2,\n          text: this.config!.label,\n          fontSize: this.config!.fontSize,\n          fontFamily: this.config!.fontFamily,\n          lineHeight: this.config!.lineHeight,\n          align: this.config!.align,\n        },\n      };\n      rendered.push(text);\n    }\n    rendered.push(this.parent.componentLayout!.render());\n    return rendered;\n  }\n  public getBoundingBoxSize() {\n    return this.borderSize!;\n  }\n  public distanceToBorder(angle: number) {\n    return Math.min(\n      Math.abs(this.borderSize!.width / 2 / Math.cos(angle)),\n      Math.abs(this.borderSize!.height / 2 / Math.sin(angle)),\n    );\n  }\n}\n","import BoxGraphType from '@/graph/graph/type/BoxGraphType';\nimport GraphType from '@/graph/graph/type/GraphType';\nimport Graph from '@/graph/graph/Graph';\nimport {GraphData} from '@/graph/base/data';\n\n// noinspection JSUnusedLocalSymbols\nexport default function graphTypeFactory(data: GraphData)\n    : new (parent: Graph) => GraphType {\n  return BoxGraphType;\n}\n","import Positioned from '@/graph/base/Positioned';\nimport {Size} from '@/graph/base/data';\nimport Root from '@/graph/Root';\n\nexport default abstract class Port extends Positioned {\n  public readonly root: Root;\n  public initialPlaced: boolean; // for graph layout\n  public id: string;\n  protected constructor(root: Root, parent: Positioned | null = null) {\n    super(parent);\n    this.root = root;\n    this.initialPlaced = false;\n    this.id = '';\n  }\n  public findPort(id: string[]): Port | null {\n    if (id.length === 0) {\n      return this;\n    }\n    return null;\n  }\n  public abstract getBoundingBoxSize(): Size;\n  public abstract distanceToBorder(angle: number): number;\n}\n","import Graph from '@/graph/graph/Graph';\nimport {GraphPhysicsData} from '@/graph/base/data';\nimport GraphLayout, {LayoutData} from '@/graph/graph/layout/GraphLayout';\n\nexport default abstract class GraphPhysics {\n  protected readonly graph: Graph;\n  protected readonly layout: GraphLayout;\n  public constructor(graph: Graph, layout: GraphLayout) {\n    this.graph = graph;\n    this.layout = layout;\n  }\n  public abstract solve(config: GraphPhysicsData | undefined,\n                        data: LayoutData): void;\n  public abstract step(): boolean;\n}\n","import GraphPhysics from '@/graph/graph/physics/GraphPhysics';\nimport {BarnesHutGraphPhysicsData} from '@/graph/base/data';\nimport {LayoutData} from '@/graph/graph/layout/GraphLayout';\n\ninterface BarnesHutGraphPhysicsConfig {\n  theta: number;\n  gravitationalConstant: number;\n  centralGravity: number;\n  springLength: number;\n  springConstant: number;\n}\n\nexport default class BarnesHutGraphPhysics extends GraphPhysics {\n  private static defaultConfig: BarnesHutGraphPhysicsConfig = {\n    theta: 0.5,\n    gravitationalConstant: -2000,\n    centralGravity: 0.3,\n    springLength: 95,\n    springConstant: 0.04,\n  };\n  private config?: BarnesHutGraphPhysicsConfig;\n  private layoutData?: LayoutData;\n  public solve(config: BarnesHutGraphPhysicsData | undefined,\n               data: LayoutData) {\n    this.config = Object.assign({},\n      BarnesHutGraphPhysics.defaultConfig, config);\n    this.layoutData = data;\n  }\n  public step(): boolean {\n    return false;\n  }\n}\n","import {GraphPhysicsData} from '@/graph/base/data';\nimport Graph from '@/graph/graph/Graph';\nimport GraphPhysics from '@/graph/graph/physics/GraphPhysics';\nimport BarnesHutGraphPhysics from '@/graph/graph/physics/BarnesHutGraphPhysics';\nimport GraphLayout from '@/graph/graph/layout/GraphLayout';\n\nexport default function physicsFactory(data: GraphPhysicsData | undefined)\n    : new (graph: Graph, layout: GraphLayout) => GraphPhysics {\n  switch (data && data.type) {\n    default:\n      return BarnesHutGraphPhysics;\n  }\n}\n","/*\n * recordLabel\n *   : field ('|' field )*\n *   ;\n * field\n *   : (’<’ string ’>’)? string?\n *   | '{' recordLabel '}'\n *   ;\n */\n\nenum TokenEnum {\n  EOF,\n  VERTICAL_BAR,\n  LEFT_CURLY_BRACE,\n  RIGHT_CURLY_BRACE,\n  LEFT_ANGLE_BRACE,\n  RIGHT_ANGLE_BRACE,\n  STRING,\n}\n\ninterface Token {\n  type: TokenEnum;\n  text?: string;\n}\n\nexport interface Record {\n  type: 'record';\n  children: RecordData[];\n}\n\nexport interface Field {\n  type: 'field';\n  port?: string;\n  text?: string;\n}\n\nexport type RecordData = Record | Field;\n\nexport default function recordParser(record: string): RecordData {\n  let position = 0;\n  const buffer: Token[] = [];\n  function lexer(): Token {\n    if (buffer.length) {\n      return buffer.pop()!;\n    }\n    while (position < record.length &&\n           ' \\t\\n\\r\\v'.indexOf(record[position]) > -1) {\n      ++position;\n    }\n    if (position >= record.length) {\n      return { type: TokenEnum.EOF };\n    }\n    switch (record[position]) {\n      case '|':\n        ++position;\n        return { type: TokenEnum.VERTICAL_BAR };\n      case '{':\n        ++position;\n        return { type: TokenEnum.LEFT_CURLY_BRACE };\n      case '}':\n        ++position;\n        return { type: TokenEnum.RIGHT_CURLY_BRACE };\n      case '<':\n        ++position;\n        return { type: TokenEnum.LEFT_ANGLE_BRACE };\n      case '>':\n        ++position;\n        return { type: TokenEnum.RIGHT_ANGLE_BRACE };\n      default: {\n        let text = '';\n        while (position < record.length &&\n               ' \\t\\n\\r\\v|{}<>'.indexOf(record[position]) === -1) {\n          if (record[position] === '\\\\') {\n            ++position;\n            if (position === record.length) {\n              throw new Error('Unexpected end of escape sequence');\n            }\n            switch (record[position]) {\n              case 'n':\n                text += '\\n';\n                break;\n              default:\n                text += record[position];\n            }\n          } else {\n            text += record[position];\n          }\n          ++position;\n        }\n        return { type: TokenEnum.STRING, text };\n      }\n    }\n  }\n  function parseRecordLabel(): Record {\n    const children = [parseField()];\n    let token;\n    while ((token = lexer())!.type === TokenEnum.VERTICAL_BAR) {\n      children.push(parseField());\n    }\n    buffer.push(token);\n    return { type: 'record', children };\n  }\n  function parseField(): RecordData {\n    let token = lexer();\n    if (token.type === TokenEnum.LEFT_CURLY_BRACE) {\n      const ret = parseRecordLabel();\n      if (lexer().type !== TokenEnum.RIGHT_CURLY_BRACE) {\n        throw new Error('Expect \\'}\\'');\n      }\n      return ret;\n    }\n    const result: Field = { type: 'field' };\n    if (token.type === TokenEnum.LEFT_ANGLE_BRACE) {\n      token = lexer();\n      if (token.type === TokenEnum.STRING) {\n        let port = token.text;\n        while ((token = lexer()).type === TokenEnum.STRING) {\n          port += ' ' + token.text;\n        }\n        result.port = port;\n      }\n      if (token.type !== TokenEnum.RIGHT_ANGLE_BRACE) {\n        throw new Error('Expect \\'>\\'');\n      }\n      token = lexer();\n    }\n    if (token.type === TokenEnum.STRING) {\n      let text = token.text;\n      while ((token = lexer()).type === TokenEnum.STRING) {\n        text += ' ' + token.text;\n      }\n      result.text = text;\n    }\n    buffer.push(token);\n    return result;\n  }\n  const tree = parseRecordLabel();\n  if (lexer().type !== TokenEnum.EOF) {\n    throw new Error('Unexpected token');\n  }\n  return tree;\n}\n","import {GraphData} from '@/graph/base/data';\nimport Root from '@/graph/Root';\nimport renderableFactory from '@/graph/base/renderableFactory';\nimport Edge from '@/graph/edge/Edge';\nimport layoutFactory from '@/graph/graph/layout';\nimport componentFactory from '@/graph/graph/component';\nimport graphTypeFactory from '@/graph/graph/type';\nimport Port from '@/graph/base/Port';\nimport Renderable from '@/graph/base/Renderable';\nimport Positioned from '@/graph/base/Positioned';\nimport GraphLayout, {LayoutData, LayoutEdgeData} from '@/graph/graph/layout/GraphLayout';\nimport ComponentLayout from '@/graph/graph/component/ComponentLayout';\nimport GraphType from '@/graph/graph/type/GraphType';\nimport GraphPhysics from '@/graph/graph/physics/GraphPhysics';\nimport physicsFactory from '@/graph/graph/physics';\n\nexport default class Graph extends Port implements Renderable {\n  public static getId(data: GraphData) {\n    if (!data.id) {\n      throw new Error('Missing id field for graph');\n    }\n    return data.id;\n  }\n  public readonly graph: Graph | null;\n  public fullId?: string;\n  public depth?: number;\n  public children?: Map<string, Renderable>;\n  public ports?: Map<string, Port>;\n  public subgraphs?: Map<string, Graph>;\n  public edges?: Map<string, Edge>;\n  public layouts?: GraphLayout[];\n  public physics?: GraphPhysics[];\n  public layoutsData?: LayoutData[];\n  public componentLayout?: ComponentLayout;\n  private graphType?: GraphType;\n  constructor(root: Root,\n              graph: Graph | null = null,\n              parent: Positioned | null = null) {\n    super(root, parent);\n    this.graph = graph;\n  }\n  public setData(data: GraphData) {\n    this.id = Graph.getId(data);\n    const newChildren = new Map();\n    this.depth = data.depth || 0;\n    this.fullId = data.parentId ? `${data.parentId}:${this.id}` : this.id;\n    if (data.children) {\n      for (const child of data.children) {\n        const type = renderableFactory(child);\n        const id = type.getId(child);\n        if (newChildren.has(id)) {\n          throw new Error('Duplicated id');\n        }\n        const newChild = this.children &&\n            this.children.has(id) &&\n            this.children.get(id)!.constructor === type ?\n            this.children.get(id)! : new type(this.root, this, null);\n        child.depth = this.depth + 1;\n        child.parentId = this.fullId;\n        newChild.setData(child);\n        newChildren.set(id, newChild);\n      }\n    }\n    // Create maps and arrays\n    this.children = newChildren;\n    this.edges = new Map();\n    this.ports = new Map();\n    this.subgraphs = new Map();\n    for (const [name, renderable] of this.children.entries()) {\n      if (renderable instanceof Edge) {\n        this.edges.set(name, renderable);\n      } else {\n        this.ports.set(name, renderable as any);\n        if (renderable instanceof Graph) {\n          this.subgraphs.set(name, renderable as any);\n        }\n      }\n    }\n    // Create adjacency list\n    const adjacencyList: Map<Port, Port[]> = new Map();\n    const edgesData: LayoutEdgeData[] = [];\n    for (const edge of this.edges.values()) {\n      const from = this.findPort(edge.from!.split(':'));\n      const to = this.findPort(edge.to!.split(':'));\n      const fromBelonging = this.findBelongingPort(edge.from!);\n      const toBelonging = this.findBelongingPort(edge.to!);\n      if (from && to && fromBelonging && toBelonging) {\n        if (!adjacencyList.has(fromBelonging)) {\n          adjacencyList.set(fromBelonging, []);\n        }\n        if (!adjacencyList.has(toBelonging)) {\n          adjacencyList.set(toBelonging, []);\n        }\n        adjacencyList.get(fromBelonging)!.push(toBelonging);\n        adjacencyList.get(toBelonging)!.push(fromBelonging);\n        edgesData.push({ from, to, fromBelonging, toBelonging, edge });\n      } else {\n        throw new Error('Cannot find starting or ending port of edge');\n      }\n    }\n    // Compute connected components by DFS\n    const unvisited: Set<Port> = new Set(this.ports.values());\n    this.layoutsData = [];\n    const calculateConnectedComponent = (from: Port) => {\n      unvisited.delete(from);\n      const component = this.layoutsData![this.layoutsData!.length - 1];\n      component.ports.push(from);\n      const adjacency = adjacencyList.get(from);\n      if (adjacency) {\n        for (const to of adjacency) {\n          if (unvisited.has(to)) {\n            calculateConnectedComponent(to);\n          }\n        }\n      }\n    };\n    while (unvisited.size) {\n      const node = unvisited.values().next().value;\n      const component: LayoutData = {\n        ports: [],\n        edges: [],\n        children: [],\n      };\n      this.layoutsData.push(component);\n      calculateConnectedComponent(node);\n    }\n    // Classify edges to belonging component\n    const portToComponent: Map<Port, LayoutData> = new Map();\n    for (const component of this.layoutsData) {\n      for (const port of component.ports) {\n        portToComponent.set(port, component);\n      }\n    }\n    for (const edgeData of edgesData) {\n      const {fromBelonging} = edgeData;\n      portToComponent.get(fromBelonging)!.edges.push(edgeData);\n    }\n    // Add children\n    for (const component of this.layoutsData) {\n      component.children = (component.ports as any[])\n        .concat(component.edges.map((x) => x.edge));\n    }\n    // Create layout\n    const componentClass = componentFactory(data.component);\n    if (!this.componentLayout ||\n        this.componentLayout.constructor !== componentClass) {\n      this.componentLayout = new componentClass(this, this);\n    }\n    const layoutClass = layoutFactory(data.layout);\n    const physicsClass = physicsFactory(data.physics);\n    const newLayouts: GraphLayout[] = [];\n    const newPhysics: GraphPhysics[] = [];\n    for (let i = 0; i < this.layoutsData.length; ++i) {\n      const layout = this.layouts && i < this.layouts.length &&\n        this.layouts[i].constructor === layoutClass ?\n        this.layouts[i] : new layoutClass(this, this.componentLayout);\n      const physics = this.physics && i < this.physics.length &&\n        this.physics[i].constructor === physicsClass ?\n        this.physics[i] : new physicsClass(this, layout);\n      for (const child of this.layoutsData[i].children) {\n        (child as any).parent = layout;\n      }\n      layout.solve(data.layout, this.layoutsData[i], i);\n      physics.solve(data.physics, this.layoutsData[i]);\n      newLayouts.push(layout);\n      newPhysics.push(physics);\n    }\n    this.layouts = newLayouts;\n    this.physics = newPhysics;\n    this.componentLayout.solve(data.component);\n    const typeClass = graphTypeFactory(data);\n    if (!this.graphType || this.graphType.constructor !== typeClass) {\n      this.graphType = new typeClass(this);\n    }\n    this.graphType.setData(data);\n  }\n  public step(): boolean {\n    let updated = false;\n    if (this.subgraphs) {\n      for (const subgraph of this.subgraphs.values()) {\n        if (subgraph.step()) {\n          updated = true;\n        }\n      }\n    }\n    if (this.physics) {\n      for (const physics of this.physics) {\n        if (physics.step()) {\n          updated = true;\n        }\n      }\n    }\n    return updated;\n  }\n  public render() {\n    return {\n      is: 'Group',\n      key: this.id,\n      draggable: true,\n      fullId: this.fullId,\n      config: {\n        x: this.position.x,\n        y: this.position.y,\n      },\n      children: this.graphType!.render(),\n    };\n  }\n  public findBelongingPort(id: string): Port | null {\n    id = id.split(':')[0];\n    if (this.ports!.has(id)) {\n      return this.ports!.get(id)!;\n    }\n    for (const graph of this.subgraphs!.values()) {\n      if (graph.findBelongingPort(id)) {\n        return graph;\n      }\n    }\n    return null;\n  }\n  public findPort(id: string[]): Port | null {\n    if (id.length === 0) {\n      return this;\n    }\n    if (this.ports!.has(id[0])) {\n      const node = this.ports!.get(id[0])!;\n      return node.findPort(id.slice(1));\n    }\n    for (const graph of this.subgraphs!.values()) {\n      const node = graph.findPort(id);\n      if (node) {\n        return node;\n      }\n    }\n    return null;\n  }\n  public getBoundingBoxSize() {\n    return this.graphType!.getBoundingBoxSize();\n  }\n  public distanceToBorder(angle: number) {\n    return this.graphType!.distanceToBorder(angle);\n  }\n}\n\n\n\n\n\n\n","import Node from '@/graph/node/Node';\nimport {NodeData, Size} from '@/graph/base/data';\nimport Port from '@/graph/base/Port';\n\nexport default abstract class NodeType {\n  public readonly parent: Node;\n  protected constructor(parent: Node) {\n    this.parent = parent;\n  }\n  public abstract setData(data: NodeData): void;\n  public abstract render(): object[];\n  public findPort(id: string[]): Port | null {\n    return null;\n  }\n  public abstract getBoundingBoxSize(): Size;\n  public abstract distanceToBorder(angle: number): number;\n}\n","import NodeType from '@/graph/node/type/NodeType';\nimport Node from '@/graph/node/Node';\nimport {BoxNodeData, Size} from '@/graph/base/data';\n\ninterface BoxNodeConfig {\n  label: string | null;\n  style: 'solid' | 'filled';\n  fillColor: string;\n  strokeColor: string;\n  strokeWidth: number;\n  fontSize: number;\n  fontFamily: string;\n  lineHeight: number;\n  padding: number;\n  align: 'left' | 'center' | 'right';\n}\n\nexport default class BoxNodeType extends NodeType {\n  private static defaultConfig: BoxNodeConfig = {\n    label: null,\n    style: 'solid',  // or 'filled'\n    fillColor: 'white',\n    strokeColor: 'black',\n    strokeWidth: 1,\n    fontSize: 12,\n    fontFamily: 'sans-serif',\n    lineHeight: 1.2,\n    padding: 4,\n    align: 'center',\n  };\n  private config?: BoxNodeConfig;\n  private textSize?: Size;\n  private contentSize?: Size;\n  private borderSize?: Size;\n  constructor(parent: Node) {\n    super(parent);\n  }\n  public setData(data: BoxNodeData) {\n    const newConfig = Object.assign({}, BoxNodeType.defaultConfig, data);\n    const textSizeNeedsUpdate = !this.config ||\n      this.config.label !== newConfig.label ||\n      this.config.fontSize !== newConfig.fontSize ||\n      this.config.fontFamily !== newConfig.fontFamily ||\n      this.config.lineHeight !== newConfig.lineHeight;\n    const contentSizeNeedsUpdate = textSizeNeedsUpdate ||\n      this.config!.padding !== newConfig.padding;\n    const borderSizeNeedsUpdate = contentSizeNeedsUpdate ||\n      this.config!.strokeWidth !== newConfig.strokeWidth;\n    if (textSizeNeedsUpdate) {\n      const ctx = this.parent.root.ctx;\n      ctx.font = `${newConfig.fontSize}px ${newConfig.fontFamily}`;\n      const lines = newConfig.label ? newConfig.label.split('\\n') : [];\n      this.textSize = {\n        width: Math.max(...lines.map((x) => ctx.measureText(x).width), 0),\n        height: lines.length * newConfig.fontSize * newConfig.lineHeight,\n      };\n    }\n    if (contentSizeNeedsUpdate) {\n      this.contentSize = {\n        width: this.textSize!.width + 2 * newConfig.padding,\n        height: this.textSize!.height + 2 * newConfig.padding,\n      };\n    }\n    if (borderSizeNeedsUpdate) {\n      // Konva's border extends towards both inner and outer\n      this.borderSize = {\n        width: this.contentSize!.width + newConfig.strokeWidth,\n        height: this.contentSize!.height + newConfig.strokeWidth,\n      };\n    }\n    this.config = newConfig;\n  }\n  public render() {\n    const rect = {\n      is: 'v-rect',\n      key: 'rect',\n      config: {\n        x: -this.contentSize!.width / 2,\n        y: -this.contentSize!.height / 2,\n        width: this.contentSize!.width,\n        height: this.contentSize!.height,\n        fill: this.config!.style === 'filled' ?\n          this.config!.fillColor : undefined,\n        stroke: this.config!.strokeWidth > 0 ?\n          this.config!.strokeColor : undefined,\n        strokeWidth: this.config!.strokeWidth,\n      },\n    };\n    const rendered: object[] = [rect];\n    if (this.config!.label) {\n      const text = {\n        is: 'v-text',\n        key: 'text',\n        config: {\n          x: -this.contentSize!.width / 2,\n          y: -this.contentSize!.height / 2,\n          text: this.config!.label,\n          fontSize: this.config!.fontSize,\n          fontFamily: this.config!.fontFamily,\n          lineHeight: this.config!.lineHeight,\n          padding: this.config!.padding,\n          align: this.config!.align,\n        },\n      };\n      rendered.push(text);\n    }\n    return rendered;\n  }\n  public getBoundingBoxSize() {\n    return this.borderSize!;\n  }\n  public distanceToBorder(angle: number) {\n    return Math.min(\n      Math.abs(this.borderSize!.width / 2 / Math.cos(angle)),\n      Math.abs(this.borderSize!.height / 2 / Math.sin(angle)),\n    );\n  }\n}\n","import RecordNodeType from '@/graph/node/type/RecordNodeType';\nimport {Field, Record, RecordData} from '@/graph/node/type/recordParser';\nimport {Size} from '@/graph/base/data';\nimport Root from '@/graph/Root';\nimport Port from '@/graph/base/Port';\n\nexport default class RecordCell extends Port {\n  private readonly nodeType: RecordNodeType;\n  private isField?: boolean;\n  private isHorizontal?: boolean;\n  private label?: string;\n  private children?: RecordCell[];\n  private textSize?: Size;\n  private contentSize?: Size;\n  private cellSize?: Size;\n  constructor(root: Root, parent: Port, nodeType: RecordNodeType) {\n    super(root, parent);\n    this.nodeType = nodeType;\n  }\n  public setData(data: RecordData, isHorizontal = true) {\n    this.isField = data.type === 'field';\n    this.isHorizontal = isHorizontal;\n    if (this.isField) {\n      const fieldData = data as Field;\n      if (fieldData.port) {\n        this.nodeType.getPorts()!.set(fieldData.port, this);\n      }\n      const ctx = this.root.ctx;\n      const config = this.nodeType.getConfig()!;\n      this.label = fieldData.text;\n      ctx.font = `${config.fontSize}px ${config.fontFamily}`;\n      const lines =  this.label ?  this.label.split('\\n') : [];\n      this.textSize = {\n        width: Math.max(...lines.map((x) => ctx.measureText(x).width), 0),\n        height: lines.length * config.fontSize * config.lineHeight,\n      };\n      this.contentSize = {\n        width: this.textSize.width + 2 * config.padding,\n        height: this.textSize.height + 2 * config.padding,\n      };\n      this.cellSize = {\n        width: this.contentSize.width,\n        height: this.contentSize.height,\n      };\n    } else {\n      const recordData = data as Record;\n      this.children = [];\n      for (const child of recordData.children) {\n        const cell = new RecordCell(this.root, this, this.nodeType);\n        cell.setData(child, !isHorizontal);\n        this.children.push(cell);\n      }\n      if (isHorizontal) {\n        this.cellSize = {\n          width: this.children.map((x: RecordCell) => x.cellSize!.width)\n            .reduce((a, b) => a + b, 0),\n          height: Math.max(...this.children.map(\n            (x: RecordCell) => x.cellSize!.height)),\n        };\n      } else {\n        this.cellSize = {\n          width: Math.max(...this.children.map(\n            (x: RecordCell) => x.cellSize!.width)),\n          height: this.children.map((x: RecordCell) => x.cellSize!.height)\n            .reduce((a, b) => a + b, 0),\n        };\n      }\n    }\n  }\n  public setCellSize(width: number, height: number) {\n    if (!this.isField) {\n      if (this.isHorizontal) {\n        const deltaWidth = (width - this.cellSize!.width) / this.children!.length;\n        let startX = -width / 2;\n        for (const child of this.children!) {\n          child.setCellSize(child.cellSize!.width + deltaWidth, height);\n          child.position = {\n            x: startX + child.cellSize!.width / 2,\n            y: 0,\n          };\n          startX += child.cellSize!.width;\n        }\n      } else {\n        const deltaHeight = (height - this.cellSize!.height) /\n          this.children!.length;\n        let startY = -height / 2;\n        for (const child of this.children!) {\n          child.setCellSize(width, child.cellSize!.height + deltaHeight);\n          child.position = {\n            x: 0,\n            y: startY + child.cellSize!.height / 2,\n          };\n          startY += child.cellSize!.height;\n        }\n      }\n    }\n    this.cellSize = { width, height };\n  }\n  public getCellSize(): Size | undefined {\n    return this.cellSize;\n  }\n  public render(): object[] {\n    let rendered: object[];\n    if (this.isField) {\n      const config = this.nodeType.getConfig()!;\n      rendered = [\n        {\n          is: 'v-rect',\n          key: 'rect',\n          config: {\n            x: -this.cellSize!.width / 2,\n            y: -this.cellSize!.height / 2,\n            width: this.cellSize!.width,\n            height: this.cellSize!.height,\n            fill: config.style === 'filled' ? config.fillColor : undefined,\n            stroke: config.strokeWidth > 0 ? config.strokeColor : undefined,\n            strokeWidth: config.strokeWidth,\n          },\n        },\n      ];\n      if (this.label) {\n        rendered.push({\n          is: 'v-text',\n          key: 'text',\n          config: {\n            x: -this.contentSize!.width / 2,\n            y: -this.contentSize!.height / 2,\n            text: this.label,\n            fontSize: config.fontSize,\n            fontFamily: config.fontFamily,\n            lineHeight: config.lineHeight,\n            padding: config.padding,\n            align: config.align,\n          },\n        });\n      }\n    } else {\n      rendered = this.children!.map((x, i) => {\n        const position = x.getPosition();\n        return {\n          is: 'Group',\n          key: `record-${i}`,\n          config: {\n            x: position.x,\n            y: position.y,\n          },\n          children: x.render(),\n        };\n      });\n    }\n    return rendered;\n  }\n  public getBoundingBoxSize(): Size {\n    const config = this.nodeType.getConfig()!;\n    return {\n      width: this.cellSize!.width + config.strokeWidth,\n      height: this.cellSize!.height + config.strokeWidth,\n    };\n  }\n  public distanceToBorder(angle: number): number {\n    const borderSize = this.getBoundingBoxSize();\n    return Math.min(\n      Math.abs(borderSize.width / 2 / Math.cos(angle)),\n      Math.abs(borderSize.height / 2 / Math.sin(angle)),\n    );\n  }\n}\n","import NodeType from './NodeType';\nimport Node from '@/graph/node/Node';\nimport recordParser from './recordParser';\nimport RecordCell from './RecordCell';\nimport {RecordNodeData, Size} from '@/graph/base/data';\nimport Port from '@/graph/base/Port';\n\ninterface RecordNodeConfig {\n  label: string;\n  direction: 'horizontal' | 'vertical';\n  style: 'solid' | 'filled';\n  fillColor: string;\n  strokeColor: string;\n  strokeWidth: number;\n  fontSize: number;\n  fontFamily: string;\n  lineHeight: number;\n  padding: number;\n  align: 'left' | 'center' | 'right';\n}\n\nexport default class RecordNodeType extends NodeType {\n  public static defaultConfig: RecordNodeConfig = {\n    label: '',\n    direction: 'horizontal', // or 'vertical'\n    style: 'solid',\n    fillColor: 'white',\n    strokeColor: 'black',\n    strokeWidth: 1,\n    fontSize: 12,\n    fontFamily: 'sans-serif',\n    lineHeight: 1.2,\n    padding: 4,\n    align: 'center',\n  };\n  private config?: RecordNodeConfig;\n  private ports?: Map<string, Port>;\n  private root?: RecordCell;\n  private borderSize?: Size;\n  constructor(parent: Node) {\n    super(parent);\n  }\n  public getConfig(): RecordNodeConfig | undefined {\n    return this.config;\n  }\n  public getPorts(): Map<string, Port> | undefined {\n    return this.ports;\n  }\n  public setData(data: RecordNodeData) {\n    const newConfig = Object.assign({}, RecordNodeType.defaultConfig, data);\n    const contentNeedsUpdate = !this.config ||\n      this.config.label !== newConfig.label ||\n      this.config.direction !== newConfig.direction ||\n      this.config.fontSize !== newConfig.fontSize ||\n      this.config.fontFamily !== newConfig.fontFamily ||\n      this.config.lineHeight !== newConfig.lineHeight ||\n      this.config.padding !== newConfig.padding;\n    const borderNeedsUpdate = contentNeedsUpdate ||\n      this.config!.strokeWidth !== newConfig.strokeWidth;\n    this.config = newConfig;\n    if (contentNeedsUpdate) {\n      const record = recordParser(data.label);\n      this.root = new RecordCell(this.parent.root, this.parent, this);\n      this.ports = new Map();\n      this.root.setData(record, this.config.direction === 'horizontal');\n      const rootCellSize = this.root.getCellSize()!;\n      this.root.setCellSize(rootCellSize.width, rootCellSize.height);\n    }\n    if (borderNeedsUpdate) {\n      const rootCellSize = this.root!.getCellSize()!;\n      this.borderSize = {\n        width: rootCellSize.width + this.config.strokeWidth,\n        height: rootCellSize.height + this.config.strokeWidth,\n      };\n    }\n  }\n  public render() {\n    return this.root!.render();\n  }\n  public findPort(id: string[]): Port | null {\n    if (id.length === 1) {\n      const founded = this.ports!.get(id[0]);\n      if (founded) {\n        return founded;\n      }\n      return null;\n    }\n    return null;\n  }\n  public getBoundingBoxSize() {\n    return this.borderSize!;\n  }\n  public distanceToBorder(angle: number) {\n    return Math.min(\n      Math.abs(this.borderSize!.width / 2 / Math.cos(angle)),\n      Math.abs(this.borderSize!.height / 2 / Math.sin(angle)),\n    );\n  }\n}\n","import TableNodeType from '@/graph/node/type/TableNodeType';\nimport Root from '@/graph/Root';\nimport {Element} from 'xml-js';\nimport {Size} from '@/graph/base/data';\nimport Port from '@/graph/base/Port';\n\ninterface TableCellConfig {\n  rowSpan: number;\n  columnSpan: number;\n  border: number;\n  backgroundColor: string;\n}\n\nexport default class TableCell extends Port {\n  public rowOffset?: number;\n  public columnOffset?: number;\n  public contentSize?: Size;\n  public cellSize?: Size;\n  private readonly nodeType: TableNodeType;\n  private config?: TableCellConfig;\n  private port?: string;\n  private label?: string;\n  private textSize?: Size;\n  constructor(root: Root, parent: Port, nodeType: TableNodeType) {\n     super(root, parent);\n     this.nodeType = nodeType;\n  }\n  public setData(data: any) {\n    this.config = {\n      rowSpan: 1,\n      columnSpan: 1,\n      border: this.nodeType.getTableConfig()!.cellBorder,\n      backgroundColor: 'white',\n    };\n    if (data.attributes) {\n      for (const attribute of Object.keys(data.attributes)) {\n        const value = data.attributes[attribute];\n        switch (attribute.toLowerCase()) {\n          case 'rowspan':\n            this.config.rowSpan = parseInt(value, 10);\n            break;\n          case 'colspan':\n            this.config.columnSpan = parseInt(value, 10);\n            break;\n          case 'border':\n            this.config.border = parseInt(value, 10);\n            break;\n          case 'bgcolor':\n            this.config.backgroundColor = value;\n            break;\n          case 'port':\n            this.port = value;\n            break;\n          default:\n            throw new Error('Unknown attribute for table cell');\n        }\n      }\n    }\n    function getText(element: Element): string {\n      switch (element.type) {\n        case 'text':\n          if (typeof element.text === 'string') {\n            return element.text;\n          }\n          return '';\n        case 'element':\n          if (element.name && element.name.toLowerCase() === 'br') {\n            return '\\n';\n          }\n          if (element.elements) {\n            return element.elements.map(getText).join('');\n          } else {\n            return '';\n          }\n        default:\n          throw new Error('Unknown element type');\n      }\n    }\n    this.label = getText(data);\n    const parentConfig = this.nodeType.getConfig()!;\n    const tableConfig = this.nodeType.getTableConfig()!;\n    const ctx = this.root.ctx;\n    ctx.font = `${parentConfig.fontSize}px ${parentConfig.fontFamily}`;\n    const lines = this.label ? this.label.split('\\n') : [];\n    this.textSize = {\n      width: Math.max(...lines.map((x) => ctx.measureText(x).width), 0),\n      height: lines.length * parentConfig.fontSize * parentConfig.lineHeight,\n    };\n    this.contentSize = {\n      width: this.textSize.width + 2 * tableConfig.cellPadding,\n      height: this.textSize.height + 2 * tableConfig.cellPadding,\n    };\n    this.cellSize = {\n      width: this.contentSize.width,\n      height: this.contentSize.height,\n    };\n    this.rowOffset = 0;\n    this.columnOffset = 0;\n  }\n  public render() {\n    const rect = {\n      is: 'v-rect',\n      key: 'rect',\n      config: {\n        x: -this.cellSize!.width / 2,\n        y: -this.cellSize!.height / 2,\n        width: this.cellSize!.width,\n        height: this.cellSize!.height,\n        fill: this.config!.backgroundColor,\n        stroke: this.config!.border > 0 ? 'black' : undefined,\n        strokeWidth: this.config!.border,\n      },\n    };\n    const rendered: object[] = [rect];\n    if (this.label) {\n      const parentConfig = this.nodeType.getConfig()!;\n      const text = {\n        is: 'v-text',\n        key: 'text',\n        config: {\n          x: -this.contentSize!.width / 2,\n          y: -this.contentSize!.height / 2,\n          text: this.label,\n          fontSize: parentConfig.fontSize,\n          fontFamily: parentConfig.fontFamily,\n          lineHeight: parentConfig.lineHeight,\n          padding: this.nodeType.getTableConfig()!.cellPadding,\n          align: 'center',\n        },\n      };\n      rendered.push(text);\n    }\n    return {\n      is: 'Group',\n      key: `cell-${this.rowOffset}-${this.columnOffset}`,\n      config: {\n        x: this.position.x,\n        y: this.position.y,\n      },\n      children: rendered,\n    };\n  }\n  public getConfig(): TableCellConfig | undefined {\n    return this.config;\n  }\n  public getPort(): string | undefined {\n    return this.port;\n  }\n  public getBoundingBoxSize() {\n    return {\n      width: this.cellSize!.width + this.config!.border,\n      height: this.cellSize!.height + this.config!.border,\n    };\n  }\n  public distanceToBorder(angle: number) {\n    const borderSize = this.getBoundingBoxSize();\n    return Math.min(\n      Math.abs(borderSize.width / 2 / Math.cos(angle)),\n      Math.abs(borderSize.height / 2 / Math.sin(angle)),\n    );\n  }\n}\n","import convert, {Element} from 'xml-js';\nimport NodeType from './NodeType';\nimport TableCell from './TableCell';\nimport Node from '@/graph/node/Node';\nimport {Size, TableNodeData} from '@/graph/base/data';\nimport Port from '@/graph/base/Port';\n\ninterface TableNodeConfig {\n  label: string;\n  fontSize: number;\n  fontFamily: string;\n  lineHeight: number;\n}\n\ninterface TableConfig {\n  border: number;\n  cellBorder: number;\n  cellSpacing: number;\n  cellPadding: number;\n}\n\nexport default class TableNodeType extends NodeType {\n  public static defaultConfig: TableNodeConfig = {\n    label: '',\n    fontSize: 12,\n    fontFamily: 'sans-serif',\n    lineHeight: 1.2,\n  };\n  private config?: TableNodeConfig;\n  private tableConfig?: TableConfig;\n  private table?: TableCell[][];\n  private ports?: Map<string, Port>;\n  private contentSize?: Size;\n  private borderSize?: Size;\n  constructor(parent: Node) {\n    super(parent);\n  }\n  public setData(data: TableNodeData) {\n    const newConfig = Object.assign({}, TableNodeType.defaultConfig, data);\n    const layoutNeedsUpdate = !this.config ||\n      this.config.label !== newConfig.label ||\n      this.config.fontSize !== newConfig.fontSize ||\n      this.config.fontFamily !== newConfig.fontFamily ||\n      this.config.lineHeight !== newConfig.lineHeight;\n    this.config = newConfig;\n    if (layoutNeedsUpdate) {\n      const jsonObj = convert.xml2js(this.config.label) as Element;\n      if (!jsonObj.elements || !jsonObj.elements[0] ||\n          !jsonObj.elements[0].name ||\n          jsonObj.elements[0].name.toLowerCase() !== 'table') {\n        throw new Error('Expect table element');\n      }\n      const tableElement = jsonObj.elements[0];\n      this.tableConfig = {\n        border: 0,\n        cellBorder: 1,\n        cellSpacing: 0,\n        cellPadding: 4,\n      };\n      if (tableElement.attributes) {\n        for (const attribute of Object.keys(tableElement.attributes)) {\n          const value = tableElement.attributes[attribute] as string;\n          switch (attribute.toLowerCase()) {\n            case 'border':\n              this.tableConfig.border = parseInt(value, 10);\n              break;\n            case 'cellborder':\n              this.tableConfig.cellBorder = parseInt(value, 10);\n              break;\n            case 'cellspacing':\n              this.tableConfig.cellSpacing = parseInt(value, 10);\n              break;\n            case 'cellpadding':\n              this.tableConfig.cellPadding = parseInt(value, 10);\n              break;\n            default:\n              throw new Error('Unknown attribute for table');\n          }\n        }\n      }\n      // Parse table and get numbers of rows and columns\n      this.table = [];\n      this.ports = new Map();\n      let rows = 0;\n      let columns = 0;\n      let firstRow = true;\n      if (tableElement.elements) {\n        for (const tr of tableElement.elements) {\n          if (!tr.name || tr.name.toLowerCase() !== 'tr') {\n            throw new Error('Expect tr element');\n          }\n          const row = [];\n          if (tr.elements) {\n            for (const td of tr.elements) {\n              if (!td.name || td.name.toLowerCase() !== 'td') {\n                throw new Error('Expect td element');\n              }\n              const cell = new TableCell(this.parent.root, this.parent, this);\n              cell.setData(td);\n              const port = cell.getPort();\n              if (port) {\n                this.ports.set(port, cell);\n              }\n              if (firstRow) {\n                columns += cell.getConfig()!.columnSpan;\n              }\n              row.push(cell);\n            }\n          }\n          ++rows;\n          if (firstRow) {\n            firstRow = false;\n          }\n          this.table.push(row);\n        }\n      }\n      // Create empty cell size table\n      const cellSizes = [];\n      for (let i = 0; i < rows; ++i) {\n        cellSizes.push(Array(columns).fill(null));\n      }\n      // Fill size table with minimum required size\n      for (let rowOffset = 0; rowOffset < rows; ++rowOffset) {\n        let columnOffset = 0;\n        for (const cell of this.table[rowOffset]) {\n          while (columnOffset < columns && cellSizes[rowOffset][columnOffset]) {\n            ++columnOffset;\n          }\n          cell.rowOffset = rowOffset;\n          cell.columnOffset = columnOffset;\n          const {rowSpan, columnSpan} = cell.getConfig()!;\n          const cellHeight = (cell.contentSize!.height -\n            (rowSpan - 1) * this.tableConfig.cellSpacing) / rowSpan;\n          const cellWidth = (cell.contentSize!.width -\n            (columnSpan - 1) * this.tableConfig.cellSpacing) / columnSpan;\n          for (let i = 0; i < rowSpan; ++i) {\n            for (let j = 0; j < columnSpan; ++j) {\n              cellSizes[rowOffset + i][columnOffset + j] = {\n                width: cellWidth,\n                height: cellHeight,\n              };\n            }\n          }\n          columnOffset += columnSpan;\n        }\n      }\n      // Get height of rows and width of columns\n      const rowHeight = [];\n      const columnWidth = [];\n      for (let i = 0; i < rows; ++i) {\n        let max = -Infinity;\n        for (let j = 0; j < columns; ++j) {\n          if (cellSizes[i][j].height > max) {\n            max = cellSizes[i][j].height;\n          }\n        }\n        rowHeight.push(max);\n      }\n      for (let j = 0; j < columns; ++j) {\n        let max = -Infinity;\n        for (let i = 0; i < rows; ++i) {\n          if (cellSizes[i][j].width > max) {\n            max = cellSizes[i][j].width;\n          }\n        }\n        columnWidth.push(max);\n      }\n      // Get accumulated height and width\n      const accRowHeight = [0];\n      const accColumnWidth = [0];\n      for (let i = 0; i < rows; ++i) {\n        accRowHeight.push(accRowHeight[i] + rowHeight[i] +\n          this.tableConfig.cellSpacing);\n      }\n      for (let i = 0; i < columns; ++i) {\n        accColumnWidth.push(accColumnWidth[i] + columnWidth[i] +\n          this.tableConfig.cellSpacing);\n      }\n      this.contentSize = {\n        width: accColumnWidth[accColumnWidth.length - 1] -\n          this.tableConfig.cellSpacing,\n        height: accRowHeight[accRowHeight.length - 1] -\n          this.tableConfig.cellSpacing,\n      };\n      // Set size and position to cells\n      for (const row of this.table) {\n        for (const cell of row) {\n          const {rowSpan, columnSpan} = cell.getConfig()!;\n          const {rowOffset, columnOffset} = cell;\n          const upperLeftX = accColumnWidth[columnOffset!];\n          const upperLeftY = accRowHeight[rowOffset!];\n          const width = accColumnWidth[columnOffset! + columnSpan] -\n            upperLeftX - this.tableConfig.cellSpacing;\n          const height = accRowHeight[rowOffset! + rowSpan] -\n            upperLeftY - this.tableConfig.cellSpacing;\n          cell.setPosition({\n            x: upperLeftX + width / 2 - this.contentSize.width / 2,\n            y: upperLeftY + height / 2 - this.contentSize.height / 2,\n          });\n          cell.cellSize = { width, height };\n        }\n      }\n      this.borderSize = {\n        width: this.contentSize.width + this.tableConfig.border +\n          2 * this.tableConfig.cellSpacing,\n        height: this.contentSize.height + this.tableConfig.border +\n          2 * this.tableConfig.cellSpacing,\n      };\n    }\n  }\n  public render() {\n    const rendered = [];\n    rendered.push( {\n      is: 'v-rect',\n      key: 'rect',\n      config: {\n        x: -this.contentSize!.width / 2 - this.tableConfig!.cellSpacing,\n        y: -this.contentSize!.height / 2 - this.tableConfig!.cellSpacing,\n        width: this.contentSize!.width + 2 * this.tableConfig!.cellSpacing,\n        height: this.contentSize!.height + 2 * this.tableConfig!.cellSpacing,\n        fill: 'white',\n        stroke: this.tableConfig!.border > 0 ? 'black' : undefined,\n        strokeWidth: this.tableConfig!.border,\n      },\n    });\n    for (const row of this.table!) {\n      for (const cell of row) {\n        rendered.push(cell.render());\n      }\n    }\n    return rendered;\n  }\n  public getConfig(): TableNodeConfig | undefined {\n    return this.config;\n  }\n  public getTableConfig(): TableConfig | undefined {\n    return this.tableConfig;\n  }\n  public findPort(id: string[]): Port | null {\n    if (id.length === 1) {\n      const founded = this.ports!.get(id[0]);\n      if (founded) {\n        return founded;\n      }\n      return null;\n    }\n    return null;\n  }\n  public getBoundingBoxSize() {\n    return this.borderSize!;\n  }\n  public distanceToBorder(angle: number) {\n    return Math.min(\n      Math.abs(this.borderSize!.width / 2 / Math.cos(angle)),\n      Math.abs(this.borderSize!.height / 2 / Math.sin(angle)),\n    );\n  }\n}\n","import BoxNodeType from '@/graph/node/type/BoxNodeType';\nimport NodeType from '@/graph/node/type/NodeType';\nimport {NodeData} from '@/graph/base/data';\nimport Node from '@/graph/node/Node';\nimport RecordNodeType from '@/graph/node/type/RecordNodeType';\nimport TableNodeType from '@/graph/node/type/TableNodeType';\n\nexport default function nodeTypeFactory(data: NodeData)\n    : new (parent: Node) => NodeType {\n  switch (data.shape) {\n    case 'table':\n      return TableNodeType;\n    case 'record':\n      return RecordNodeType;\n    default:\n      return BoxNodeType;\n  }\n}\n","import {NodeData} from '@/graph/base/data';\nimport Root from '@/graph/Root';\nimport nodeTypeFactory from '@/graph/node/type';\nimport NodeType from '@/graph/node/type/NodeType';\nimport Renderable from '@/graph/base/Renderable';\nimport Port from '@/graph/base/Port';\nimport Positioned from '@/graph/base/Positioned';\nimport Graph from '@/graph/graph/Graph';\n\nexport default class Node extends Port implements Renderable {\n  public static getId(data: NodeData) {\n    if (!data.id) {\n      throw new Error('Missing id field for node');\n    }\n    return data.id;\n  }\n  public readonly graph: Graph | null;\n  public fullId?: string;\n  private nodeType?: NodeType;\n  constructor(root: Root,\n              graph: Graph | null = null,\n              parent: Positioned | null = null) {\n    super(root, parent);\n    this.graph = graph;\n  }\n  public setData(data: NodeData) {\n    this.id = Node.getId(data);\n    this.fullId = data.parentId ? `${data.parentId}:${this.id}` : this.id;\n    const typeClass = nodeTypeFactory(data);\n    if (!this.nodeType || this.nodeType.constructor !== typeClass) {\n      this.nodeType = new typeClass(this);\n    }\n    this.nodeType.setData(data);\n  }\n  public render() {\n    return {\n      is: 'Group',\n      key: this.id,\n      draggable: true,\n      fullId: this.fullId,\n      config: {\n        x: this.position.x,\n        y: this.position.y,\n      },\n      children: this.nodeType!.render(),\n    };\n  }\n  public findPort(id: string[]): Port | null {\n    if (id.length === 0) {\n      return this;\n    }\n    return this.nodeType!.findPort(id);\n  }\n  public getBoundingBoxSize() {\n    return this.nodeType!.getBoundingBoxSize();\n  }\n  public distanceToBorder(angle: number) {\n    return this.nodeType!.distanceToBorder(angle);\n  }\n}\n","import Root from '@/graph/Root';\nimport Edge from '@/graph/edge/Edge';\nimport Graph from '@/graph/graph/Graph';\nimport Node from '@/graph/node/Node';\nimport {RenderableData} from '@/graph/base/data';\nimport Renderable from '@/graph/base/Renderable';\nimport Positioned from '@/graph/base/Positioned';\n\ninterface RenderableConstructor {\n  new (root: Root, graph: Graph | null,\n       parent: Positioned | null): Renderable;\n  getId(data: RenderableData): string;\n}\n\nexport default function renderableFactory(data: RenderableData)\n    : RenderableConstructor {\n  switch (data.type) {\n    case 'node':\n      return Node;\n    case 'edge':\n      return Edge;\n    case 'graph':\n      return Graph;\n    default:\n      throw new Error('Unknown renderable object');\n  }\n}\n","export default \"digraph stdThreadJoin {\\nlabel=\\\" VFG of stdThreadJoin\\\"\\ngraph [rankdir=\\\"LR\\\"]\\nsubgraph cluster_input {\\nlabel=\\\"Inputs\\\"\\nstyle=filled\\ncolor=black\\nfillcolor=darkolivegreen1\\nN912 [label=\\\"N912\\\\n[arg:stdThreadJoin_0]\\\", style=filled, fillcolor=\\\"cyan3\\\", shape=box]\\nN913 [label=\\\"N913\\\\n[arg:stdThreadJoin_0]*\\\", style=filled, fillcolor=\\\"cyan3\\\", shape=box]\\n} # end of input\\nsubgraph cluster_output {\\nlabel=\\\"Outputs\\\"\\nstyle=filled\\ncolor=black\\nfillcolor=goldenrod1\\nN940 [label=\\\"N940\\\\n_\\\", style=filled, fillcolor=\\\"cornflowerblue\\\", shape=box]\\n} # end of output\\n# body nodes\\nN919 [label=\\\"N919\\\\n&dummy\\\", style=filled, fillcolor=\\\"cyan3\\\", shape=box]\\nN925 [label=\\\"N925\\\\n0\\\", style=filled, fillcolor=\\\"lightgrey\\\", shape=box]\\nN926 [label=<<table  border='0' cellspacing='0'><tr><td port='top' bgcolor='palegreen' border='1'>N926(%6)<br/>getelementptr</td></tr><tr><td port='op_1' border='1'>N912</td></tr><tr><td port='op_2' border='1'>N925</td></tr><tr><td port='op_3' border='1'>N925</td></tr></table>>, shape=none]\\nN927 [label=\\\"N927\\\\nDEREF\\\", style=filled, fillcolor=\\\"gainsboro\\\", shape=box]\\nN928 [label=\\\"N928\\\\nstdThreadJoin::6*\\\", style=filled, fillcolor=\\\"cyan3\\\", shape=box]\\nN930 [label=\\\"N930\\\\n[arg:_pthread_join_0]\\\", style=filled, fillcolor=\\\"cornflowerblue\\\", shape=box]\\nN931 [label=\\\"N931\\\\n[arg:_pthread_join_1]\\\", style=filled, fillcolor=\\\"cornflowerblue\\\", shape=box]\\nN932 [label=\\\"N932\\\\nstdThreadJoin::8\\\", style=filled, fillcolor=\\\"cyan3\\\", shape=box]\\nN933 [label=<<table  border='0' cellspacing='0'><tr><td port='top' bgcolor='palegreen' border='1'>N933(%9)<br/>icmp ne</td></tr><tr><td port='op_1' border='1'>N925</td></tr><tr><td port='op_2' border='1'>N932</td></tr></table>>, shape=none]\\nN934 [label=\\\"N934\\\\n1\\\", style=filled, fillcolor=\\\"lightgrey\\\", shape=box]\\nN937 [label=\\\"N937\\\\n&gamma;\\\", style=filled, fillcolor=\\\"darksalmon\\\", shape=box]\\n# proxy\\nP595 [label=\\\"\\\",style=filled,color=crimson,fillcolor=crimson,shape=circle,height=0.05,width=0.05]\\nP596 [label=\\\"\\\",style=filled,color=crimson,fillcolor=crimson,shape=circle,height=0.05,width=0.05]\\n# end of body\\nN937 -> N940\\nN912 -> N926:op_1\\nN925 -> N926:op_2\\nN925 -> N926:op_3\\nN926:top -> N927\\nN928 -> N930\\nN919 -> N931\\nN925 -> N933:op_1\\nN932 -> N933:op_2\\nN925 -> P595 [arrowhead=none]\\nP595 -> N937\\nN933:top -> P595 [label=\\\"N933\\\",style=dotted,color=crimson]\\nN934 -> P596 [arrowhead=none]\\nP596 -> N937\\nN933:top -> P596 [label=\\\"!(N933)\\\",style=dotted,color=crimson]\\nCS_31 [shape=record,style=bold,label=\\\"_pthread_join | { {<cs_id_in_0> N930 | <cs_id_in_1> N931} | {<cs_id_out_0> N932} }\\\"]\\nN930 -> CS_31:cs_id_in_0\\nN931 -> CS_31:cs_id_in_1\\nCS_31:cs_id_out_0 -> N932\\n}\\n\"","export default \"{\\n  \\\"type\\\": \\\"graph\\\",\\n  \\\"id\\\": \\\"stdThreadJoin\\\",\\n  \\\"label\\\": \\\"VFG of stdThreadJoin\\\",\\n  \\\"layout\\\": {\\n    \\\"type\\\": \\\"KamadaKawai\\\",\\n    \\\"springLength\\\": 150,\\n    \\\"direction\\\": \\\"LR\\\"\\n  },\\n  \\\"children\\\": [\\n    {\\n      \\\"type\\\": \\\"graph\\\",\\n      \\\"id\\\": \\\"cluster_input\\\",\\n      \\\"label\\\": \\\"Inputs\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"darkolivegreen\\\",\\n      \\\"strokeWidth\\\": 1,\\n      \\\"strokeColor\\\": \\\"black\\\",\\n      \\\"children\\\": [\\n        {\\n          \\\"type\\\": \\\"node\\\",\\n          \\\"id\\\": \\\"N912\\\",\\n          \\\"label\\\": \\\"N912\\\\n[arg:stdThreadJoin_0]\\\",\\n          \\\"style\\\": \\\"filled\\\",\\n          \\\"fillColor\\\": \\\"cyan\\\",\\n          \\\"shape\\\": \\\"box\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"node\\\",\\n          \\\"id\\\": \\\"N913\\\",\\n          \\\"label\\\": \\\"N913\\\\n[arg:stdThreadJoin_0]*\\\",\\n          \\\"style\\\": \\\"filled\\\",\\n          \\\"fillColor\\\": \\\"cyan\\\",\\n          \\\"shape\\\": \\\"box\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"type\\\": \\\"graph\\\",\\n      \\\"id\\\": \\\"cluster_output\\\",\\n      \\\"label\\\": \\\"Outputs\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"goldenrod\\\",\\n      \\\"strokeWidth\\\": 1,\\n      \\\"strokeColor\\\": \\\"black\\\",\\n      \\\"children\\\": [\\n        {\\n          \\\"type\\\": \\\"node\\\",\\n          \\\"id\\\": \\\"N940\\\",\\n          \\\"label\\\": \\\"N940\\\\n_\\\",\\n          \\\"style\\\": \\\"filled\\\",\\n          \\\"fillColor\\\": \\\"cornflowerblue\\\",\\n          \\\"shape\\\": \\\"box\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N919\\\",\\n      \\\"label\\\": \\\"N919\\\\n&dummy\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"cyan\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N925\\\",\\n      \\\"label\\\": \\\"N925\\\\n0\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"lightgrey\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N926\\\",\\n      \\\"label\\\": \\\"<table  border='0' cellspacing='0'><tr><td port='top' bgcolor='palegreen' border='1'>N926(%6)<br/>getelementptr</td></tr><tr><td port='op_1' border='1'>N912</td></tr><tr><td port='op_2' border='1'>N925</td></tr><tr><td port='op_3' border='1'>N925</td></tr></table>\\\",\\n      \\\"shape\\\": \\\"table\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N927\\\",\\n      \\\"label\\\": \\\"N927\\\\nDEREF\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"gainsboro\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N928\\\",\\n      \\\"label\\\": \\\"N928\\\\nstdThreadJoin::6*\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"cyan\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N930\\\",\\n      \\\"label\\\": \\\"N930\\\\n[arg:_pthread_join_0]\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"cornflowerblue\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N931\\\",\\n      \\\"label\\\": \\\"N931\\\\n[arg:_pthread_join_1]\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"cornflowerblue\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N932\\\",\\n      \\\"label\\\": \\\"N932\\\\nstdThreadJoin::8\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"cyan\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N933\\\",\\n      \\\"label\\\": \\\"<table  border='0' cellspacing='0'><tr><td port='top' bgcolor='palegreen' border='1'>N933(%9)<br/>icmp ne</td></tr><tr><td port='op_1' border='1'>N925</td></tr><tr><td port='op_2' border='1'>N932</td></tr></table>\\\",\\n      \\\"shape\\\": \\\"table\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N934\\\",\\n      \\\"label\\\": \\\"N934\\\\n1\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"lightgrey\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"N937\\\",\\n      \\\"label\\\": \\\"N937\\\\n&gamma;\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"darksalmon\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"P595\\\",\\n      \\\"label\\\": \\\"\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"color\\\": \\\"crimson\\\",\\n      \\\"fillColor\\\": \\\"crimson\\\",\\n      \\\"shape\\\": \\\"circle\\\",\\n      \\\"radius\\\": 0.025\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"P596\\\",\\n      \\\"label\\\": \\\"\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"color\\\": \\\"crimson\\\",\\n      \\\"fillColor\\\": \\\"crimson\\\",\\n      \\\"shape\\\": \\\"circle\\\",\\n      \\\"radius\\\": 0.025\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N937\\\",\\n      \\\"to\\\": \\\"N940\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N912\\\",\\n      \\\"to\\\": \\\"N926:op_1\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N925\\\",\\n      \\\"to\\\": \\\"N926:op_2\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N925\\\",\\n      \\\"to\\\": \\\"N926:op_3\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N926:top\\\",\\n      \\\"to\\\": \\\"N927\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N928\\\",\\n      \\\"to\\\": \\\"N930\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N919\\\",\\n      \\\"to\\\": \\\"N931\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N925\\\",\\n      \\\"to\\\": \\\"N933:op_1\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N932\\\",\\n      \\\"to\\\": \\\"N933:op_2\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N925\\\",\\n      \\\"to\\\": \\\"P595\\\",\\n      \\\"arrowHead\\\": \\\"none\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"P595\\\",\\n      \\\"to\\\": \\\"N937\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N933:top\\\",\\n      \\\"to\\\": \\\"P595\\\",\\n      \\\"label\\\": \\\"N933\\\",\\n      \\\"style\\\": \\\"dotted\\\",\\n      \\\"color\\\": \\\"crimson\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N934\\\",\\n      \\\"to\\\": \\\"P596\\\",\\n      \\\"arrowHead\\\": \\\"none\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"P596\\\",\\n      \\\"to\\\": \\\"N937\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N933:top\\\",\\n      \\\"to\\\": \\\"P596\\\",\\n      \\\"label\\\": \\\"!(N933)\\\",\\n      \\\"style\\\": \\\"dotted\\\",\\n      \\\"color\\\": \\\"crimson\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"CS_31\\\",\\n      \\\"shape\\\": \\\"record\\\",\\n      \\\"style\\\": \\\"bold\\\",\\n      \\\"direction\\\": \\\"vertical\\\",\\n      \\\"label\\\": \\\"_pthread_join | { {<cs_id_in_0> N930 | <cs_id_in_1> N931} | {<cs_id_out_0> N932} }\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N930\\\",\\n      \\\"to\\\": \\\"CS_31:cs_id_in_0\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"N931\\\",\\n      \\\"to\\\": \\\"CS_31:cs_id_in_1\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"CS_31:cs_id_out_0\\\",\\n      \\\"to\\\": \\\"N932\\\"\\n    }\\n  ]\\n}\\n\"","export default \"{\\n  \\\"type\\\": \\\"node\\\",\\n  \\\"id\\\": \\\"N926\\\",\\n  \\\"label\\\": \\\"hello\\\\\\\\nworld |{ b |{c|<here> d|e}| f}| g | h\\\",\\n  \\\"shape\\\": \\\"record\\\"\\n}\\n\"","export default \"{\\n  \\\"type\\\": \\\"graph\\\",\\n  \\\"id\\\": \\\"stdThreadJoin\\\",\\n  \\\"label\\\": \\\"VFG of stdThreadJoin\\\",\\n  \\\"layout\\\": {\\n    \\\"type\\\": \\\"KamadaKawai\\\",\\n    \\\"springLength\\\": 150\\n  },\\n  \\\"component\\\": {\\n    \\\"direction\\\": \\\"LR\\\"\\n  },\\n  \\\"children\\\": [\\n    {\\n      \\\"type\\\": \\\"graph\\\",\\n      \\\"id\\\": \\\"cluster_input\\\",\\n      \\\"component\\\": {\\n        \\\"direction\\\": \\\"TD\\\"\\n      },\\n      \\\"label\\\": \\\"Inputs\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"darkolivegreen\\\",\\n      \\\"strokeWidth\\\": 1,\\n      \\\"strokeColor\\\": \\\"black\\\",\\n      \\\"children\\\": [\\n        {\\n          \\\"type\\\": \\\"node\\\",\\n          \\\"id\\\": \\\"N921\\\",\\n          \\\"label\\\": \\\"N912\\\\n[arg:stdThreadJoin_0]\\\",\\n          \\\"style\\\": \\\"filled\\\",\\n          \\\"fillColor\\\": \\\"cyan\\\",\\n          \\\"shape\\\": \\\"box\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"node\\\",\\n          \\\"id\\\": \\\"N913\\\",\\n          \\\"label\\\": \\\"N913\\\\n[arg:stdThreadJoin_0]*\\\",\\n          \\\"style\\\": \\\"filled\\\",\\n          \\\"fillColor\\\": \\\"cyan\\\",\\n          \\\"shape\\\": \\\"box\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"type\\\": \\\"graph\\\",\\n      \\\"id\\\": \\\"cluster_output\\\",\\n      \\\"label\\\": \\\"Outputs\\\",\\n      \\\"style\\\": \\\"filled\\\",\\n      \\\"fillColor\\\": \\\"goldenrod\\\",\\n      \\\"strokeWidth\\\": 1,\\n      \\\"strokeColor\\\": \\\"black\\\",\\n      \\\"children\\\": [\\n        {\\n          \\\"type\\\": \\\"node\\\",\\n          \\\"id\\\": \\\"N940\\\",\\n          \\\"label\\\": \\\"N940\\\\n_\\\",\\n          \\\"style\\\": \\\"filled\\\",\\n          \\\"fillColor\\\": \\\"cornflowerblue\\\",\\n          \\\"shape\\\": \\\"box\\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\\n\"","export default \"{\\n  \\\"type\\\": \\\"graph\\\",\\n  \\\"id\\\": \\\"cluster_input\\\",\\n  \\\"layout\\\": {\\n    \\\"type\\\": \\\"KamadaKawai\\\",\\n    \\\"direction\\\": \\\"LR\\\"\\n  },\\n  \\\"children\\\": [\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"0\\\",\\n      \\\"label\\\": \\\"0\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"1\\\",\\n      \\\"label\\\": \\\"1\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"2\\\",\\n      \\\"label\\\": \\\"2\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"3\\\",\\n      \\\"label\\\": \\\"3\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"4\\\",\\n      \\\"label\\\": \\\"4\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"5\\\",\\n      \\\"label\\\": \\\"5\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"6\\\",\\n      \\\"label\\\": \\\"6\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"7\\\",\\n      \\\"label\\\": \\\"7\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"8\\\",\\n      \\\"label\\\": \\\"8\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"9\\\",\\n      \\\"label\\\": \\\"9\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"10\\\",\\n      \\\"label\\\": \\\"10\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"11\\\",\\n      \\\"label\\\": \\\"11\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"0\\\",\\n      \\\"to\\\": \\\"1\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"1\\\",\\n      \\\"to\\\": \\\"2\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"2\\\",\\n      \\\"to\\\": \\\"0\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"0\\\",\\n      \\\"to\\\": \\\"3\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"3\\\",\\n      \\\"to\\\": \\\"2\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"3\\\",\\n      \\\"to\\\": \\\"4\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"4\\\",\\n      \\\"to\\\": \\\"0\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"4\\\",\\n      \\\"to\\\": \\\"5\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"5\\\",\\n      \\\"to\\\": \\\"0\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"5\\\",\\n      \\\"to\\\": \\\"1\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"1\\\",\\n      \\\"to\\\": \\\"8\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"8\\\",\\n      \\\"to\\\": \\\"5\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"5\\\",\\n      \\\"to\\\": \\\"7\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"7\\\",\\n      \\\"to\\\": \\\"4\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"4\\\",\\n      \\\"to\\\": \\\"6\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"6\\\",\\n      \\\"to\\\": \\\"3\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"3\\\",\\n      \\\"to\\\": \\\"10\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"10\\\",\\n      \\\"to\\\": \\\"2\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"2\\\",\\n      \\\"to\\\": \\\"9\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"9\\\",\\n      \\\"to\\\": \\\"1\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"8\\\",\\n      \\\"to\\\": \\\"9\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"9\\\",\\n      \\\"to\\\": \\\"10\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"10\\\",\\n      \\\"to\\\": \\\"6\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"6\\\",\\n      \\\"to\\\": \\\"7\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"7\\\",\\n      \\\"to\\\": \\\"8\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"11\\\",\\n      \\\"to\\\": \\\"8\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"11\\\",\\n      \\\"to\\\": \\\"9\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"11\\\",\\n      \\\"to\\\": \\\"10\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"11\\\",\\n      \\\"to\\\": \\\"6\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"11\\\",\\n      \\\"to\\\": \\\"7\\\"\\n    }\\n  ]\\n}\\n\"","export default \"{\\n  \\\"type\\\": \\\"node\\\",\\n  \\\"id\\\": \\\"N926\\\",\\n  \\\"label\\\": \\\"<TABLE BORDER=\\\\\\\"1\\\\\\\" CELLBORDER=\\\\\\\"1\\\\\\\" CELLSPACING=\\\\\\\"2\\\\\\\" CELLPADDING=\\\\\\\"4\\\\\\\"><TR><TD ROWSPAN=\\\\\\\"3\\\\\\\"><FONT COLOR=\\\\\\\"red\\\\\\\">hello</FONT><BR/>world</TD><TD COLSPAN=\\\\\\\"3\\\\\\\">b</TD><TD ROWSPAN=\\\\\\\"3\\\\\\\" BGCOLOR=\\\\\\\"lightgrey\\\\\\\">g</TD><TD ROWSPAN=\\\\\\\"3\\\\\\\">h</TD></TR><TR><TD>c</TD><TD PORT=\\\\\\\"here\\\\\\\">d</TD><TD>e</TD></TR><TR><TD COLSPAN=\\\\\\\"3\\\\\\\">f</TD></TR></TABLE>\\\",\\n  \\\"shape\\\": \\\"table\\\"\\n}\\n\"","export default \"{\\n  \\\"type\\\": \\\"graph\\\",\\n  \\\"id\\\": \\\"hello\\\",\\n  \\\"children\\\": [\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"0\\\",\\n      \\\"label\\\": \\\"0\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"node\\\",\\n      \\\"id\\\": \\\"1\\\",\\n      \\\"label\\\": \\\"1\\\",\\n      \\\"shape\\\": \\\"box\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"edge\\\",\\n      \\\"from\\\": \\\"0\\\",\\n      \\\"to\\\": \\\"1\\\",\\n      \\\"lineWidth\\\": 5,\\n      \\\"pointerWidth\\\": 20,\\n      \\\"pointerHeight\\\": 30\\n    }\\n  ]\\n}\\n\"","import EventEmitter from '@/graph/base/EventEmitter';\nimport { RenderableData } from '@/graph/base/data';\nimport renderableFactory from '@/graph/base/renderableFactory';\n\nexport default class Root extends EventEmitter {\n  public ctx: CanvasRenderingContext2D;\n  public child: Renderable | null;\n  public stepTimer: number;\n  public constructor() {\n    super();\n    this.ctx = document.createElement('canvas').getContext('2d')!;\n    this.child = null;\n    this.stepTimer = setInterval(() => {\n      if (this.child instanceof Graph) {\n        if (this.child.step()) {\n          this.refresh();\n        }\n      }\n    }, 1000 / 60);\n  }\n  public findPort(id: string[]) {\n    // noinspection SuspiciousTypeOfGuard\n    if (this.child instanceof Port) {\n      return this.child.findPort(id);\n    }\n    return null;\n  }\n  public setData(data: RenderableData) {\n    const newClass = renderableFactory(data);\n    if (this.child === null || this.child.constructor !== newClass) {\n      this.child = new newClass(this, null, null);\n    }\n    this.child!.setData(data);\n    this.refresh();\n  }\n  public redraw(data: RenderableData) {\n    this.child = new (renderableFactory(data))(this, null, null);\n    this.child.setData(data);\n    this.refresh();\n  }\n  public moveDraggable(fullId: string,\n                       delta: { deltaX: number, deltaY: number }) {\n    const id = fullId.split(':');\n    // noinspection SuspiciousTypeOfGuard\n    if (this.child instanceof Port) {\n      if (this.child.id !== id[0]) {\n        return null;\n      }\n      const element = this.findPort(id.slice(1));\n      if (element !== null) {\n        element.getPosition().x += delta.deltaX;\n        element.getPosition().y += delta.deltaY;\n        this.refresh();\n      }\n    }\n  }\n  public refresh() {\n    this.emit('render', [{\n      key: 'main',\n      children: [\n        this.child!.render(),\n      ],\n    }]);\n  }\n}\n\nexport const globalRoot = new Root();\n// @ts-ignore\nwindow.globalRoot = globalRoot;\nexport const globalParsers\n    : { [input: string]: (input: string) => RenderableData } = {\n  json(input: string): RenderableData { return JSON.parse(input); },\n  graphviz(/* input: string */): RenderableData { throw new Error('Not implemented'); },\n};\n\n// Examples\nimport stdThreadJoinGv from '!raw-loader!./examples/stdThreadJoin.gv';\nimport stdThreadJoinJson from '!raw-loader!./examples/stdThreadJoin.txt';\nimport recordJson from '!raw-loader!./examples/record.txt';\nimport subGraphJson from '!raw-loader!./examples/subgraph.txt';\nimport icosahedronJson from '!raw-loader!./examples/icosahedron.txt';\nimport tableJson from '!raw-loader!./examples/table.txt';\nimport edgeJson from '!raw-loader!./examples/edge.txt';\nimport Renderable from '@/graph/base/Renderable';\nimport Port from '@/graph/base/Port';\nimport Graph from '@/graph/graph/Graph';\n\ninterface Example {\n  name: string;\n  parser: string;\n  content: string;\n}\n\nexport const globalExamples: Example[] = [\n  {\n    name: 'stdThreadJoinGv',\n    parser: 'graphviz',\n    content: stdThreadJoinGv,\n  },\n  {\n    name: 'stdThreadJoinJson',\n    parser: 'json',\n    content: stdThreadJoinJson,\n  },\n  {\n    name: 'record',\n    parser: 'json',\n    content: recordJson,\n  },\n  {\n    name: 'subGraph',\n    parser: 'json',\n    content: subGraphJson,\n  },\n  {\n    name: 'icosahedronJson',\n    parser: 'json',\n    content: icosahedronJson,\n  },\n  {\n    name: 'table',\n    parser: 'json',\n    content: tableJson,\n  },\n  {\n    name: 'edge',\n    parser: 'json',\n    content: edgeJson,\n  },\n];\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-line',{attrs:{\"config\":_vm.pointerConfig}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport {Component, Prop, Vue} from 'vue-property-decorator';\n\n@Component\nexport default class Pointer extends Vue {\n  @Prop(Number) public readonly x: number | undefined;\n  @Prop(Number) public readonly y: number | undefined;\n  @Prop(Number) public readonly angle: number | undefined;\n  @Prop(Number) public readonly width: number | undefined;\n  @Prop(Number) public readonly height: number | undefined;\n  @Prop(String) public readonly fill: string | undefined;\n  get pointerConfig() {\n    const x = this.x || 0;\n    const y = this.y || 0;\n    const angle = this.angle || 0;\n    const width = this.width || 10;\n    const height = this.height || 15;\n    const fill = this.fill || 'black';\n    const middleX = x + height * Math.cos(angle);\n    const middleY = y + height * Math.sin(angle);\n    const deltaX = width / 2 * Math.sin(angle);\n    const deltaY = -width / 2 * Math.cos(angle);\n    return {\n      points: [\n          x, y,\n          middleX + deltaX, middleY + deltaY,\n          middleX - deltaX, middleY - deltaY,\n      ],\n      closed: true,\n      fill,\n    };\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pointer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pointer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Pointer.vue?vue&type=template&id=5f1af393&\"\nimport script from \"./Pointer.vue?vue&type=script&lang=ts&\"\nexport * from \"./Pointer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator';\nimport Group from './renderable/Group.vue';\nimport {globalRoot} from '@/graph/Root';\nimport Pointer from '@/components/renderable/Pointer.vue';\n\nVue.component('Group', Group);\nVue.component('Pointer', Pointer);\n\n@Component\nexport default class Graph extends Vue {\n  @Prop({ type: Number, required: true }) public readonly width!: number;\n  @Prop({ type: Number, required: true }) public readonly height!: number;\n  @Prop({ type: Array, default() { return []; }})\n  public readonly data!: object[];\n  private x = 0;\n  private y = 0;\n  private scale = 1;\n  private draggedId: null | string = null;\n  private mouseDragActive = false;\n  private mouseLastCoords = {\n    x: 0,\n    y: 0,\n  };\n  private thumbnailMouseDragActive = false;\n  private thumbnailMouseLastCoords = {\n    x: 0,\n    y: 0,\n  };\n  public mounted() {\n    this.updateThumbnailScale();\n  }\n  @Watch('scale')\n  public onScaleChanged() {\n    const stage = (this.$refs.stage as any).getStage();\n    stage.scale({ x: this.scale, y: this.scale });\n    stage.draw();\n  }\n  @Watch('thumbnailFactor')\n  public onThumbnailFactorChanged() {\n    this.updateThumbnailScale();\n  }\n  get thumbnailFactor() {\n    return Math.min(this.width, this.height) > 600 ? 5 : 4;\n  }\n  get thumbnailWidth() {\n    return this.width / this.thumbnailFactor;\n  }\n  get thumbnailHeight() {\n    return this.height / this.thumbnailFactor;\n  }\n  get thumbnailViewportConfig() {\n    return {\n      x: (-this.width / 2 - this.x) / this.scale,\n      y: (-this.height / 2 - this.y) / this.scale,\n      width: this.width / this.scale,\n      height: this.height / this.scale,\n      stroke: '#3eaf7c',\n      strokeWidth: this.thumbnailFactor,\n    };\n  }\n  get thumbnailViewportBackgroundConfig() {\n    const viewport = this.thumbnailViewportConfig;\n    return {\n      fill: 'rgba(0,0,0,0.2)',\n      sceneFunc: (ctx: any, shape: any) => {\n        ctx.beginPath();\n        ctx.moveTo(-this.width / 2, -this.height / 2);\n        ctx.lineTo(this.width / 2, -this.height / 2);\n        ctx.lineTo(this.width / 2, this.height / 2);\n        ctx.lineTo(-this.width / 2, this.height / 2);\n        ctx.lineTo(-this.width / 2, -this.height / 2);\n        ctx.moveTo(viewport.x, viewport.y);\n        ctx.lineTo(viewport.x, viewport.y + viewport.height);\n        ctx.lineTo(viewport.x + viewport.width, viewport.y + viewport.height);\n        ctx.lineTo(viewport.x + viewport.width, viewport.y);\n        ctx.lineTo(viewport.x, viewport.y);\n        ctx.fillStrokeShape(shape);\n      },\n    };\n  }\n  public updateThumbnailScale() {\n    const scale = 1 / this.thumbnailFactor;\n    (this.$refs.thumbnailStage as any).getStage().scale({ x: scale, y: scale });\n  }\n  public wheel(e: { evt: WheelEvent }) {\n    const scaleBy = 1.1;\n    e.evt.preventDefault();\n    const stage = (this.$refs.stage as any).getStage();\n    const mousePointTo = {\n      x: (stage.getPointerPosition().x - stage.x()) / this.scale,\n      y: (stage.getPointerPosition().y - stage.y()) / this.scale,\n    };\n    this.scale = e.evt.deltaY < 0 ? this.scale * scaleBy :\n      this.scale / scaleBy;\n    const newPos = {\n      x: -(mousePointTo.x - stage.getPointerPosition().x / this.scale) *\n        this.scale,\n      y: -(mousePointTo.y - stage.getPointerPosition().y / this.scale) *\n        this.scale,\n    };\n    this.x = newPos.x - this.width / 2;\n    this.y = newPos.y - this.height / 2;\n  }\n  public setDraggedIdAndPos(id: string, pos: {x: number, y: number}) {\n    this.draggedId = id;\n    this.mouseLastCoords = pos;\n  }\n  public mousedown(e: { evt: MouseEvent }) {\n    this.mouseDragActive = true;\n    this.mouseLastCoords = {\n      x: e.evt.pageX,\n      y: e.evt.pageY,\n    };\n  }\n  public mouseup() {\n    this.mouseDragActive = false;\n    this.draggedId = null;\n  }\n  public mousemove(e: { evt: MouseEvent }) {\n    if (e.evt.buttons === 0) {\n      this.mouseDragActive = false;\n    }\n    if (this.mouseDragActive || this.draggedId) {\n      const newCoords = {\n        x: e.evt.pageX,\n        y: e.evt.pageY,\n      };\n      const deltaX = newCoords.x - this.mouseLastCoords.x;\n      const deltaY = newCoords.y - this.mouseLastCoords.y;\n      if (this.draggedId) {\n          globalRoot.moveDraggable(this.draggedId, {\n              deltaX: deltaX / this.scale,\n              deltaY: deltaY / this.scale,\n          });\n      } else {\n        this.x += deltaX;\n        this.y += deltaY;\n      }\n      this.mouseLastCoords = newCoords;\n    }\n  }\n  public thumbnailMousedown(e: { evt: MouseEvent }) {\n    this.thumbnailMouseDragActive = true;\n    this.thumbnailMouseLastCoords = {\n      x: e.evt.pageX,\n      y: e.evt.pageY,\n    };\n  }\n  public thumbnailMouseup() {\n    this.thumbnailMouseDragActive = false;\n  }\n  public thumbnailMousemove(e: { evt: MouseEvent }) {\n    if (e.evt.buttons === 0) {\n      this.thumbnailMouseDragActive = false;\n    }\n    if (this.thumbnailMouseDragActive) {\n      const newCoords = {\n        x: e.evt.pageX,\n        y: e.evt.pageY,\n      };\n      const oldCoords = this.thumbnailMouseLastCoords;\n      const scale = this.thumbnailFactor * this.scale;\n      this.x -= (newCoords.x - oldCoords.x) * scale;\n      this.y -= (newCoords.y - oldCoords.y) * scale;\n      this.thumbnailMouseLastCoords = newCoords;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Graph.vue?vue&type=template&id=c78ffbf4&scoped=true&\"\nimport script from \"./Graph.vue?vue&type=script&lang=ts&\"\nexport * from \"./Graph.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Graph.vue?vue&type=style&index=0&id=c78ffbf4&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c78ffbf4\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Watch } from 'vue-property-decorator';\nimport CollapsiblePane from './components/CollapsiblePane.vue';\nimport Graph from './components/Graph.vue';\nimport {\n  globalRoot,\n  globalParsers,\n  globalExamples,\n} from './graph/Root';\nimport 'vue-awesome/icons/upload';\nimport 'vue-awesome/icons/sync';\nimport _ from 'lodash';\n\n@Component({\n  components: {\n    CollapsiblePane,\n    Graph,\n  },\n})\nexport default class App extends Vue {\n  get desktopLayout() {\n    return this.windowWidth > 719;\n  }\n  get realSettingsWidth() {\n    return this.desktopLayout ? this.settingsWidth : this.canvasWidth;\n  }\n  // UI data\n  // noinspection JSUnusedLocalSymbols\n  private settingsOpen = true;\n  private settingsWidth = 300;\n  private minGraphWidth = 150;\n  private minSettingsWidth = 150;\n  private sizerMouseActive = false;\n  private sizerTouchActive = false;\n  private windowWidth = document.documentElement.clientWidth;\n  private windowHeight = document.documentElement.clientHeight;\n  private canvasWidth = 0;\n  private canvasHeight = 0;\n  // Input data\n  private parser = 'json';\n  private rawInput = '';\n  private parseError = null;\n  private parsedInput = '';\n  // noinspection JSUnusedLocalSymbols\n  private examples = globalExamples;\n  // Rendered data\n  // noinspection JSMismatchedCollectionQueryUpdate\n  private rendered: object[] = [];\n  public parseInput() {\n    try {\n      if (this.rawInput) {\n        const parsed = globalParsers[this.parser](this.rawInput);\n        this.parsedInput = JSON.stringify(parsed, null, 2);\n        globalRoot.setData(parsed);\n      } else {\n        this.parsedInput = '';\n      }\n      this.parseError = null;\n    } catch (e) {\n      /* tslint:disable:no-console */\n      console.log(e);\n      this.parseError = e.stack;\n    }\n  }\n  public mounted() {\n    window.addEventListener('resize', this.getSize);\n    this.updateCanvasSize();\n    globalRoot.addEventListener('render', _.throttle((data: object[]) => {\n      this.rendered = data;\n      // console.log(JSON.stringify(data, null, 2))\n    }, 1000 / 60));\n  }\n  public beforeDestroy() {\n    window.removeEventListener('resize', this.getSize);\n  }\n  @Watch('settingsWidth')\n  public onSettingsWidthChanged() {\n    this.updateCanvasSize();\n  }\n  @Watch('parser')\n  public onParserChanged() {\n    this.parseInput();\n  }\n  @Watch('rawInput')\n  public onRawInputChanged() {\n    this.parseInput();\n  }\n  public redraw() {\n    globalRoot.redraw(JSON.parse(this.parsedInput));\n  }\n  public selectExample(i: number) {\n    const example = globalExamples[i];\n    this.parser = example.parser;\n    this.rawInput = example.content;\n  }\n  public inputFileChange(e: InputEvent) {\n    const file = (e.target as HTMLInputElement).files![0];\n    if (!file) {\n      return;\n    }\n    switch (file.type) {\n      case 'application/json':\n        this.parser = 'json';\n        break;\n      case 'text/vnd.graphviz':\n        this.parser = 'graphviz';\n        break;\n      default:\n        alert('Unknown file type');\n        return;\n    }\n    const reader = new FileReader();\n    reader.onload = (evt: ProgressEvent<FileReader>) => {\n      this.rawInput = evt.target!.result as string;\n    };\n    reader.readAsText(file);\n  }\n  public getSize() {\n    this.windowWidth = document.documentElement.clientWidth;\n    this.windowHeight = document.documentElement.clientHeight;\n    this.$nextTick(() => this.updateCanvasSize());\n  }\n  public updateCanvasSize() {\n    this.canvasWidth = (this.$refs.canvas as HTMLElement).offsetWidth;\n    this.canvasHeight = (this.$refs.canvas as HTMLElement).offsetHeight;\n    // globalRoot.setViewportSize(this.canvasWidth, this.canvasHeight);\n  }\n  public onMainSizerMouseDown() {\n    this.sizerMouseActive = true;\n  }\n  public onMainSizerMouseUp() {\n    this.sizerMouseActive = false;\n  }\n  public onMainSizerMouseMove(e: MouseEvent) {\n    if (e.buttons === 0) {\n      this.sizerMouseActive = false;\n    }\n    if (this.sizerMouseActive) {\n      let elementOffsetX = 0;\n      let target = e.currentTarget;\n      while (target) {\n        elementOffsetX += (target as HTMLElement).offsetLeft;\n        target = (target as HTMLElement).offsetParent;\n      }\n      const mouseOffsetX = e.pageX;\n      const width = (e.currentTarget! as HTMLElement).offsetWidth;\n      const offsetX = mouseOffsetX - elementOffsetX;\n      if (offsetX >= this.minGraphWidth &&\n        (width - offsetX) >= this.minSettingsWidth) {\n        this.settingsWidth = Math.round(width - offsetX);\n      }\n    }\n  }\n  public onMainSizerTouchStart() {\n    this.sizerTouchActive = true;\n  }\n  public onMainSizerTouchEnd() {\n    this.sizerTouchActive = false;\n  }\n  public onMainSizerTouchMove(e: TouchEvent) {\n    if (this.sizerTouchActive) {\n      let elementOffsetX = 0;\n      let target = e.currentTarget;\n      while (target) {\n        elementOffsetX += (target as HTMLElement).offsetLeft;\n        target = (target as HTMLElement).offsetParent;\n      }\n      const mouseOffsetX = e.touches[0].pageX;\n      const width = (e.currentTarget! as HTMLElement).offsetWidth;\n      const offsetX = mouseOffsetX - elementOffsetX;\n      if (offsetX >= this.minGraphWidth &&\n        (width - offsetX) >= this.minSettingsWidth) {\n        this.settingsWidth = Math.round(width - offsetX);\n      }\n    }\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3c542358&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Icon from 'vue-awesome/components/Icon.vue';\nimport VueKonva from 'vue-konva';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nVue.component('v-icon', Icon);\nVue.use(VueKonva);\n\nnew Vue({\n  render: (h) => h(App),\n}).$mount('#app');\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollapsiblePane.vue?vue&type=style&index=0&id=08120549&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollapsiblePane.vue?vue&type=style&index=0&id=08120549&lang=stylus&scoped=true&\""],"sourceRoot":""}